{"version":3,"sources":["../../../node_modules/tslib/tslib.es6.js","ng://leatherman-bootstrap/lib/enums/dialog-button.enum.ts","ng://leatherman-bootstrap/lib/components/base-component/base.component.ts","ng://leatherman-bootstrap/lib/util/pipes/safe-html.pipe.ts","ng://leatherman-bootstrap/lib/config/injection-tokens/leatherman-app-config.injection-token.ts","ng://leatherman-bootstrap/lib/config/injection-tokens/error-dialog-service.injection-token.ts","ng://leatherman-bootstrap/lib/config/injection-tokens/confirm-dialog-service.injection-token.ts","ng://leatherman-bootstrap/lib/angular.module.ts","ng://leatherman-bootstrap/lib/dialogs/error/error-dialog/error-dialog.component.ts","ng://leatherman-bootstrap/lib/models/dialog/dialog-result.model.ts","ng://leatherman-bootstrap/lib/enums/secure.enum.ts","ng://leatherman-bootstrap/lib/enums/status.enum.ts","ng://leatherman-bootstrap/lib/enums/test-artifact.enum.ts","ng://leatherman-bootstrap/lib/dialogs/confirm/confirm-dialog/confirm-dialog.component.ts","ng://leatherman-bootstrap/lib/leatherman.module.ts","ng://leatherman-bootstrap/lib/dialogs/confirm/confirm-dialog/_models/confirm-dialog-data.model.ts","ng://leatherman-bootstrap/lib/dialogs/confirm/confirm-dialog.service.ts","ng://leatherman-bootstrap/lib/dialogs/confirm/_mock/confirm-dialog.mock.service.ts","ng://leatherman-bootstrap/lib/dialogs/error/error-dialog/_models/error-dialog-data.model.ts","ng://leatherman-bootstrap/lib/dialogs/error/error-dialog.service.ts","ng://leatherman-bootstrap/lib/dialogs/error/_mock/error-dialog.mock.service.ts","ng://leatherman-bootstrap/lib/util/collection/_enums/filter-case.enum.ts","ng://leatherman-bootstrap/lib/util/collection/_enums/filter-scope.enum.ts","ng://leatherman-bootstrap/lib/util/collection/_enums/sort.enum.ts","ng://leatherman-bootstrap/lib/util/collection/_enums/unique-mode.enum.ts","ng://leatherman-bootstrap/lib/util/collection/_enums/unique.enum.ts","ng://leatherman-bootstrap/lib/models/args/get-options.model.ts","ng://leatherman-bootstrap/lib/models/authentication/authentication-details.model.ts","ng://leatherman-bootstrap/lib/models/authentication/_submodels/authentication-token-expiry.mode.ts","ng://leatherman-bootstrap/lib/models/authentication/login-request.model.ts","ng://leatherman-bootstrap/lib/models/base/base.model.ts","ng://leatherman-bootstrap/lib/models/dto/search/search-facet-field.model.ts","ng://leatherman-bootstrap/lib/models/dto/search/search-facet-filter-properties.model.ts","ng://leatherman-bootstrap/lib/models/dto/search/search-facet-filter.model.ts","ng://leatherman-bootstrap/lib/models/dto/search/search-facet-options.model.ts","ng://leatherman-bootstrap/lib/models/dto/search/search-facet-range-filter-properties.model.ts","ng://leatherman-bootstrap/lib/models/dto/search/search-facet-range-filter.model.ts","ng://leatherman-bootstrap/lib/models/dto/search/search-facet-range-query.model.ts","ng://leatherman-bootstrap/lib/models/dto/search/search-match-filter.model.ts","ng://leatherman-bootstrap/lib/models/dto/search/search-range-filter.model.ts","ng://leatherman-bootstrap/lib/models/dto/search/search-options.model.ts","ng://leatherman-bootstrap/lib/models/dto/search/search-result-facet-item.model.ts","ng://leatherman-bootstrap/lib/models/dto/search/search-result-facet.model.ts","ng://leatherman-bootstrap/lib/models/dto/search/search-result-meta.model.ts","ng://leatherman-bootstrap/lib/models/dto/search/search-result-request.model.ts","ng://leatherman-bootstrap/lib/models/dto/dto-status-container.model.ts","ng://leatherman-bootstrap/lib/models/dto/dto.model.ts","ng://leatherman-bootstrap/lib/models/dto/array-dto.model.ts","ng://leatherman-bootstrap/lib/models/dto/item-dto.model.ts","ng://leatherman-bootstrap/lib/models/dto/search-results-container.model.ts","ng://leatherman-bootstrap/lib/models/dto/search-results-dto.model.ts","ng://leatherman-bootstrap/lib/models/error/client-error-report.model.ts","ng://leatherman-bootstrap/lib/models/events/upload-event.model.ts","ng://leatherman-bootstrap/lib/models/base-user/base-new-user-request.model.ts","ng://leatherman-bootstrap/lib/models/base-user/base-password-reset-request.model.ts","ng://leatherman-bootstrap/lib/models/base-user/base-user.model.ts","ng://leatherman-bootstrap/lib/models/base-user/validate-password-reset-token-response.model.ts","ng://leatherman-bootstrap/lib/models/base-user/validate-verify-email-token-response.model.ts","ng://leatherman-bootstrap/lib/services/base-data/_models/parameter.model.ts","ng://leatherman-bootstrap/lib/services/base-data/_models/parameters.model.ts","ng://leatherman-bootstrap/lib/services/base-data/_models/base-data-options.model.ts","ng://leatherman-bootstrap/lib/util/url/url.util.ts","ng://leatherman-bootstrap/lib/services/base-data/base-data.service.ts","ng://leatherman-bootstrap/lib/services/authentication/authentication-data.service.ts","ng://leatherman-bootstrap/lib/services/authentication/authentication.service.ts","ng://leatherman-bootstrap/lib/services/auth-guard/admin-auth-guard.service.ts","ng://leatherman-bootstrap/lib/services/auth-guard/user-auth-guard.service.ts","ng://leatherman-bootstrap/lib/services/base-component-ui/base-component-ui.service.ts","ng://leatherman-bootstrap/lib/services/base-service/base.service.ts","ng://leatherman-bootstrap/lib/services/error/custom-error-handler.server.ts","ng://leatherman-bootstrap/lib/services/route-parts/route-parts.service.ts","ng://leatherman-bootstrap/lib/services/base-user/base-user-data.service.ts","ng://leatherman-bootstrap/lib/models/base-user/password-reset.model.ts","ng://leatherman-bootstrap/lib/services/base-user/base-user.service.ts","ng://leatherman-bootstrap/lib/util/collection/_models/filter-options.model.ts","ng://leatherman-bootstrap/lib/util/collection/_models/sort-option.model.ts","ng://leatherman-bootstrap/lib/util/regex/_constants/strong-password.regex.ts","ng://leatherman-bootstrap/lib/util/regex/_constants/iso_date.regex.ts","ng://leatherman-bootstrap/lib/util/regex/_constants/latitude-regex.const.ts","ng://leatherman-bootstrap/lib/util/regex/_constants/longitude-regex.const.ts","ng://leatherman-bootstrap/lib/util/regex/_constants/phone-number-regex.const.ts","ng://leatherman-bootstrap/lib/util/regex/_constants/url-regex.const.ts","ng://leatherman-bootstrap/lib/util/regex/_constants/zip-code-regex.const.ts","ng://leatherman-bootstrap/lib/util/regex/regex.util.ts","ng://leatherman-bootstrap/lib/util/collection/collection.util.ts","ng://leatherman-bootstrap/lib/util/object-copy/object-copy.util.ts","ng://leatherman-bootstrap/lib/util/mixins/mixin.util.ts","ng://leatherman-bootstrap/lib/util/paginator/paginator.util.ts","ng://leatherman-bootstrap/lib/util/short-id/short-id.util.ts","ng://leatherman-bootstrap/lib/util/test/md-dialog/mat-dialog.mock.ts","ng://leatherman-bootstrap/lib/constants/state-abbreviations.const.ts","ng://leatherman-bootstrap/lib/util/validators/strong-password.validator.ts"],"names":["extendStatics","d","b","Object","setPrototypeOf","__proto__","Array","p","hasOwnProperty","__extends","__","this","constructor","prototype","create","__assign","assign","t","s","i","n","arguments","length","call","apply","__decorate","decorators","target","key","desc","c","r","getOwnPropertyDescriptor","Reflect","decorate","defineProperty","__param","paramIndex","decorator","__awaiter","thisArg","_arguments","P","generator","Promise","resolve","reject","fulfilled","value","step","next","e","rejected","result","done","then","__generator","body","f","y","g","_","label","sent","trys","ops","verb","throw","return","Symbol","iterator","v","op","TypeError","pop","push","__values","o","m","__read","ar","error","DialogButton","BaseComponent","isInitialized","isLoading","destroySubject$","Subject","ngOnDestroy","decodeURIComponent","uriComponent","encodeURIComponent","subscribeSubject","subject$","callback","_this","pipe","takeUntil","subscribe","_a","subscribeSubjectSync","subscribeValueChanges","control","valueChanges","debounceTime","distinctUntilChanged","Component","selector","template","SafeHtmlPipe","sanitizer","transform","html","bypassSecurityTrustHtml","DomSanitizer","Pipe","name","LeathermanAppConfigInjectionToken","InjectionToken","ErrorDialogServiceInjectionToken","ConfirmDialogServiceInjectionToken","AngularModule","NgModule","imports","CommonModule","RouterModule","HttpClientModule","ReactiveFormsModule","exports","ErrorDialogComponent","activeModal","ngOnInit","title","data","message","onClose","close","NgbActiveModal","Input","button","data2","data3","Secure","Status","TestArtifact","ConfirmDialogComponent","onCancel","dialogResult","DialogResult","Cancel","onConfirm","OK","LeathermanModule","forRoot","appConfig","errorDialogService","confirmDialogService","ngModule","LeathermanModule_1","providers","provide","useValue","useClass","declarations","ConfirmDialogService","dialog","openConfirmDialog","confirmDialogData","ConfirmDialogData","dialogRef","open","backdrop","keyboard","componentInstance","dialogData","NgbModal","Injectable","providedIn","MockConfirmDialogService","_super","console","log","ErrorDialogService","openErrorDialog","ErrorDialogData","MockErrorDialogService","FilterCase","FilterScope","Sort","UniqueMode","Unique","GetOptions","currentPage","pageSize","query","filter","skip","take","sort","sortColumn","sortAscending","calculatePageCount","rowCount","Math","floor","setSort","field","ascending","roles","email","password","testArtifact","true","token","isString","facetLabelCallback","excludedFacet","SearchFacetOptions","fields","rangeQueries","getRangeQuery","cleanedQuery","replace","trim","_b","_c","rangeQuery","fromValue","toValue","facetLabel","SearchOptions","facetFilters","facetRangeFilters","otherFilters","getMatchFilters","matchFilters","_d","facetFilter","matchFilter","SearchMatchFilter","urlDecode","_e","_f","otherFilter","getRangeFilters","rangeFilter","SearchRangeFilter","start","end","text","SearchResultFacetItem","count","active","createQuery","q","queryString","appendQueryString","activeFilter","foundToken","facetFilters_1","facetFilters_1_1","urlEncode","activeRangeQuery","rangeQueries_1","rangeQueries_1_1","endsWith","substr","appendString","appendedQueryString","SearchResultFacet","items","solrResults","qTime","responseHeader","QTime","resultCount","response","docs","numFound","options","facetOptions","params","rows","DtoStatusContainer","code","Created","NoData","NotModifed","BadRequest","NotAuthorized","ImATeapot","Error","isError","isNotError","Dto","status","suppressErrors","findIndex","ArrayDto","ItemDto","searchResultsDto","facets","request","meta","SearchResultsDto","ClientErrorReport","serviceName","statusText","url","stackTrace","BaseModel","type","callbackId","firstName","lastName","BaseUser","Parameters","_parameters","add","Parameter","getParamterString","parameterString","parameter","suppressedErrors","parameters","UrlUtil","join","urlElements","_i","resultArray","match","first","shift","component","joinedString","parts","split","BaseDataService","config","router","httpClient","_baseEndpoint","baseEndpoint","startsWith","_type","apiRoot","serverUrl","apiKey","HttpHeaders","Content-Type","Cache-Control","Pragma","Expires","Authorization","localStorageToken","localStorage","getItem","jwtTokenName","_delete","id","secure","validateId","headers","getHeader","delete","toPromise","_deleteWithOptions","hasParameters","_deleteTestArtifacts","Options","catch","err","handlePromiseError","_get","get","_getObservable","map","_getObservableWithOptions","_getWithOptions","undefined","_getMany","_getManyWithOptions","_post","object","validateModelId","post","error_1","_postWithOptions","_put","put","_id","_putWithOptions","_searchWithOptions","SearchResultsContainer","_uploadFormData","reportProgress","observe","event","uploadEvent","HttpEventType","UploadProgress","progress","round","loaded","total","UploadEvent","progressPercent","Response","handleObservableError","of","method","authHeader","api","apiHeader","false","noTokenHeader","model","Inject","args","Router","HttpClient","AuthenticationDataService","authenticate","loginRequest","authenticationDetails","register","newUserRequest","registerRoute","AuthenticationService","authenticationDataService","jwtHelper","JwtHelperService","_token","getTokenFromLocalStorage","setLocalStorage","clearToken","clearLocalStorage","getPrimaryUserRole","userRoles","getUserRoles","find","role","getTokenExpirationDate","getUserId","isAuthenticated","decodeToken","userId","isTokenExpired","loginUser","logoutUser","registerUser","setToken","removeItem","setItem","AdminAuthGuardService","authenticationService","canActivate","route","state","navigate","UserAuthGuardService","BaseComponentUIService","deleteRequestSubject$","editRequestSubject$","cloneRequestSubject$","cloneRequest","deleteRequest","editRequest","subjectName","CustomErrorHandlerService","deleteClientError","clientErrorId","getClientError","handleError","production","errorReport","reportClientError","clientErrorReport","document","location","href","errorRoute","RoutePartsService","activatedRoute","routeChanged","EventEmitter","me","events","NavigationEnd","root","routerState","snapshot","routeParts","generateRouteParts","formatRouteParts","emit","firstChild","concat","breadcrumb","path","urlSegments","reverse","fullUrl","routeParts_1","routeParts_1_1","routePart","ActivatedRoute","Output","Directive","BaseUserDataService","userBaseEndpoint","_addUserRole","_deleteUser","_getAdminUsers","getManyOptions","toString","_getUser","_getBasicUsers","_getUsers","_removeUserRole","_requestPasswordReset","passwordResetRequest","objectType","BasePasswordResetRequest","_requestPasswordResetToken","_resendVerificationEmail","verificationEmail","_resetPassword","passwordReset","_updateUser","user","_validatePasswordResetToken","passwordResetToken","_validateEmail","_validateVerifyEmailToken","verifyEmailToken","PasswordReset","newPassword","BaseUserService","dataService","_userId","_primaryUserRole","_getCurrentUser","_getPrimaryUserRole","userID","_loginUser","authenticated","_logoutUser","redirectRoute","_registerUser","newUser","resetRequest","BaseService","fitlerCase","fitlerScope","CaseInsensitive","Contains","order","STRONG_PASSWORD_REGEX","RegExp","ISO_DATE_REGEX","LATITUDE_REGEX","LONGITUDE_REGEX","PHONE_NUMBER_REGEX","URL_REGEX","ZIP_CODE_REGEX","RegexUtil","isIsoDate","test","isLatitude","isLongitude","isPhoneNumber","isStrongPassword","isUrl","isZipCode","CollectionUtil","append","collection","item","unique","uniqueMode","True","Id","isUniqueById","isUniqueByObject","filterColumns","filterOptions","FilterOptions","filterColumns_1","filterColumns_1_1","regExp","getFilterRegex","search","property","findById","insert","index","splice","multiKeySort","sortOptions","a","sortOptions_1","sortOptions_1_1","sortOption","Ascending","toLowerCase","remove","removeById","shuffle","temporaryValue","randomIndex","currentIndex","random","update","addIfMissing","regexString","escapeRegexCharacters","StartsWith","EndsWith","CaseSensitive","collection_1","collection_1_1","collectionItem","_.isEqual","ObjectCopyUtil","copy","objectToCopy","deepCopy","_.cloneDeep","shallowCopy","typedCopy","cloneObj","plainToClass","MixinUtil","ApplyMixins","derivedCtor","baseCtors","forEach","baseCtor","getOwnPropertyNames","PaginatorUtil","pageSizeOptions","paginationSubject$","_pageIndex","_pageSize","_filterColumns","_filterOptions","_pageSizeOptions","_sortOptions","_query","_length","pageIndex","_previousPageIndex","_noData","_data","paginate","deleteById","getById","goFirst","goLast","pageCount","unshift","loadData","onPagination","pageData","pageSizeChanged","previousPageIndex","_filteredData","_.slice","setSortOptions","setFilterColumns","setFilterOptions","setQuery","__spread","ShortIdUtil","generateId","ShortId.generate","indexOf","MatDialogMock","afterClosed","lowerCase","invalid","upperCase","number","specialCharacter","minLength","maxLength","invalidPassword"],"mappings":";;;;;;;;;;;;;;oFAgBA,IAAIA,EAAgB,SAASC,EAAGC,GAI5B,OAHAF,EAAgBG,OAAOC,gBAClB,CAAEC,UAAW,cAAgBC,OAAS,SAAUL,EAAGC,GAAKD,EAAEI,UAAYH,IACvE,SAAUD,EAAGC,GAAK,IAAK,IAAIK,KAAKL,EAAOA,EAAEM,eAAeD,KAAIN,EAAEM,GAAKL,EAAEK,MACpDN,EAAGC,IAGrB,SAASO,EAAUR,EAAGC,GAEzB,SAASQ,IAAOC,KAAKC,YAAcX,EADnCD,EAAcC,EAAGC,GAEjBD,EAAEY,UAAkB,OAANX,EAAaC,OAAOW,OAAOZ,IAAMQ,EAAGG,UAAYX,EAAEW,UAAW,IAAIH,GAG5E,IAAIK,EAAW,WAQlB,OAPAA,EAAWZ,OAAOa,QAAU,SAAkBC,GAC1C,IAAK,IAAIC,EAAGC,EAAI,EAAGC,EAAIC,UAAUC,OAAQH,EAAIC,EAAGD,IAE5C,IAAK,IAAIZ,KADTW,EAAIG,UAAUF,GACOhB,OAAOU,UAAUL,eAAee,KAAKL,EAAGX,KAAIU,EAAEV,GAAKW,EAAEX,IAE9E,OAAOU,IAEKO,MAAMb,KAAMU,YAezB,SAASI,EAAWC,EAAYC,EAAQC,EAAKC,GAChD,IAA2H5B,EAAvH6B,EAAIT,UAAUC,OAAQS,EAAID,EAAI,EAAIH,EAAkB,OAATE,EAAgBA,EAAO1B,OAAO6B,yBAAyBL,EAAQC,GAAOC,EACrH,GAAuB,iBAAZI,SAAoD,mBAArBA,QAAQC,SAAyBH,EAAIE,QAAQC,SAASR,EAAYC,EAAQC,EAAKC,QACpH,IAAK,IAAIV,EAAIO,EAAWJ,OAAS,EAAGH,GAAK,EAAGA,KAASlB,EAAIyB,EAAWP,MAAIY,GAAKD,EAAI,EAAI7B,EAAE8B,GAAKD,EAAI,EAAI7B,EAAE0B,EAAQC,EAAKG,GAAK9B,EAAE0B,EAAQC,KAASG,GAChJ,OAAOD,EAAI,GAAKC,GAAK5B,OAAOgC,eAAeR,EAAQC,EAAKG,GAAIA,EAGzD,SAASK,EAAQC,EAAYC,GAChC,OAAO,SAAUX,EAAQC,GAAOU,EAAUX,EAAQC,EAAKS,IAOpD,SAASE,EAAUC,EAASC,EAAYC,EAAGC,GAE9C,OAAO,IAAKD,IAAMA,EAAIE,WAAU,SAAUC,EAASC,GAC/C,SAASC,EAAUC,GAAS,IAAMC,EAAKN,EAAUO,KAAKF,IAAW,MAAOG,GAAKL,EAAOK,IACpF,SAASC,EAASJ,GAAS,IAAMC,EAAKN,EAAiB,MAAEK,IAAW,MAAOG,GAAKL,EAAOK,IACvF,SAASF,EAAKI,GAJlB,IAAeL,EAIaK,EAAOC,KAAOT,EAAQQ,EAAOL,QAJ1CA,EAIyDK,EAAOL,MAJhDA,aAAiBN,EAAIM,EAAQ,IAAIN,GAAE,SAAUG,GAAWA,EAAQG,OAITO,KAAKR,EAAWK,GAClGH,GAAMN,EAAYA,EAAUnB,MAAMgB,EAASC,GAAc,KAAKS,WAI/D,SAASM,EAAYhB,EAASiB,GACjC,IAAsGC,EAAGC,EAAG1C,EAAG2C,EAA3GC,EAAI,CAAEC,MAAO,EAAGC,KAAM,WAAa,GAAW,EAAP9C,EAAE,GAAQ,MAAMA,EAAE,GAAI,OAAOA,EAAE,IAAO+C,KAAM,GAAIC,IAAK,IAChG,OAAOL,EAAI,CAAEV,KAAMgB,EAAK,GAAIC,MAASD,EAAK,GAAIE,OAAUF,EAAK,IAAwB,mBAAXG,SAA0BT,EAAES,OAAOC,UAAY,WAAa,OAAO3D,OAAUiD,EACvJ,SAASM,EAAK9C,GAAK,OAAO,SAAUmD,GAAK,OACzC,SAAcC,GACV,GAAId,EAAG,MAAM,IAAIe,UAAU,mCAC3B,KAAOZ,GAAG,IACN,GAAIH,EAAI,EAAGC,IAAM1C,EAAY,EAARuD,EAAG,GAASb,EAAU,OAAIa,EAAG,GAAKb,EAAS,SAAO1C,EAAI0C,EAAU,SAAM1C,EAAEM,KAAKoC,GAAI,GAAKA,EAAET,SAAWjC,EAAIA,EAAEM,KAAKoC,EAAGa,EAAG,KAAKlB,KAAM,OAAOrC,EAE3J,OADI0C,EAAI,EAAG1C,IAAGuD,EAAK,CAAS,EAARA,EAAG,GAAQvD,EAAE+B,QACzBwB,EAAG,IACP,KAAK,EAAG,KAAK,EAAGvD,EAAIuD,EAAI,MACxB,KAAK,EAAc,OAAXX,EAAEC,QAAgB,CAAEd,MAAOwB,EAAG,GAAIlB,MAAM,GAChD,KAAK,EAAGO,EAAEC,QAASH,EAAIa,EAAG,GAAIA,EAAK,CAAC,GAAI,SACxC,KAAK,EAAGA,EAAKX,EAAEI,IAAIS,MAAOb,EAAEG,KAAKU,MAAO,SACxC,QACI,KAAMzD,EAAI4C,EAAEG,MAAM/C,EAAIA,EAAEK,OAAS,GAAKL,EAAEA,EAAEK,OAAS,KAAkB,IAAVkD,EAAG,IAAsB,IAAVA,EAAG,IAAW,CAAEX,EAAI,EAAG,SACjG,GAAc,IAAVW,EAAG,MAAcvD,GAAMuD,EAAG,GAAKvD,EAAE,IAAMuD,EAAG,GAAKvD,EAAE,IAAM,CAAE4C,EAAEC,MAAQU,EAAG,GAAI,MAC9E,GAAc,IAAVA,EAAG,IAAYX,EAAEC,MAAQ7C,EAAE,GAAI,CAAE4C,EAAEC,MAAQ7C,EAAE,GAAIA,EAAIuD,EAAI,MAC7D,GAAIvD,GAAK4C,EAAEC,MAAQ7C,EAAE,GAAI,CAAE4C,EAAEC,MAAQ7C,EAAE,GAAI4C,EAAEI,IAAIU,KAAKH,GAAK,MACvDvD,EAAE,IAAI4C,EAAEI,IAAIS,MAChBb,EAAEG,KAAKU,MAAO,SAEtBF,EAAKf,EAAKlC,KAAKiB,EAASqB,GAC1B,MAAOV,GAAKqB,EAAK,CAAC,EAAGrB,GAAIQ,EAAI,EAAI,QAAWD,EAAIzC,EAAI,EACtD,GAAY,EAARuD,EAAG,GAAQ,MAAMA,EAAG,GAAI,MAAO,CAAExB,MAAOwB,EAAG,GAAKA,EAAG,QAAK,EAAQlB,MAAM,GArB9BL,CAAK,CAAC7B,EAAGmD,MAkCtD,SAASK,EAASC,GACrB,IAAI3D,EAAsB,mBAAXmD,QAAyBA,OAAOC,SAAUQ,EAAI5D,GAAK2D,EAAE3D,GAAIC,EAAI,EAC5E,GAAI2D,EAAG,OAAOA,EAAEvD,KAAKsD,GACrB,GAAIA,GAAyB,iBAAbA,EAAEvD,OAAqB,MAAO,CAC1C4B,KAAM,WAEF,OADI2B,GAAK1D,GAAK0D,EAAEvD,SAAQuD,OAAI,GACrB,CAAE7B,MAAO6B,GAAKA,EAAE1D,KAAMmC,MAAOuB,KAG5C,MAAM,IAAIJ,UAAUvD,EAAI,0BAA4B,mCAGjD,SAAS6D,EAAOF,EAAGzD,GACtB,IAAI0D,EAAsB,mBAAXT,QAAyBQ,EAAER,OAAOC,UACjD,IAAKQ,EAAG,OAAOD,EACf,IAAmB9C,EAAYoB,EAA3BhC,EAAI2D,EAAEvD,KAAKsD,GAAOG,EAAK,GAC3B,IACI,WAAc,IAAN5D,GAAgBA,KAAM,MAAQW,EAAIZ,EAAE+B,QAAQI,MAAM0B,EAAGL,KAAK5C,EAAEiB,OAExE,MAAOiC,GAAS9B,EAAI,CAAE8B,MAAOA,GACjC,QACQ,IACQlD,IAAMA,EAAEuB,OAASwB,EAAI3D,EAAU,SAAI2D,EAAEvD,KAAKJ,GAE1D,QAAkB,GAAIgC,EAAG,MAAMA,EAAE8B,OAE7B,OAAOD,MCzICE,eCoBV,SAAAC,IATOxE,KAAAyE,eAAgB,EAGhBzE,KAAA0E,WAAY,EAGZ1E,KAAA2E,gBAAiC,IAAIC,EAAAA,QA2E9C,OAnESJ,EAAAtE,UAAA2E,YAAP,WACE7E,KAAK2E,gBAAgBpC,QAGbiC,EAAAtE,UAAA4E,mBAAV,SAA6BC,GAC3B,OAAKA,EAGED,mBAAmBC,GAFjBA,GAKDP,EAAAtE,UAAA8E,mBAAV,SAA6BD,GAC3B,OAAKA,EAGEC,mBAAmBD,GAFjBA,GAWDP,EAAAtE,UAAA+E,iBAAV,SACEC,EACAC,GAFF,IAAAC,EAAApF,KAIEkF,EAASG,KAAKC,EAAAA,UAAUtF,KAAK2E,kBAAkBY,WAAU,SAAM7C,GAAM,OAAAd,EAAAwD,OAAA,OAAA,GAAA,6DACnE,MAAA,CAAA,EAAMD,EAASzC,kBAAf8C,EAAApC,sBAUMoB,EAAAtE,UAAAuF,qBAAV,SACEP,EACAC,GAEAD,EAASG,KAAKC,EAAAA,UAAUtF,KAAK2E,kBAAkBY,WAAU,SAAA7C,GACvDyC,EAASzC,OASH8B,EAAAtE,UAAAwF,sBAAV,SACEC,EACAR,GAFF,IAAAC,EAAApF,KAIE2F,EAAQC,aACLP,KACCQ,EAAAA,aAAa,KACbC,EAAAA,wBAEDT,KAAKC,EAAAA,UAAUtF,KAAK2E,kBACpBY,WAAU,SAAM7C,GAAM,OAAAd,EAAAwD,OAAA,OAAA,GAAA,6DACrB,MAAA,CAAA,EAAMD,EAASzC,kBAAf8C,EAAApC,sBAhFKoB,EAAa1D,EAAA,CAJzBiF,EAAAA,UAAU,CACTC,SAAU,oBACVC,SAAU,gBAECzB,mBCEX,SAAA0B,EAAoBC,GAAAnG,KAAAmG,UAAAA,EAWtB,OAJSD,EAAAhG,UAAAkG,UAAP,SAAiBC,GAEf,OADsBrG,KAAKmG,UAAUG,wBAAwBD,6CARhCE,EAAAA,gBALpBL,EAAYpF,EAAA,CAHxB0F,EAAAA,KAAK,CACJC,KAAM,cAEKP,MCNAQ,EAAoC,IAAIC,EAAAA,eAEnD,uBCFWC,EAAmC,IAAID,EAAAA,eAElD,sBCFWE,EAAqC,IAAIF,EAAAA,eAEpD,qCCoBF,SAAAG,KAA4B,OAAfA,EAAahG,EAAA,CAnBzBiG,EAAAA,SAAS,CACRC,QAAS,CACPC,EAAAA,aACAC,EAAAA,aACAC,EAAAA,iBACAC,EAAAA,qBAEFC,QAAS,CACPD,EAAAA,oBACAH,EAAAA,aACAC,EAAAA,aACAC,EAAAA,iBACAC,EAAAA,wBAOSN,mBCFX,SAAAQ,EACSC,GAAAvH,KAAAuH,YAAAA,EAeX,OAXED,EAAApH,UAAAsH,SAAA,WACExH,KAAKyH,MAAQzH,KAAK0H,KAAKD,MACvBzH,KAAK2H,QAAU3H,KAAK0H,KAAKC,SAM3BL,EAAApH,UAAA0H,QAAA,WACE5H,KAAKuH,YAAYM,kDAbGC,EAAAA,kBALbhH,EAAA,CAARiH,EAAAA,oCAPUT,EAAoBxG,EAAA,CALhCiF,EAAAA,UAAU,CACTC,SAAU,kBACVC,SAAA,uRAGWqB,QCAX,SACSU,EACAN,EACAO,EACAC,GAHAlI,KAAAgI,OAAAA,EACAhI,KAAA0H,KAAAA,EACA1H,KAAAiI,MAAAA,EACAjI,KAAAkI,MAAAA,IRbC3D,EAAAA,EAAAA,eAAAA,EAAAA,aAAY,KAEtBA,EAAA,OAAA,GAAA,QAGAA,EAAAA,EAAA,GAAA,GAAA,KAGAA,EAAAA,EAAA,OAAA,GAAA,aSRU4D,ECAAC,ECAAC,eCYV,SAAAC,EACSf,GAAAvH,KAAAuH,YAAAA,EAgBX,OAZEe,EAAApI,UAAAsH,SAAA,aAGOc,EAAApI,UAAAqI,SAAP,WACE,IAAMC,EAAe,IAAIC,EAAalE,EAAAA,aAAamE,QACnD1I,KAAKuH,YAAYM,MAAMW,IAGlBF,EAAApI,UAAAyI,UAAP,WACE,IAAMH,EAAe,IAAIC,EAAalE,EAAAA,aAAaqE,IACnD5I,KAAKuH,YAAYM,MAAMW,6CAdHV,EAAAA,kBAFbhH,EAAA,CAARiH,EAAAA,0CADUO,EAAsBxH,EAAA,CALlCiF,EAAAA,UAAU,CACTC,SAAU,oBACVC,SAAA,6gBAGWqC,mBCiBb,SAAAO,WAwBA,SAxBaA,EACJA,EAAAC,QAAP,SACEC,EACAC,EACAC,GAEA,MAAO,CACLC,SAAUC,EACVC,UAAW,CACT,CACEC,QAAS3C,EACT4C,SAAUP,GAEZ,CACEM,QAASzC,EACT2C,SAAUP,GAEZ,CACEK,QAASxC,EACT0C,SAAUN,MAnBPJ,EAAgBM,EAAArI,EAAA,CAnB5BiG,EAAAA,SAAS,CACRC,QAAS,CAACF,GACV0C,aAAc,CACZtD,EACA1B,EACA8C,EACAgB,GAEFjB,QAAS,CACPnB,EACA1B,EACA8C,EACAgB,MAOSO,QCtBX,SAAmBpB,EAAsBE,GAAtB3H,KAAAyH,MAAAA,EAAsBzH,KAAA2H,QAAAA,gBCIzC,SAAA8B,EAAmBC,GAAA1J,KAAA0J,OAAAA,SAEND,EAAAvJ,UAAAyJ,kBAAb,SACElC,EACAE,qGAQ2C,OANrCiC,EAAoB,IAAIC,EAAkBpC,EAAOE,IACjDmC,EAAY9J,KAAK0J,OAAOK,KAAKzB,EAAwB,CACzD0B,SAAU,SACVC,UAAU,KAEFC,kBAAkBC,WAAaP,EACE,CAAA,EAAME,EAAUpH,eAC3D,MAAA,CAAA,EAD2C8C,EAAApC,yDAZlBgH,EAAAA,+HADhBX,EAAoB3I,EAAA,CAHhCuJ,EAAAA,WAAW,CACVC,WAAY,UAEDb,oBCKX,SAAAc,EAAYb,UACVc,EAAA5J,KAAAZ,KAAM0J,IAAO1J,YAL6BF,EAAAyK,EAAAC,GAa/BD,EAAArK,UAAAyJ,kBAAb,SACElC,EACAE,sEAGA,OADA8C,QAAQC,IAAI,sCACZ,CAAA,EAAOzI,QAAQC,QAAQ,IAAIuG,EAA2BlE,EAAAA,aAAaqE,sDAdjDwB,EAAAA,+HAJTG,EAAwBzJ,EAAA,CAHpCuJ,EAAAA,WAAW,CACVC,WAAY,UAEDC,IAAiCd,KCJ5C,SAAmBhC,EAAsBE,GAAtB3H,KAAAyH,MAAAA,EAAsBzH,KAAA2H,QAAAA,gBCOzC,SAAAgD,EAAmBjB,GAAA1J,KAAA0J,OAAAA,SAONiB,EAAAzK,UAAA0K,gBAAb,SACEnD,EACAE,4EAOA,OALMwC,EAAa,IAAIU,EAAgBpD,EAAOE,GAE5B3H,KAAK0J,OAAOK,KAAKzC,GACzB4C,kBAAkBxC,KAAOyC,EAEnC,CAAA,EAAO,IAAI1B,EAAalE,EAAAA,aAAaqE,qDAhBZwB,EAAAA,+HADhBO,EAAkB7J,EAAA,CAH9BuJ,EAAAA,WAAW,CACVC,WAAY,UAEDK,oBCHb,SAAAG,0DAA4ChL,EAAAgL,EAAAN,GAM7BM,EAAA5K,UAAA0K,gBAAb,SACEnD,EACAE,sEAKA,OAHA8C,QAAQC,IAAI,oCACZD,QAAQC,IAAI,UAAYjD,GACxBgD,QAAQC,IAAI,UAAY/C,GACxB,CAAA,EAAO1F,QAAQC,QAAQ,IAAIuG,EAAmBlE,EAAAA,aAAaqE,gIAblDkC,EAAsBhK,EAAA,CAHlCuJ,EAAAA,WAAW,CACVC,WAAY,UAEDQ,IAA+BH,IVRhCxC,EAAAA,EAAAA,SAAAA,EAAAA,OAAM,KAEhBA,EAAA,KAAA,GAAA,OAGAA,EAAAA,EAAA,MAAA,GAAA,QAGAA,EAAAA,EAAA,IAAA,GAAA,OCRUC,EAAAA,EAAAA,SAAAA,EAAAA,OAAM,KAEhBA,EAAA,GAAA,KAAA,KAGAA,EAAAA,EAAA,QAAA,KAAA,UAGAA,EAAAA,EAAA,OAAA,KAAA,SAGAA,EAAAA,EAAA,WAAA,KAAA,aAGAA,EAAAA,EAAA,WAAA,KAAA,aAGAA,EAAAA,EAAA,cAAA,KAAA,gBAGAA,EAAAA,EAAA,UAAA,KAAA,YAGAA,EAAAA,EAAA,MAAA,KAAA,SCvBUC,EAAAA,EAAAA,eAAAA,EAAAA,aAAY,KAEtBA,EAAA,KAAA,GAAA,OAGAA,EAAAA,EAAA,MAAA,GAAA,YSLU0C,ECFAC,ECEAC,ECAAC,ECAAC,eCQV,SAAAC,EAAYC,EAAyBC,QAAzB,IAAAD,IAAAA,EAAA,QAAyB,IAAAC,IAAAA,EAAA,IAR9BtL,KAAAuL,MAAQ,GACRvL,KAAAwL,OAAS,GACTxL,KAAAyL,KAAO,EACPzL,KAAA0L,KAAO,GACP1L,KAAA2L,KAAO,GACP3L,KAAA4L,WAAa,GACb5L,KAAA6L,eAAgB,EAGrB7L,KAAK0L,KAAOJ,EACZtL,KAAKyL,MAAQJ,EAAc,GAAKC,EAiBpC,OAdgBF,EAAAU,mBAAd,SAAiCC,EAAkBT,GAEjD,OADkBU,KAAKC,OAAOF,EAAW,GAAKT,GAAY,GAIrDF,EAAAlL,UAAAgM,QAAP,SAAeC,EAAeC,QAAA,IAAAA,IAAAA,GAAA,GAC5BpM,KAAK4L,WAAaO,EAClBnM,KAAK6L,cAAgBO,EAEnBpM,KAAK2L,MADW,IAAdS,EACUD,EAAQ,OAERA,EAAQ,SAG1Bf,OC5BA,WAISpL,KAAAqM,MAAkB,MCN3B,eCIE,SAESC,EAEAC,GAFAvM,KAAAsM,MAAAA,EAEAtM,KAAAuM,SAAAA,KCcT,SAAYC,GACNA,IAAiBnE,EAAAA,aAAaoE,OAChCzM,KAAKwM,cAAe,MCrBxB,SACSL,EACAhJ,EACAuJ,EACAC,EACAC,GAJA5M,KAAAmM,MAAAA,EACAnM,KAAAmD,MAAAA,EACAnD,KAAA0M,MAAAA,EACA1M,KAAA2M,SAAAA,EACA3M,KAAA4M,mBAAAA,MCPT,SACST,EACAhJ,EACAwJ,GAFA3M,KAAAmM,MAAAA,EACAnM,KAAAmD,MAAAA,EACAnD,KAAA2M,SAAAA,MCKT,WACE3M,KAAK0M,MAAQ,GACb1M,KAAKqC,MAAQ,GACbrC,KAAKmD,MAAQ,GACbnD,KAAKuL,MAAQ,GACbvL,KAAKmM,MAAQ,GACbnM,KAAK6M,eAAgB,EACrB7M,KAAK2M,UAAW,iBCbpB,SAAAG,IACE9M,KAAA+M,OAA6B,GAC7B/M,KAAAgN,aAAwC,GAa1C,OATSF,EAAA5M,UAAA+M,cAAP,SAAqB1B,WACb2B,EAAe3B,EAAM4B,QAAQ,WAAY,IAAIC,WACnD,IAAyB,IAAAC,EAAApJ,EAAAjE,KAAKgN,cAAYM,EAAAD,EAAA9K,QAAA+K,EAAA3K,KAAA2K,EAAAD,EAAA9K,OAAE,CAAvC,IAAMgL,EAAUD,EAAAjL,MACnB,GAAIkL,EAAWhC,QAAU2B,EACvB,OAAOK,oGAGX,OAAO,MAEXT,QCjBE,SACSX,EACAhJ,EACAqK,EACAC,EACAlC,EACAlJ,GALArC,KAAAmM,MAAAA,EACAnM,KAAAmD,MAAAA,EACAnD,KAAAwN,UAAAA,EACAxN,KAAAyN,QAAAA,EACAzN,KAAAuL,MAAAA,EACAvL,KAAAqC,MAAAA,MCGT,WACErC,KAAK0M,MAAQ,GACb1M,KAAKwN,UAAY,GACjBxN,KAAKyN,QAAU,GACfzN,KAAKmD,MAAQ,GACbnD,KAAKuL,MAAQ,GACbvL,KAAKmM,MAAQ,GACbnM,KAAKqC,MAAQ,GACbrC,KAAK6M,eAAgB,MCdvB,SACSV,EACAqB,EACAC,EACAC,EACAvK,EACAd,EACAqK,GANA1M,KAAAmM,MAAAA,EACAnM,KAAAwN,UAAAA,EACAxN,KAAAyN,QAAAA,EACAzN,KAAA0N,WAAAA,EACA1N,KAAAmD,MAAAA,EACAnD,KAAAqC,MAAAA,EACArC,KAAA0M,MAAAA,EAEP1M,KAAKuL,MAAQY,EAAQ,KAAOqB,EAAY,OAASC,EAAU,QCb/D,gBCAA,2BCMA,SAAAE,IAMS3N,KAAA4N,aAAoC,GACpC5N,KAAA6N,kBAA8C,GAC9C7N,KAAA8N,aAAoC,GA+C7C,OA7CSH,EAAAzN,UAAA6N,gBAAP,uBACQC,EAAoC,OAC1C,IAA0B,IAAAV,EAAArJ,EAAAjE,KAAK4N,cAAYK,EAAAX,EAAA/K,QAAA0L,EAAAtL,KAAAsL,EAAAX,EAAA/K,OAAE,CAAxC,IAAM2L,EAAWD,EAAA5L,MACd8L,EAAc,IAAIC,GACpBF,EAAYrB,cACdsB,EAAYhC,MACV,SAAW+B,EAAYxB,MAAQ,IAAMwB,EAAY/B,MAEnDgC,EAAYhC,MAAQ+B,EAAY/B,OAEL,IAAzB+B,EAAYvB,SACdwB,EAAY9L,MAAQ,IAAMrC,KAAKqO,UAAUH,EAAY7L,OAAS,IAE9D8L,EAAY9L,MAAQrC,KAAKqO,UAAUH,EAAY7L,OAEjD2L,EAAahK,KAAKmK,yGAEpB,IAA0B,IAAAG,EAAArK,EAAAjE,KAAK8N,cAAYS,EAAAD,EAAA/L,QAAAgM,EAAA5L,KAAA4L,EAAAD,EAAA/L,OAAE,CAAxC,IAAMiM,EAAWD,EAAAlM,MACpB2L,EAAahK,KAAKwK,qGAEpB,OAAOR,GAGFL,EAAAzN,UAAAuO,gBAAP,mBACQT,EAAoC,OAC1C,IAA0B,IAAAX,EAAApJ,EAAAjE,KAAK6N,mBAAiBP,EAAAD,EAAA9K,QAAA+K,EAAA3K,KAAA2K,EAAAD,EAAA9K,OAAE,CAA7C,IAAM2L,EAAWZ,EAAAjL,MACdqM,EAAc,IAAIC,GACpBT,EAAYrB,cACd6B,EAAYvC,MACV,SAAW+B,EAAYxB,MAAQ,IAAMwB,EAAY/B,MAEnDuC,EAAYvC,MAAQ+B,EAAY/B,MAElCuC,EAAYnD,MAAQ2C,EAAY3C,MAChCmD,EAAYE,MAAQ5O,KAAKqO,UAAUH,EAAYV,WAC/CkB,EAAYG,IAAM7O,KAAKqO,UAAUH,EAAYT,SAC7CO,EAAahK,KAAK0K,qGAEpB,OAAOV,GAGDL,EAAAzN,UAAAmO,UAAR,SAAkBS,GAEhB,OADoBhK,mBAAmBgK,IAG3CnB,mBClDE,SAAAoB,IACE/O,KAAKmD,MAAQ,GACbnD,KAAKgP,MAAQ,EACbhP,KAAKuL,MAAQ,GACbvL,KAAKiP,QAAS,EAyFlB,OAtFSF,EAAA7O,UAAAgP,YAAP,SACEC,EACAvB,EACAZ,eAEIoC,EAAc,GAClBA,EAAcpP,KAAKqP,kBAAkBD,EAAa,MAElD,IAAIE,EAAyC,KACzCC,GAAa,MAEjB,IAA0B,IAAAC,EAAAvL,EAAA2J,GAAY6B,EAAAD,EAAAjN,QAAAkN,EAAA9M,KAAA8M,EAAAD,EAAAjN,OAAE,CAAnC,IAAM2L,EAAWuB,EAAApN,MAElB6L,EAAYxB,QAAU1M,KAAK0M,OAC3BwB,EAAY7L,QAAUrC,KAAKqC,MAMlB6L,EAAYxB,QAAU1M,KAAK0M,QAItC0C,GACElB,EAAYxB,MAAQ,IAAM1M,KAAK0P,UAAUxB,EAAY7L,OAAS,MAT9DiN,EAAepB,EACfqB,GAAa,EACbvP,KAAKiP,QAAS,qGAUlB,IAAIU,EAAkD,SACtD,IAAyB,IAAAC,EAAA3L,EAAA+I,GAAY6C,EAAAD,EAAArN,QAAAsN,EAAAlN,KAAAkN,EAAAD,EAAArN,OAAE,CAAlC,IAAMgL,EAAUsC,EAAAxN,MACfkL,EAAWb,QAAU1M,KAAK0M,OAASa,EAAWlL,QAAUrC,KAAKqC,MAKtDkL,EAAWb,QAAU1M,KAAK0M,QAIrC0C,GACE7B,EAAWb,MAAQ,IAAM1M,KAAK0P,UAAUnC,EAAWlL,OAAS,MAT5DsN,EAAmBpC,EACnBgC,GAAa,EACbvP,KAAKiP,QAAS,sGAUC,IAAfM,IACFH,GAAepP,KAAK0M,MAAQ,IAAM1M,KAAK0P,UAAU1P,KAAKqC,QAGpD+M,EAAYU,SAAS,OACvBV,EAAcA,EAAYW,OAAO,EAAGX,EAAYzO,OAAS,IAGvC,OAAhByO,IACFA,EAAc,IAGZE,IACFA,EAAa/D,MAAQ6D,EACrBpP,KAAKiP,QAAS,GAGZU,IACFA,EAAiBpE,MAAQ6D,EACzBpP,KAAKiP,QAAS,GAGhBjP,KAAKuL,MAAQ6D,GAGPL,EAAA7O,UAAAmP,kBAAR,SAA0BD,EAAqBY,GAC7C,IAAIC,EAUJ,OALEA,EAHGb,EAGmBA,EAAc,IAFd,GAKxBa,GAAuBD,GAKjBjB,EAAA7O,UAAAwP,UAAR,SAAkBZ,GAEhB,OADoB9J,mBAAmB8J,IAG3CC,mBCjGE,SAAAmB,EAAmB/D,EAAsBhJ,GAAtBnD,KAAAmM,MAAAA,EAAsBnM,KAAAmD,MAAAA,EACvCnD,KAAKmQ,MAAQ,GAYjB,OATSD,EAAAhQ,UAAAgP,YAAP,SACEC,EACAvB,EACAZ,eAEA,IAAmB,IAAAK,EAAApJ,EAAAjE,KAAKmQ,OAAK7C,EAAAD,EAAA9K,QAAA+K,EAAA3K,KAAA2K,EAAAD,EAAA9K,OAAE,CAAhB+K,EAAAjL,MACR6M,YAAYC,EAAGvB,EAAcZ,uGAGxCkD,QCdE,SAAYE,GACVpQ,KAAKqQ,MAAQD,EAAYE,eAAeC,MACxCvQ,KAAKwQ,YAAcJ,EAAYK,SAASC,KAAK/P,OAC7CX,KAAK2Q,SAAWP,EAAYK,SAASE,SACrC3Q,KAAK4O,MAAQwB,EAAYK,SAAS7B,UCGpC,SAAYwB,EAAkBQ,GAC5B5Q,KAAKmP,EAAIyB,EAAQzB,EACjBnP,KAAK6Q,aAAeD,EAAQC,aAC5B7Q,KAAK4N,aAAegD,EAAQhD,aAC5B5N,KAAK6N,kBAAoB+C,EAAQ/C,kBAEjC7N,KAAK4O,MAAQwB,EAAYE,eAAeQ,OAAOlC,MAC/C5O,KAAK+Q,KAAOX,EAAYE,eAAeQ,OAAOC,oBCmBhD,SAAAC,EAAmBC,QAAA,IAAAA,IAAAA,EAAe7I,EAAAA,OAAOQ,IAAtB5I,KAAAiR,KAAAA,EA+BrB,OA/DEzR,OAAAgC,eAAWwP,EAAA9Q,UAAA,OAAI,KAAf,WACE,OAAQF,KAAKiR,MACX,KAAK7I,EAAAA,OAAOQ,GACV,MAAO,KACT,KAAKR,EAAAA,OAAO8I,QACV,MAAO,UACT,KAAK9I,EAAAA,OAAO+I,OACV,MAAO,UACT,KAAK/I,EAAAA,OAAOgJ,WACV,MAAO,cACT,KAAKhJ,EAAAA,OAAOiJ,WACV,MAAO,cACT,KAAKjJ,EAAAA,OAAOkJ,cACV,MAAO,gBACT,KAAKlJ,EAAAA,OAAOmJ,UAEV,MAAO,eACT,KAAKnJ,EAAAA,OAAOoJ,MACV,MAAO,QACT,QACE,MAAO,4CAiBNR,EAAA9Q,UAAAuR,QAAP,WACE,OACEzR,KAAKiR,OAAS7I,EAAAA,OAAOQ,IACrB5I,KAAKiR,OAAS7I,EAAAA,OAAO+I,QACrBnR,KAAKiR,OAAS7I,EAAAA,OAAO8I,SACrBlR,KAAKiR,OAAS7I,EAAAA,OAAOgJ,YAUlBJ,EAAA9Q,UAAAwR,WAAP,WACE,OACE1R,KAAKiR,OAAS7I,EAAAA,OAAOQ,IACrB5I,KAAKiR,OAAS7I,EAAAA,OAAO+I,QACrBnR,KAAKiR,OAAS7I,EAAAA,OAAO8I,SACrBlR,KAAKiR,OAAS7I,EAAAA,OAAOgJ,YAM3BJ,mBCzDE,SAAAW,EAAYV,QAAA,IAAAA,IAAAA,EAAe7I,EAAAA,OAAOQ,IAChC5I,KAAK4R,OAAS,IAAIZ,GAAmBC,GAwCzC,OA/BSU,EAAAF,QAAP,SAAeR,EAAcY,GAC3B,QAAIA,GAAkBA,EAAeC,WAAU,SAAA3Q,GAAK,OAAAA,IAAM8P,MAAS,KAIjEA,IAAS7I,EAAAA,OAAOQ,IAChBqI,IAAS7I,EAAAA,OAAO+I,QAChBF,IAAS7I,EAAAA,OAAO8I,SAChBD,IAAS7I,EAAAA,OAAOgJ,aAYbO,EAAAD,WAAP,SAAkBT,GAChB,OACEA,IAAS7I,EAAAA,OAAOQ,IAChBqI,IAAS7I,EAAAA,OAAO+I,QAChBF,IAAS7I,EAAAA,OAAO8I,SAChBD,IAAS7I,EAAAA,OAAOgJ,YAMtBO,oBC3CE,SAAAI,EAAYd,EAAqBvJ,GAAjC,IAAAtC,EACEoF,EAAA5J,KAAAZ,KAAMiR,IAAKjR,YADoBoF,EAAAsC,KAAAA,IAGnC,OARiC5H,EAAAiS,EAAAvH,GAQjCuH,GARiCJ,mBCK/B,SAAAK,EAAYf,EAAqBvJ,GAAjC,IAAAtC,EACEoF,EAAA5J,KAAAZ,KAAMiR,IAAKjR,YADoBoF,EAAAsC,KAAAA,IAGnC,OARgC5H,EAAAkS,EAAAxH,GAQhCwH,GARgCL,OCK9B,SAAYM,GALLjS,KAAA0H,KAAY,GACZ1H,KAAAkS,OAA8B,GAKnClS,KAAK0H,KAAOuK,EAAiBvK,KAC7B1H,KAAKkS,OAASD,EAAiBC,OAC/BlS,KAAKmS,QAAUF,EAAiBE,QAChCnS,KAAKoS,KAAOH,EAAiBG,qBCL/B,SAAAC,EAAYpB,EAAqBvJ,GAAjC,IAAAtC,EACEoF,EAAA5J,KAAAZ,KAAMiR,IAAKjR,YADoBoF,EAAAsC,KAAAA,EAH1BtC,EAAA8M,OAA8B,KAMvC,OAPyCpS,EAAAuS,EAAA7H,GAOzC6H,GAPyCV,mBCQvC,SAAAW,EACSC,EACA5K,EACAiK,EACAY,EACAC,EACAC,GANT,IAAAtN,EAQEoF,EAAA5J,KAAAZ,OAAOA,YAPAoF,EAAAmN,YAAAA,EACAnN,EAAAuC,QAAAA,EACAvC,EAAAwM,OAAAA,EACAxM,EAAAoN,WAAAA,EACApN,EAAAqN,IAAAA,EACArN,EAAAsN,WAAAA,IAIX,OAnBuC5S,EAAAwS,EAAA9H,GAmBvC8H,GAnBuCK,MCCrC,SAAYC,EAAcjL,EAAwBkL,QAAxB,IAAAlL,IAAAA,EAAA,MACxB3H,KAAK4S,KAAOA,EACZ5S,KAAK2H,QAAUA,EACf3H,KAAK6S,WAAaA,MCSpB,SACSC,EACAC,EACAzG,EACAC,EACAF,EACPG,GALOxM,KAAA8S,UAAAA,EACA9S,KAAA+S,SAAAA,EACA/S,KAAAsM,MAAAA,EACAtM,KAAAuM,SAAAA,EACAvM,KAAAqM,MAAAA,EAGHG,IAAiBnE,EAAAA,aAAaoE,OAChCzM,KAAKwM,cAAe,OCpBxB,SAAmBF,GAAAtM,KAAAsM,MAAAA,kBCFrB,SAAA0G,IAAA,IAAA5N,EAAA,OAAAoF,GAAAA,EAAA3J,MAAAb,KAAAU,YAAAV,YA+BSoF,EAAAiH,MAAkB,KAC3B,OAhC8BvM,EAAAkT,EAAAxI,GAQ5BhL,OAAAgC,eAAWwR,EAAA9S,UAAA,WAAQ,KAAnB,WACE,OAAOF,KAAK8S,UAAY,IAAM9S,KAAK+S,0CAuBvCC,GAhC8BL,MCF9B,gBCAA,gBCME,SAAmBlM,EAAqBpE,GAArBrC,KAAAyG,KAAAA,EAAqBzG,KAAAqC,MAAAA,iBCJ1C,SAAA4Q,IAOUjT,KAAAkT,YAA2B,GAyBrC,OA9BE1T,OAAAgC,eAAWyR,EAAA/S,UAAA,gBAAa,KAAxB,WACE,OAAOF,KAAKkT,YAAYvS,OAAS,mCAW5BsS,EAAA/S,UAAAiT,IAAP,SAAW1M,EAAcpE,GACvBrC,KAAKkT,YAAYlP,KAAK,IAAIoP,GAAU3M,EAAMpE,KAOrC4Q,EAAA/S,UAAAmT,kBAAP,mBACMC,EAAkB,QACtB,IAAwB,IAAAjG,EAAApJ,EAAAjE,KAAKkT,aAAW5F,EAAAD,EAAA9K,QAAA+K,EAAA3K,KAAA2K,EAAAD,EAAA9K,OAAE,CAArC,IAAMgR,EAASjG,EAAAjL,MACM,MAApBiR,IACFA,GAAmB,KAErBA,GAAmBC,EAAU9M,KAAO,IAAM8M,EAAUlR,wGAEtD,OAAOiR,GAEXL,QCLE,WALOjT,KAAAwT,iBAA6B,GAMlCxT,KAAKyT,WAAa,IAAIR,kBC9B1B,SAAAS,KA6DA,OAvDgBA,EAAAC,KAAd,eAAmB,IAAAC,EAAA,GAAAC,EAAA,EAAAA,EAAAnT,UAAAC,OAAAkT,IAAAD,EAAAC,GAAAnT,UAAAmT,GACjB,IAAMC,EAAc,GAGpB,GAAIF,EAAY,GAAGG,MAAM,iBAAmBH,EAAYjT,OAAS,EAAG,CAClE,IAAMqT,EAAQJ,EAAYK,QAC1BL,EAAY,GAAKI,EAAQJ,EAAY,GAInCA,EAAY,GAAGG,MAAM,gBACvBH,EAAY,GAAKA,EAAY,GAAGzG,QAAQ,gBAAiB,UAEzDyG,EAAY,GAAKA,EAAY,GAAGzG,QAAQ,gBAAiB,SAG3D,IAAK,IAAI3M,EAAI,EAAGA,EAAIoT,EAAYjT,OAAQH,IAAK,CAC3C,IAAI0T,EAAYN,EAAYpT,GAE5B,GAAyB,iBAAd0T,EACT,MAAM,IAAIpQ,UAAU,kCAAoCoQ,GAGxC,KAAdA,IAIA1T,EAAI,IAEN0T,EAAYA,EAAU/G,QAAQ,SAAU,KAIxC+G,EAFE1T,EAAIoT,EAAYjT,OAAS,EAEfuT,EAAU/G,QAAQ,SAAU,IAG5B+G,EAAU/G,QAAQ,SAAU,KAG1C2G,EAAY9P,KAAKkQ,IAGnB,IAAIC,EAAeL,EAAYH,KAAK,KAO9BS,GAHND,EAAeA,EAAahH,QAAQ,kBAAmB,OAG5BkH,MAAM,KAIjC,OAHAF,EACEC,EAAMH,SAAWG,EAAMzT,OAAS,EAAI,IAAM,IAAMyT,EAAMT,KAAK,MAIjED,mBCqDE,SAAAY,EAEYC,EAEAvL,EACAwL,EACAC,GAJAzU,KAAAuU,OAAAA,EAEAvU,KAAAgJ,mBAAAA,EACAhJ,KAAAwU,OAAAA,EACAxU,KAAAyU,WAAAA,SAzFZjV,OAAAgC,eAAc8S,EAAApU,UAAA,eAAY,KAW1B,WACE,OAAOF,KAAK0U,mBAZd,SAA2BC,GACzB3U,KAAK0U,cAAgBC,GACsB,IAAvC3U,KAAK0U,cAAcE,WAAW,OAChC5U,KAAK0U,cAAgB,IAAM1U,KAAK0U,gBAEO,IAArC1U,KAAK0U,cAAc5E,SAAS,OAC9B9P,KAAK0U,cAAgB1U,KAAK0U,cAAgB,sCAa9ClV,OAAAgC,eAAc8S,EAAApU,UAAA,OAAI,KAAlB,SAAmB0S,GACjB5S,KAAK6U,MAAQjC,mCAOfpT,OAAAgC,eAAc8S,EAAApU,UAAA,UAAO,KAArB,WACE,OAAIF,KAAKuU,OAAOO,QACP9U,KAAKuU,OAAOQ,UAAY,IAAM/U,KAAKuU,OAAOO,QAE5C9U,KAAKuU,OAAOQ,2CAIrBvV,OAAAgC,eAAc8S,EAAApU,UAAA,SAAM,KAApB,WACE,OAAOF,KAAKuU,OAAOS,wCAIrBxV,OAAAgC,eAAc8S,EAAApU,UAAA,gBAAa,KAA3B,WACE,OAAO,IAAI+U,EAAAA,YAAY,CACrBC,eAAgB,mBAChBC,gBAAiB,WACjBC,OAAQ,WACRC,QAAS,mEAKb7V,OAAAgC,eAAc8S,EAAApU,UAAA,YAAS,KAAvB,WACE,IAAMwM,EAAQ1M,KAAKgV,OAAS,UAAYhV,KAAKgV,OAAS,GAQtD,OAPkB,IAAIC,EAAAA,YAAY,CAChCK,cAAe5I,EACfwI,eAAgB,mBAChBC,gBAAiB,WACjBC,OAAQ,WACRC,QAAS,mEAMb7V,OAAAgC,eAAc8S,EAAApU,UAAA,aAAU,KAAxB,WACE,IAAMqV,EAAoBC,aAAaC,QAAQzV,KAAKuU,OAAOmB,cACrDhJ,EAAQ6I,EAAoB,UAAYA,EAAoB,GAQlE,OAPmB,IAAIN,EAAAA,YAAY,CACjCK,cAAe5I,EACfwI,eAAgB,mBAChBC,gBAAiB,WACjBC,OAAQ,WACRC,QAAS,mEAgCGf,EAAApU,UAAAyV,QAAhB,SAAwBC,EAAYC,qGAE/B,MAAA,CAAA,EAAM7V,KAAK8V,WAAWF,EAAI,gDAD7B,OAEE,IADCpQ,EAAApC,OAGD,CAAA,GAAO,IAEH2S,EAAU/V,KAAKgW,UAAUH,GAChB,CAAA,EAAM7V,KAAKyU,WACvBwB,OAAYvC,GAAQC,KAAK3T,KAAK8U,QAAS9U,KAAK0U,cAAekB,GAAK,CAC/DG,QAAOA,IAERG,4BAJGxT,EAAS8C,EAAApC,OAMXuO,GAAIF,QAAQ/O,EAAOkP,OAAOX,MAC5B,CAAA,EAAMjR,KAAKgJ,mBAAmB4B,gBAC5BlI,EAAOkP,OAAO9C,KACdpM,EAAOkP,OAAOjK,UAHd,CAAA,EAAA,UAKF,OAJAnC,EAAApC,OAIA,CAAA,GAAO,UAGT,MAAA,CAAA,GAAO,WASOkR,EAAApU,UAAAiW,mBAAhB,SAAmCvF,uGAclB,OAXb6B,EADE7B,EAAQ6B,IACJ7B,EAAQ6B,IAERiB,GAAQC,KAAK3T,KAAK8U,QAAS9U,KAAK0U,cAAe9D,EAAQ6B,KAE3D7B,EAAQgF,KACVnD,EAAMiB,GAAQC,KAAKlB,EAAK7B,EAAQgF,KAE9BhF,EAAQ6C,WAAW2C,gBACrB3D,EAAMiB,GAAQC,KAAKlB,EAAK7B,EAAQ6C,WAAWJ,sBAEvC0C,EAAU/V,KAAKgW,UAAUpF,EAAQiF,QACxB,CAAA,EAAM7V,KAAKyU,WACvBwB,OAAYxD,EAAK,CAChBsD,QAAOA,IAERG,2BAJGxT,EAAS8C,EAAApC,OAMXuO,GAAIF,QAAQ/O,EAAOkP,OAAOX,KAAML,EAAQ4C,kBAC1C,CAAA,EAAMxT,KAAKgJ,mBAAmB4B,gBAC5BlI,EAAOkP,OAAO9C,KACdpM,EAAOkP,OAAOjK,UAHd,CAAA,EAAA,UAKF,OAJAnC,EAAApC,OAIA,CAAA,GAAO,UAGT,MAAA,CAAA,GAAO,WAQIkR,EAAApU,UAAAmW,qBAAb,kHAQS,OAPDzF,EAAU,IAAI0F,IACZ7D,IAAMiB,GAAQC,KACpB3T,KAAK8U,QACL9U,KAAK2U,aACL,uBAEF/D,EAAQiF,OAAS1N,EAAAA,OAAOsE,KACjB,CAAA,EAAMzM,KAAKmW,mBAAmBvF,GAAS2F,OAAM,SAAMC,GAAG,OAAA5U,EAAAwD,OAAA,OAAA,GAAA,6DACpD,MAAA,CAAA,EAAMpF,KAAKyW,mBAChB,kBACA,uBACAD,WAHF,MAAA,CAAA,EAAOhR,EAAApC,0BADT,MAAA,CAAA,EAAOoC,EAAApC,gBAgBOkR,EAAApU,UAAAwW,KAAhB,SAAwBd,EAAYC,qGAMnB,OAJf7V,KAAK8V,WAAWF,EAAI,uCAEdG,EAAU/V,KAAKgW,UAAUH,GAEhB,CAAA,EAAM7V,KAAKyU,WACvBkC,IAAgBjD,GAAQC,KAAK3T,KAAK8U,QAAS9U,KAAK0U,cAAekB,GAAK,CACnEG,QAAOA,IAGRG,oBAGH,OARMxT,EAAS8C,EAAApC,OAQXuO,GAAIF,QAAQ/O,EAAOkP,OAAOX,OAE5BjR,KAAKgJ,mBAAmB4B,gBACtBlI,EAAOkP,OAAO9C,KACdpM,EAAOkP,OAAOjK,SAGhB,CAAA,EAAO,QAIEjF,EAAOgF,KAChB,CAAA,EAAOhF,EAAOgF,eAWR4M,EAAApU,UAAA0W,eAAV,SAA4BhB,EAAYC,GAEtC7V,KAAK8V,WAAWF,EAAI,uCAEpB,IAAMG,EAAU/V,KAAKgW,UAAUH,GAE/B,OAAO7V,KAAKyU,WACTkC,IAAgBjD,GAAQC,KAAK3T,KAAK8U,QAAS9U,KAAK0U,cAAekB,GAAK,CACnEG,QAAOA,IAER1Q,KACCwR,EAAAA,KAAI,SAAAnU,GACF,OAAOA,EAAOgF,UAYZ4M,EAAApU,UAAA4W,0BAAV,SAAuClG,GACrC,IAAI6B,EAEFA,EADE7B,EAAQ6B,IACJ7B,EAAQ6B,IAERiB,GAAQC,KAAK3T,KAAK8U,QAAS9U,KAAK0U,cAAe9D,EAAQ6B,KAE3D7B,EAAQgF,KACVnD,EAAMiB,GAAQC,KAAKlB,EAAK7B,EAAQgF,KAE9BhF,EAAQ6C,WAAW2C,gBACrB3D,EAAMiB,GAAQC,KAAKlB,EAAK7B,EAAQ6C,WAAWJ,sBAE7C,IAAM0C,EAAU/V,KAAKgW,UAAUpF,EAAQiF,QACvC,OAAO7V,KAAKyU,WACTkC,IAAgBlE,EAAK,CACpBsD,QAAOA,IAER1Q,KACCwR,EAAAA,KAAI,SAAAnU,GACF,OAAOA,EAAOgF,UAWN4M,EAAApU,UAAA6W,gBAAhB,SAAmCnG,uGAelB,OAZb6B,EADE7B,EAAQ6B,IACJ7B,EAAQ6B,IAERiB,GAAQC,KAAK3T,KAAK8U,QAAS9U,KAAK0U,cAAe9D,EAAQ6B,KAE3D7B,EAAQgF,KACVnD,EAAMiB,GAAQC,KAAKlB,EAAK7B,EAAQgF,KAE9BhF,EAAQ6C,WAAW2C,gBACrB3D,EAAMiB,GAAQC,KAAKlB,EAAK7B,EAAQ6C,WAAWJ,qBAC3C5I,QAAQC,IAAI,qBAAuB+H,IAE/BsD,EAAU/V,KAAKgW,UAAUpF,EAAQiF,QACxB,CAAA,EAAM7V,KAAKyU,WACvBkC,IAAgBlE,EAAK,CACpBsD,QAAOA,IAERG,2BAJGxT,EAAS8C,EAAApC,OAMXuO,GAAIF,QAAQ/O,EAAOkP,OAAOX,KAAML,EAAQ4C,kBAC1C,CAAA,EAAMxT,KAAKgJ,mBAAmB4B,gBAC5BlI,EAAOkP,OAAO9C,KACdpM,EAAOkP,OAAOjK,UAHd,CAAA,EAAA,UAKF,OAJAnC,EAAApC,OAIA,CAAA,EAAO,aAGT,OAAoB,OAAhBV,EAAOgF,WAAiCsP,IAAhBtU,EAAOgF,KACjC,CAAA,EAAO,OAGEhF,EAAOgF,KAChB,CAAA,EAAOhF,EAAOgF,eAmBF4M,EAAApU,UAAA+W,SAAhB,SAA4BpB,qGAEX,OADTE,EAAU/V,KAAKgW,UAAUH,GAChB,CAAA,EAAM7V,KAAKyU,WACvBkC,IAAiBjD,GAAQC,KAAK3T,KAAK8U,QAAS9U,KAAK0U,eAAgB,CAChEqB,QAAOA,IAERG,2BAJGxT,EAAS8C,EAAApC,OAMXuO,GAAIF,QAAQ/O,EAAOkP,OAAOX,MAC5B,CAAA,EAAMjR,KAAKgJ,mBAAmB4B,gBAC5BlI,EAAOkP,OAAO9C,KACdpM,EAAOkP,OAAOjK,UAHd,CAAA,EAAA,UAKF,OAJAnC,EAAApC,OAIA,CAAA,EAAO,aAGT,MAAA,CAAA,EAAOV,EAAOgF,cASA4M,EAAApU,UAAAgX,oBAAhB,SAAuCtG,uGActB,OAXb6B,EADE7B,EAAQ6B,IACJ7B,EAAQ6B,IAERiB,GAAQC,KAAK3T,KAAK8U,QAAS9U,KAAK0U,cAAe9D,EAAQ6B,KAE3D7B,EAAQgF,KACVnD,EAAMiB,GAAQC,KAAKlB,EAAK7B,EAAQgF,KAE9BhF,EAAQ6C,WAAW2C,gBACrB3D,EAAMiB,GAAQC,KAAKlB,EAAK7B,EAAQ6C,WAAWJ,sBAEvC0C,EAAU/V,KAAKgW,UAAUpF,EAAQiF,QACxB,CAAA,EAAM7V,KAAKyU,WACvBkC,IAAiBlE,EAAK,CAAEsD,QAAOA,IAC/BG,2BAFGxT,EAAS8C,EAAApC,OAIXuO,GAAIF,QAAQ/O,EAAOkP,OAAOX,KAAML,EAAQ4C,kBAC1C,CAAA,EAAMxT,KAAKgJ,mBAAmB4B,gBAC5BlI,EAAOkP,OAAO9C,KACdpM,EAAOkP,OAAOjK,UAHd,CAAA,EAAA,UAKF,OAJAnC,EAAApC,OAIA,CAAA,EAAO,aAGT,MAAA,CAAA,EAAOV,EAAOgF,cAWA4M,EAAApU,UAAAiX,MAAhB,SACEC,EACAvB,EACAC,eAAA,IAAAA,IAAAA,GAAA,kGAEA,GAAIA,IAEC9V,KAAKqX,gBACJD,EACA,6CAGF,MAAA,CAAA,EAAO,MAGLrB,EAAU/V,KAAKgW,UAAUH,GACzBpD,EAAMiB,GAAQC,KAAK3T,KAAK8U,QAAS9U,KAAK0U,gCAIjC,6BAAA,CAAA,EAAM1U,KAAKyU,WACjB6C,KACC5D,GAAQC,KAAK3T,KAAK8U,QAAS9U,KAAK0U,eAChC0C,EACA,CACErB,QAAOA,IAGVG,2BARHxT,EAAS8C,EAAApC,oBAcT,iBAJAqH,QAAQC,IAAI,cACZD,QAAQC,IAAI,mBACZD,QAAQC,IAAI,QAAU+H,GACtBhI,QAAQC,IAAI0M,GACNG,gBAGJ5F,GAAIF,QAAQ/O,EAAOkP,OAAOX,MAC5B,CAAA,EAAMjR,KAAKgJ,mBAAmB4B,gBAC5BlI,EAAOkP,OAAO9C,KACdpM,EAAOkP,OAAOjK,UAHd,CAAA,EAAA,UAKF,OAJAnC,EAAApC,OAIA,CAAA,EAAO,aAGT,MAAA,CAAA,EAAOV,EAAOgF,cAUA4M,EAAApU,UAAAsX,iBAAhB,SACEJ,EACAxG,uGAEA,OAAIA,EAAQkF,aAEP9V,KAAKqX,gBACJD,EACA,6CAGF,CAAA,EAAO,OAKT3E,EADE7B,EAAQ6B,IACJ7B,EAAQ6B,IAERiB,GAAQC,KAAK3T,KAAK8U,QAAS9U,KAAK0U,cAAe9D,EAAQ6B,KAE3D7B,EAAQgF,KACVnD,GAAO7B,EAAQgF,IAEbhF,EAAQ6C,WAAW2C,gBACrB3D,GAAO7B,EAAQ6C,WAAWJ,qBAEtB0C,EAAU/V,KAAKgW,UAAUpF,EAAQiF,QAExB,CAAA,EAAM7V,KAAKyU,WACvB6C,KAAiB7E,EAAK2E,EAAQ,CAC7BrB,QAAOA,IAERG,4BAJGxT,EAAS8C,EAAApC,OAMXuO,GAAIF,QAAQ/O,EAAOkP,OAAOX,KAAML,EAAQ4C,kBAC1C,CAAA,EAAMxT,KAAKgJ,mBAAmB4B,gBAC5BlI,EAAOkP,OAAO9C,KACdpM,EAAOkP,OAAOjK,UAHd,CAAA,EAAA,UAKF,OAJAnC,EAAApC,OAIA,CAAA,EAAO,aAGT,MAAA,CAAA,EAAOV,EAAOgF,cAWA4M,EAAApU,UAAAuX,KAAhB,SACEL,EACAvB,EACAC,eAAA,IAAAA,IAAAA,GAAA,8FAEA,OAAIsB,GAAUtB,IAET9V,KAAKqX,gBACJD,EACA,6CAGF,CAAA,EAAO,OAGLrB,EAAU/V,KAAKgW,UAAUH,GAChB,CAAA,EAAM7V,KAAKyU,WACvBiD,IACChE,GAAQC,KAAK3T,KAAK8U,QAAS9U,KAAK0U,cAAe0C,EAAOO,KACtDP,EACA,CACErB,QAAOA,IAGVG,4BARGxT,EAAS8C,EAAApC,OAUXuO,GAAIF,QAAQ/O,EAAOkP,OAAOX,MAC5B,CAAA,EAAMjR,KAAKgJ,mBAAmB4B,gBAC5BlI,EAAOkP,OAAO9C,KACdpM,EAAOkP,OAAOjK,UAHd,CAAA,EAAA,UAKF,OAJAnC,EAAApC,OAIA,CAAA,EAAO,aAGT,MAAA,CAAA,EAAOV,EAAOgF,cAUA4M,EAAApU,UAAA0X,gBAAhB,SACEhH,EACAwG,uGAEA,OAAIA,GAAUxG,EAAQkF,aAEjB9V,KAAKqX,gBACJD,EACA,6CAGF,CAAA,EAAO,OAKT3E,EADE7B,EAAQ6B,IACJ7B,EAAQ6B,IAERiB,GAAQC,KAAK3T,KAAK8U,QAAS9U,KAAK0U,cAAe9D,EAAQ6B,KAE3D7B,EAAQgF,KACVnD,EAAMiB,GAAQC,KAAKlB,EAAK7B,EAAQgF,KAE9BhF,EAAQ6C,WAAW2C,gBACrB3D,EAAMiB,GAAQC,KAAKlB,EAAK7B,EAAQ6C,WAAWJ,sBAEvC0C,EAAU/V,KAAKgW,UAAUpF,EAAQiF,QACxB,CAAA,EAAM7V,KAAKyU,WACvBiD,IAAgBjF,EAAK2E,EAAQ,CAC5BrB,QAAOA,IAERG,4BAJGxT,EAAS8C,EAAApC,OAMXuO,GAAIF,QAAQ/O,EAAOkP,OAAOX,KAAML,EAAQ4C,kBAC1C,CAAA,EAAMxT,KAAKgJ,mBAAmB4B,gBAC5BlI,EAAOkP,OAAO9C,KACdpM,EAAOkP,OAAOjK,UAHd,CAAA,EAAA,UAKF,OAJAnC,EAAApC,OAIA,CAAA,EAAO,aAGT,MAAA,CAAA,EAAOV,EAAOgF,cAGA4M,EAAApU,UAAA2X,mBAAhB,SACEjH,uGAgBe,OAZb6B,EADE7B,EAAQ6B,IACJ7B,EAAQ6B,IAERiB,GAAQC,KAAK3T,KAAK8U,QAAS9U,KAAK2U,aAAc/D,EAAQ6B,KAE1D7B,EAAQgF,KACVnD,EAAMiB,GAAQC,KAAKlB,EAAK7B,EAAQgF,KAE9BhF,EAAQ6C,WAAW2C,gBACrB3D,EAAMiB,GAAQC,KAAKlB,EAAK7B,EAAQ6C,WAAWJ,qBAC3C5I,QAAQC,IAAI,qBAAuB+H,IAE/BsD,EAAU/V,KAAKgW,UAAUpF,EAAQiF,QACxB,CAAA,EAAM7V,KAAKyU,WACvBkC,IAAyBlE,EAAK,CAC7BsD,QAAOA,IAERG,2BAJGxT,EAAS8C,EAAApC,OAObiP,GAAiBZ,QAAQ/O,EAAOkP,OAAOX,KAAML,EAAQ4C,kBAErD,CAAA,EAAMxT,KAAKgJ,mBAAmB4B,gBAC5BlI,EAAOkP,OAAO9C,KACdpM,EAAOkP,OAAOjK,UAJhB,CAAA,EAAA,UAMA,OAJAnC,EAAApC,OAIA,CAAA,EAAO,aAIT,MAAA,CAAA,EAD+B,IAAI0U,GAA0BpV,YAIrD4R,EAAApU,UAAA6X,gBAAV,SACEtF,EACA/K,EACAmO,GAEA,IAAME,EAAU/V,KAAKgW,UAAUH,GAC/B,OAAO7V,KAAKyU,WACT6C,KAAU7E,EAAK/K,EAAM,CACpBqO,QAAOA,EACPiC,gBAAgB,EAChBC,QAAS,WAEV5S,KACCwR,EAAAA,KAAI,SAAAqB,GACF,IAAIC,EACJ,OAAQD,EAAMtF,MACZ,KAAKwF,EAAAA,cAAcC,eACjB,IAAMC,EAAWtM,KAAKuM,MAAO,IAAML,EAAMM,OAAUN,EAAMO,OAGzD,OAFAN,EAAc,IAAIO,GAAY,aAClBC,gBAAkBL,EACvBH,EAET,KAAKC,EAAAA,cAAcQ,SAEjB,OADAT,EAAc,IAAIO,GAAY,WAAYR,EAAMpV,MAElD,QAKE,OAJAqV,EAAc,IAAIO,GAChB,QACA,oBAAoBR,EAAMtF,YAa9B0B,EAAApU,UAAA2Y,sBAAV,SAAgCtG,EAAqB7P,GACnD,YADmD,IAAAA,IAAAA,EAAA,IAC5C,SAAC4B,GAGN,OAFAmG,QAAQnG,MAAMiO,EAAajO,GAC3BmG,QAAQnG,MAAMiO,EAAc,gBAAiBjO,EAAMsN,QAC5CkH,EAAAA,GAAGpW,KAWE4R,EAAApU,UAAAuW,mBAAhB,SACElE,EACAwG,EACAzU,6FAWA,OATAmG,QAAQC,IACN,YACA6H,EACA,YACAwG,EACA,aACAzU,EAAMqD,SAGR,CAAA,EAAM3H,KAAKgJ,mBAAmB4B,gBAC5B,sBACA,0CAA4CtG,EAAMqD,iBAEpD,OAJAnC,EAAApC,OAIA,CAAA,EAAO,cAQCkR,EAAApU,UAAA8V,UAAV,SAAoBH,GAClB,OAAQA,GACN,KAAK1N,EAAAA,OAAOsE,KACV,OAAOzM,KAAKgZ,WACd,KAAK7Q,EAAAA,OAAO8Q,IACV,OAAOjZ,KAAKkZ,UACd,KAAK/Q,EAAAA,OAAOgR,MACZ,QACE,OAAOnZ,KAAKoZ,gBAWJ9E,EAAApU,UAAAmX,gBAAd,SAA8BgC,EAAY1R,oGACnC0R,EAAM1B,IAAP,CAAA,EAAA,GACF,CAAA,EAAM3X,KAAKgJ,mBAAmB4B,gBAC5B,mBACAjD,WAEF,OAJAnC,EAAApC,OAIA,CAAA,GAAO,UAET,MAAA,CAAA,GAAO,WAUKkR,EAAApU,UAAA4V,WAAd,SAAyBF,EAAYjO,oGAC9BiO,EAAD,CAAA,EAAA,GACF,CAAA,EAAM5V,KAAKgJ,mBAAmB4B,gBAC5B,mBACAjD,WAEF,OAJAnC,EAAApC,OAIA,CAAA,GAAO,UAET,MAAA,CAAA,GAAO,6EArqBNkW,EAAAA,OAAMC,KAAA,CAAC7S,YAGsBiE,EAAkB5J,WAAA,CAAA,CAAA6R,KAD/C0G,EAAAA,OAAMC,KAAA,CAAC3S,YAEU4S,EAAAA,cACIC,EAAAA,oLA/FbnF,EAAexT,EAAA,CAH3BuJ,EAAAA,WAAW,CACVC,WAAY,SA4FT7I,EAAA,EAAA6X,EAAAA,OAAO5S,IAEPjF,EAAA,EAAA6X,EAAAA,OAAO1S,KA5FC0N,qBCGX,SAAAoF,EAC6CnF,EAE3CvL,EACAwL,EACAC,UAEAjK,EAAA5J,KAAAZ,KAAMuU,EAAQvL,EAAoBwL,EAAQC,IAAWzU,YAfVF,EAAA4Z,EAAAlP,GA2ChCkP,EAAAxZ,UAAAyZ,aAAb,SACEC,4GAQ8B,OANxBhJ,EAAU,IAAI0F,IACZ7D,IAAMiB,GAAQC,KAAK3T,KAAK8U,QAAS,gBACzClE,EAAQiF,OAAS1N,EAAAA,OAAOgR,MACxBvI,EAAQkF,YAAa,EACrBlF,EAAQ4C,iBAAiBxP,KAAKoE,EAAAA,OAAOkJ,eACrC7G,QAAQC,IAAI,yBACkB,CAAA,EAAM1K,KAAKwX,iBAEvCoC,EAAchJ,GAAS2F,OAAM,SAAMC,GAAG,OAAA5U,EAAAwD,OAAA,OAAA,GAAA,6DAE/B,OADPqF,QAAQC,IAAI8L,GACL,CAAA,EAAMxW,KAAKyW,mBAChB,4BACA,eACAD,WAHF,MAAA,CAAA,EAAOhR,EAAApC,0BAQT,OAZMyW,EAAwBrU,EAAApC,OAU9BqH,QAAQC,IAAI,0BACZD,QAAQC,IAAImP,GACZ,CAAA,EAAOA,WAQIH,EAAAxZ,UAAA4Z,SAAb,SACEC,EACAlE,0GAMa,OAJPjF,EAAU,IAAI0F,IACZ7D,IAAMiB,GAAQC,KAAK3T,KAAK8U,QAAS9U,KAAKuU,OAAOyF,eACrDpJ,EAAQiF,OAASA,EACjBjF,EAAQkF,YAAa,EACR,CAAA,EAAM9V,KAAKwX,iBAAoBuC,EAAgBnJ,GAAS2F,OACnE,SAAMC,GAAG,OAAA5U,EAAAwD,OAAA,OAAA,GAAA,6DACA,MAAA,CAAA,EAAMpF,KAAKyW,mBAChB,4BACA,WACAD,WAHF,MAAA,CAAA,EAAOhR,EAAApC,0BAOX,MAAA,CAAA,EATaoC,EAAApC,kFAvEZkW,EAAAA,OAAMC,KAAA,CAAC7S,YAEYiE,EAAkB5J,WAAA,CAAA,CAAA6R,KADrC0G,EAAAA,OAAMC,KAAA,CAAC3S,YAEA4S,EAAAA,cACIC,EAAAA,oLAbHC,EAAyB5Y,EAAA,CAHrCuJ,EAAAA,WAAW,CACVC,WAAY,SAWT7I,EAAA,EAAA6X,EAAAA,OAAO5S,IACPjF,EAAA,EAAA6X,EAAAA,OAAO1S,KAVC8S,IAAkCpF,kBCsB7C,SAAA2F,EAEU1F,EACA2F,GADAla,KAAAuU,OAAAA,EACAvU,KAAAka,0BAAAA,EAXFla,KAAAma,UAAY,IAAIC,EAAAA,wBAdxB5a,OAAAgC,eAAYyY,EAAA/Z,UAAA,QAAK,KAAjB,WAIE,OAHKF,KAAKqa,SACRra,KAAKqa,OAASra,KAAKsa,4BAEdta,KAAKqa,YAId,SAAkB3N,GAChB1M,KAAKua,gBAAgB7N,GACrB1M,KAAKqa,OAAS3N,mCAsBHuN,EAAA/Z,UAAAyZ,aAAb,SAA0BC,mGACM,MAAA,CAAA,EAAM5Z,KAAKka,0BAA0BP,aACjEC,WAOF,OARMC,EAAwBrU,EAAApC,QAGJsJ,OAASmN,EAAsBnN,MAAM/L,OAAS,EACtEX,KAAK0M,MAAQmN,EAAsBnN,MAEnC1M,KAAKwa,aAEP,CAAA,EAAOX,WAMFI,EAAA/Z,UAAAsa,WAAP,WACExa,KAAKqa,OAAS,GACdra,KAAKya,qBAQAR,EAAA/Z,UAAAwa,mBAAP,WACE,IAAMC,EAAY3a,KAAK4a,eACvB,OAAID,EAAUE,MAAK,SAAAC,GAAQ,MAAS,UAATA,KAClB,QAELH,EAAUE,MAAK,SAAAC,GAAQ,MAAS,SAATA,KAClB,OAEFH,EAAU,IAOZV,EAAA/Z,UAAA6a,uBAAP,WAEE,OADuB/a,KAAKma,UAAUY,uBAAuB/a,KAAK0M,QAQ7DuN,EAAA/Z,UAAA8a,UAAP,WACE,OAA+B,IAA3Bhb,KAAKib,kBACA,KAEYjb,KAAKma,UAAUe,YAAYlb,KAAK0M,OACjCyO,QAOflB,EAAA/Z,UAAA0a,aAAP,WACE,OAA+B,IAA3B5a,KAAKib,kBACA,GAEYjb,KAAKma,UAAUe,YAAYlb,KAAK0M,OACjCL,OAOf4N,EAAA/Z,UAAA+a,gBAAP,WACE,QAAKjb,KAAK0M,SAGN1M,KAAKma,UAAUiB,eAAepb,KAAK0M,SACrC1M,KAAKya,qBACE,KAWER,EAAA/Z,UAAAmb,UAAb,SAA+CzB,mGACf,MAAA,CAAA,EAAM5Z,KAAKka,0BAA0BP,aAAaC,WAMhF,OANMC,EAAwBrU,EAAApC,QACJsJ,OAASmN,EAAsBnN,MAAM/L,OAAS,EACtEX,KAAK0M,MAAQmN,EAAsBnN,MAEnC1M,KAAKwa,aAEP,CAAA,EAAOX,WAMFI,EAAA/Z,UAAAob,WAAP,WACEtb,KAAKwa,cAQMP,EAAA/Z,UAAAqb,aAAb,SACExB,EACAlE,eAAA,IAAAA,IAAAA,EAAiB1N,EAAAA,OAAOgR,0FAEX,MAAA,CAAA,EAAMnZ,KAAKka,0BAA0BJ,SAChDC,EACAlE,WAEF,MAAA,CAAA,EAJarQ,EAAApC,gBAWR6W,EAAA/Z,UAAAsb,SAAP,SAAgB9O,GACd1M,KAAKua,gBAAgB7N,GACrB1M,KAAKqa,OAAS3N,GAURuN,EAAA/Z,UAAAua,kBAAR,WACEjF,aAAaiG,WAAWzb,KAAKuU,OAAOmB,eAO9BuE,EAAA/Z,UAAAoa,yBAAR,WACE,IAAM5N,EAAQ8I,aAAaC,QAAQzV,KAAKuU,OAAOmB,cAC/C,OAAKhJ,GACI,IASHuN,EAAA/Z,UAAAqa,gBAAR,SAAwB7N,GACtB8I,aAAakG,QAAQ1b,KAAKuU,OAAOmB,aAAchJ,sEAzK9C4M,EAAAA,OAAMC,KAAA,CAAC7S,YAE2BgT,+HA/B1BO,EAAqBnZ,EAAA,CAHjCuJ,EAAAA,WAAW,CACVC,WAAY,SA+BT7I,EAAA,EAAA6X,EAAAA,OAAO5S,KA7BCuT,oBCKX,SAAA0B,EACUC,EACApH,GADAxU,KAAA4b,sBAAAA,EACA5b,KAAAwU,OAAAA,SASHmH,EAAAzb,UAAA2b,YAAP,SACEC,EACAC,GAGA,GADwB/b,KAAK4b,sBAAsBX,mBAGhC,UADAjb,KAAK4b,sBAAsBlB,qBAE1C,OAAO,EAIX,OADA1a,KAAKwU,OAAOwH,SAAS,CAAC,kBACf,4CAtBwB/B,UACfT,EAAAA,0IARPmC,EAAqB7a,EAAA,CAHjCuJ,EAAAA,WAAW,CACVC,WAAY,UAEDqR,oBCMX,SAAAM,EACUL,EACApH,GADAxU,KAAA4b,sBAAAA,EACA5b,KAAAwU,OAAAA,SASHyH,EAAA/b,UAAA2b,YAAP,SACEC,EACAC,GAEA,QAAI/b,KAAK4b,sBAAsBX,oBAG/Bjb,KAAKwU,OAAOwH,SAAS,CAAC,OACf,6CAlBwB/B,UACfT,EAAAA,0IARPyC,EAAoBnb,EAAA,CAHhCuJ,EAAAA,WAAW,CACVC,WAAY,UAED2R,oBCNb,SAAAC,IAESlc,KAAAmc,sBAAwB,IAAIvX,EAAAA,QAG5B5E,KAAAoc,oBAAsB,IAAIxX,EAAAA,QAG1B5E,KAAAqc,qBAAuB,IAAIzX,EAAAA,eAM3BsX,EAAAhc,UAAAoc,aAAP,SAAoB1G,GAClB5V,KAAKqc,qBAAqB9Z,KAAKqT,IAO1BsG,EAAAhc,UAAAqc,cAAP,SAAqB3G,GACnB5V,KAAKmc,sBAAsB5Z,KAAKqT,IAO3BsG,EAAAhc,UAAAsc,YAAP,SAAmB5G,GACjB5V,KAAKoc,oBAAoB7Z,KAAKqT,IAQzBsG,EAAAhc,UAAAqF,UAAP,SACEkX,EACAtX,GAEAnF,KAAKyc,GAAalX,UAAUJ,+FA3CnB+W,EAAsBpb,EAAA,CAHlCuJ,EAAAA,WAAW,CACVC,WAAY,UAED4R,SCPb,4BCuBE,SAAAQ,EAC6CnI,EAE3CvL,EACAwL,EACAC,GALF,IAAArP,EAOEoF,EAAA5J,KAAAZ,KAAMuU,EAAQvL,EAAoBwL,EAAQC,IAAWzU,YACrDoF,EAAKuP,aAAe,wBAjBuB7U,EAAA4c,EAAAlS,GA0BhCkS,EAAAxc,UAAAyc,kBAAb,SAA+BC,iFAC7B,MAAA,CAAA,EAAO5c,KAAK2V,QAAQiH,EAAezU,EAAAA,OAAOsE,MAAM8J,OAAM,SAAMC,GAAG,OAAA5U,EAAAwD,OAAA,OAAA,GAAA,6DACtD,MAAA,CAAA,EAAMpF,KAAKyW,mBAChB,4BACA,oBACAD,WAHF,MAAA,CAAA,EAAOhR,EAAApC,0BAcEsZ,EAAAxc,UAAA2c,eAAb,SACED,wGAEoB,MAAA,CAAA,EAAM5c,KAAK0W,KAC7BkG,EACAzU,EAAAA,OAAOsE,MACP8J,OAAM,SAAMC,GAAG,OAAA5U,EAAAwD,OAAA,OAAA,GAAA,6DACR,MAAA,CAAA,EAAMpF,KAAKyW,mBAChB,4BACA,iBACAD,WAHF,MAAA,CAAA,EAAOhR,EAAApC,0BAMT,MAAA,CAAA,EAVoBoC,EAAApC,gBAkBTsZ,EAAAxc,UAAA4c,YAAb,SAAyBxY,4GACvBmG,QAAQC,IAAI,yCACZD,QAAQC,IAAIpG,IACmB,IAA3BtE,KAAKuU,OAAOwI,WAAZ,CAAA,EAAA,GACF,CAAA,EAAM/c,KAAKgJ,mBAAmB4B,gBAC5B,mBACA,iCAAmCtG,EAAMqD,iBAF3CnC,EAAApC,wBAYwB,OAPpB4Z,EAAc,IAAI1K,GACtB,UACAhO,EAAMqD,QACNrD,EAAMsN,OACNtN,EAAMkO,WACNlO,EAAMmO,KAEkB,CAAA,EAAMzS,KAAKid,kBAAkBD,WAGvD,OAHME,EAAoB1X,EAAApC,OAC1B+Z,SAASC,SAASC,KAChBrd,KAAKuU,OAAO+I,WAAa,kBAAoBJ,EAAkBvF,IACjE,CAAA,EAAO,cASI+E,EAAAxc,UAAA+c,kBAAb,SACED,wGAEc,MAAA,CAAA,EAAMhd,KAAKmX,MACvB6F,EACA7U,EAAAA,OAAOsE,MACP,GACA8J,OAAM,SAAMC,GAAG,OAAA5U,EAAAwD,OAAA,OAAA,GAAA,6DACR,MAAA,CAAA,EAAMpF,KAAKyW,mBAChB,4BACA,kBACAD,WAHF,MAAA,CAAA,EAAOhR,EAAApC,0BAMT,MAAA,CAAA,EAXcoC,EAAApC,kFApFbkW,EAAAA,OAAMC,KAAA,CAAC7S,YAEYiE,EAAkB5J,WAAA,CAAA,CAAA6R,KADrC0G,EAAAA,OAAMC,KAAA,CAAC3S,YAEA4S,EAAAA,cACIC,EAAAA,oLAdHiD,EAAyB5b,EAAA,CAHrCuJ,EAAAA,WAAW,CACVC,WAAY,SAYT7I,EAAA,EAAA6X,EAAAA,OAAO5S,IACPjF,EAAA,EAAA6X,EAAAA,OAAO1S,KAXC8V,IAAkCpI,kBCa7C,SAAAiJ,EAAoB/I,EAAgBgJ,GAApC,IAAApY,EAAApF,KAAoBA,KAAAwU,OAAAA,EAPVxU,KAAAyd,aAA2C,IAAIC,EAAAA,aAQvD,IAAMC,EAAK3d,KACXA,KAAKwU,OAAOoJ,OAAOrY,WAAU,SAAA2S,GAC3B,GAAIA,aAAiB2F,EAAAA,cAAe,CAClC,IAEMC,EAFqB1Y,EAAKoP,OAAOuJ,YACKC,SACEF,KACxCG,EAAa7Y,EAAK8Y,mBAAmBJ,GAC3CH,EAAGM,WAAa7Y,EAAK+Y,iBAAiBF,GACtC7Y,EAAKqY,aAAaW,KAAKT,EAAGM,uBAUzBV,EAAArd,UAAAge,mBAAP,SAA0BF,GACxB,IAAIC,EAA2B,GAiB/B,OAhBID,IACEA,EAASK,aACXJ,EAAaA,EAAWK,OACtBte,KAAKke,mBAAmBF,EAASK,cAGjCL,EAASvL,IAAI9R,QACfsd,EAAWja,KAAK,CACdyD,MAAOuW,EAAStW,KAAY,MAC5B6W,WAAYP,EAAStW,KAAiB,WACtC+K,IAAKuL,EAASvL,IAAI,GAAG+L,KACrBC,YAAaT,EAASvL,IACtB3B,OAAQkN,EAASlN,UAIhBmN,GAQFV,EAAArd,UAAAie,iBAAP,SAAwBF,WAQtBA,EAAWS,UACX,IAAIC,EAAU,OACd,IAAwB,IAAAC,EAAA3a,EAAAga,GAAUY,EAAAD,EAAArc,QAAAsc,EAAAlc,KAAAkc,EAAAD,EAAArc,OAAE,CAA/B,IAAMuc,EAASD,EAAAxc,MACF,KAAZsc,EACFA,EAAUG,EAAUrM,MAEU,IAA1BkM,EAAQ7O,SAAS,OACnB6O,GAAW,KAEbA,GAAoBG,EAAUrM,KAEhCqM,EAAUrM,IAAMkM,oGAElB,OAAOV,4CAlEmBzE,EAAAA,cAAwBuF,EAAAA,gKAP1Cje,EAAA,CAATke,EAAAA,6CALUzB,EAAiBzc,EAAA,CAJ7Bme,EAAAA,YACA5U,EAAAA,WAAW,CACVC,WAAY,UAEDiT,qBCeT,SAAA2B,EAEc3K,EAEVvL,EACAwL,EACAC,GANJ,IAAArP,EAQIoF,EAAA5J,KAAAZ,KAAMuU,EAAQvL,EAAoBwL,EAAQC,IAAWzU,YAN3CoF,EAAAmP,OAAAA,EAOVnP,EAAKuP,aAAeJ,EAAO4K,iBAC3B/Z,EAAKwN,KAAOI,YAlBqBlT,EAAAof,EAAA1U,GA4BxB0U,EAAAhf,UAAAkf,aAAb,SACIjE,EACAL,mFAWA,OATMlK,EAAU,IAAI0F,IACZT,OAAS1N,EAAAA,OAAOsE,KACxBmE,EAAQ6B,IAAMiB,GAAQC,KAClB3T,KAAK8U,QACL9U,KAAK2U,aACLwG,EACA,WAEJvK,EAAQ6C,WAAWN,IAAI,OAAQ2H,GAC/B,CAAA,EAAO9a,KAAK4X,gBAAmBhH,GAAS2F,OAAM,SAAMC,GAAG,OAAA5U,EAAAwD,OAAA,OAAA,GAAA,6DAC5C,MAAA,CAAA,EAAMpF,KAAKyW,mBACd,kBACA,cACAD,WAHJ,MAAA,CAAA,EAAOhR,EAAApC,0BAcF8b,EAAAhf,UAAAmf,YAAb,SAAyBlE,iFACrB,MAAA,CAAA,EAAOnb,KAAK2V,QAAQwF,EAAQhT,EAAAA,OAAOsE,MAAM8J,OAAM,SAAMC,GAAG,OAAA5U,EAAAwD,OAAA,OAAA,GAAA,6DAC7C,MAAA,CAAA,EAAMpF,KAAKyW,mBACd,kBACA,aACAD,WAHJ,MAAA,CAAA,EAAOhR,EAAApC,0BAaF8b,EAAAhf,UAAAof,eAAb,SACI1O,0GAamB,OAXb2O,EAAiB,IAAIjJ,IACZT,OAAS1N,EAAAA,OAAOsE,KAC/B8S,EAAe9M,IAAMiB,GAAQC,KAAK3T,KAAK8U,QAAS9U,KAAK2U,cACrD4K,EAAe9L,WAAWN,IAAI,OAAQ,SAClCvC,IACA2O,EAAe9L,WAAWN,IAAI,OAAQvC,EAAQnF,KAAK+T,YACnDD,EAAe9L,WAAWN,IAAI,QAASvC,EAAQlF,KAAK8T,YAChD5O,EAAQjF,KAAKhL,OAAS,GACtB4e,EAAe9L,WAAWN,IAAI,OAAQvC,EAAQjF,OAGnC,CAAA,EAAM3L,KAAKkX,oBAAuBqI,GAAgBhJ,OACjE,SAAMC,GAAG,OAAA5U,EAAAwD,OAAA,OAAA,GAAA,6DACE,MAAA,CAAA,EAAMpF,KAAKyW,mBACd,kBACA,gBACAD,WAHJ,MAAA,CAAA,EAAOhR,EAAApC,0BAOf,MAAA,CAAA,EATmBoC,EAAApC,gBAkBV8b,EAAAhf,UAAAuf,SAAb,SAA0C7J,0GAIzB,OAHPhF,EAAU,IAAI0F,IACZT,OAAS1N,EAAAA,OAAOsE,KACxBmE,EAAQ6B,IAAMiB,GAAQC,KAAK3T,KAAK8U,QAAS9U,KAAK2U,aAAciB,GAC/C,CAAA,EAAM5V,KAAK+W,gBAAmBnG,GAAS2F,OAAM,SAAMC,GAAG,OAAA5U,EAAAwD,OAAA,OAAA,GAAA,6DACxD,MAAA,CAAA,EAAMpF,KAAKyW,mBAAmB,kBAAmB,UAAWD,WAAnE,MAAA,CAAA,EAAOhR,EAAApC,0BAEX,MAAA,CAAA,EAHaoC,EAAApC,gBAOJ8b,EAAAhf,UAAAwf,eAAb,SACI9O,0GAawB,OAXlB2O,EAAiB,IAAIjJ,IACZT,OAAS1N,EAAAA,OAAOsE,KAC/B8S,EAAe9M,IAAMiB,GAAQC,KAAK3T,KAAK8U,QAAS9U,KAAK2U,cACrD4K,EAAe9L,WAAWN,IAAI,WAAY,QACtCvC,IACA2O,EAAe9L,WAAWN,IAAI,OAAQvC,EAAQnF,KAAK+T,YACnDD,EAAe9L,WAAWN,IAAI,QAASvC,EAAQlF,KAAK8T,YAChD5O,EAAQjF,KAAKhL,OAAS,GACtB4e,EAAe9L,WAAWN,IAAI,OAAQvC,EAAQjF,OAG9B,CAAA,EAAM3L,KAAKkX,oBAC/BqI,GACFhJ,OAAM,SAAMC,GAAG,OAAA5U,EAAAwD,OAAA,OAAA,GAAA,6DACN,MAAA,CAAA,EAAMpF,KAAKyW,mBACd,kBACA,qBACAD,WAHJ,MAAA,CAAA,EAAOhR,EAAApC,0BAMX,MAAA,CAAA,EATwBoC,EAAApC,gBAiBf8b,EAAAhf,UAAAyf,UAAb,SACI/O,0GAYwB,OAVlB2O,EAAiB,IAAIjJ,IACZT,OAAS1N,EAAAA,OAAOsE,KAC/B8S,EAAe9M,IAAMiB,GAAQC,KAAK3T,KAAK8U,QAAS9U,KAAK2U,cACjD/D,IACA2O,EAAe9L,WAAWN,IAAI,OAAQvC,EAAQnF,KAAK+T,YACnDD,EAAe9L,WAAWN,IAAI,QAASvC,EAAQlF,KAAK8T,YAChD5O,EAAQjF,KAAKhL,OAAS,GACtB4e,EAAe9L,WAAWN,IAAI,OAAQvC,EAAQjF,OAG9B,CAAA,EAAM3L,KAAKkX,oBAC/BqI,GACFhJ,OAAM,SAAMC,GAAG,OAAA5U,EAAAwD,OAAA,OAAA,GAAA,6DACN,MAAA,CAAA,EAAMpF,KAAKyW,mBAAmB,kBAAmB,WAAYD,WAApE,MAAA,CAAA,EAAOhR,EAAApC,0BAEX,MAAA,CAAA,EALwBoC,EAAApC,gBAaf8b,EAAAhf,UAAA0f,gBAAb,SACIzE,EACAL,mFAWA,OATMlK,EAAU,IAAI0F,IACZT,OAAS1N,EAAAA,OAAOsE,KACxBmE,EAAQ6B,IAAMiB,GAAQC,KAClB3T,KAAK8U,QACL9U,KAAK2U,aACLwG,EACA,eAEJvK,EAAQ6C,WAAWN,IAAI,OAAQ2H,GAC/B,CAAA,EAAO9a,KAAK4X,gBAAmBhH,GAAS2F,OAAM,SAAMC,GAAG,OAAA5U,EAAAwD,OAAA,OAAA,GAAA,6DAC5C,MAAA,CAAA,EAAMpF,KAAKyW,mBACd,kBACA,iBACAD,WAHJ,MAAA,CAAA,EAAOhR,EAAApC,0BAcF8b,EAAAhf,UAAA2f,sBAAb,SACIC,0GAUA,OARMlP,EAAU,IAAI0F,IACZT,OAAS1N,EAAAA,OAAOgR,MACxBvI,EAAQ6B,IAAMiB,GAAQC,KAClB3T,KAAK8U,QACL9U,KAAK2U,aACL,0BAEJ/D,EAAQmP,WAAaC,GACrB,CAAA,EAAMhgB,KAAKwX,iBAA0BsI,EAAsBlP,GAAS2F,OAChE,SAAMC,GAAG,OAAA5U,EAAAwD,OAAA,OAAA,GAAA,6DACE,MAAA,CAAA,EAAMpF,KAAKyW,mBACd,kBACA,uBACAD,WAHJ,MAAA,CAAA,EAAOhR,EAAApC,0BAOf,OATAoC,EAAApC,OASA,CAAA,GAAO,WASE8b,EAAAhf,UAAA+f,2BAAb,SACIH,0GAU2B,OARrBlP,EAAU,IAAI0F,IACZT,OAAS1N,EAAAA,OAAOgR,MACxBvI,EAAQ6B,IAAMiB,GAAQC,KAClB3T,KAAK8U,QACL9U,KAAK2U,aACL,gCAEJ/D,EAAQmP,WAAaC,GACM,CAAA,EAAMhgB,KAAKwX,iBAClCsI,EACAlP,GACF2F,OAAM,SAAMC,GAAG,OAAA5U,EAAAwD,OAAA,OAAA,GAAA,6DACN,MAAA,CAAA,EAAMpF,KAAKyW,mBACd,kBACA,4BACAD,WAHJ,MAAA,CAAA,EAAOhR,EAAApC,0BAMX,MAAA,CAAA,EAV2BoC,EAAApC,gBAkBlB8b,EAAAhf,UAAAggB,yBAAb,SACIC,mFAUA,OARMvP,EAAU,IAAI0F,IACZT,OAAS1N,EAAAA,OAAOgR,MACxBvI,EAAQ6B,IAAMiB,GAAQC,KAClB3T,KAAK8U,QACL9U,KAAK2U,aACL,6BAEJ/D,EAAQ6C,WAAWN,IAAI,QAASgN,GAChC,CAAA,EAAOngB,KAAK+W,gBACRnG,GACF2F,OAAM,SAAMC,GAAG,OAAA5U,EAAAwD,OAAA,OAAA,GAAA,6DACN,MAAA,CAAA,EAAMpF,KAAKyW,mBACd,kBACA,0BACAD,WAHJ,MAAA,CAAA,EAAOhR,EAAApC,0BAcF8b,EAAAhf,UAAAkgB,eAAb,SAA4BC,mGAQT,OAPTzP,EAAU,IAAI0F,IACZT,OAAS1N,EAAAA,OAAOgR,MACxBvI,EAAQ6B,IAAMiB,GAAQC,KAClB3T,KAAK8U,QACL9U,KAAK2U,aACL,kBAEW,CAAA,EAAM3U,KAAKwX,iBAA0B6I,EAAezP,WACnE,MAAA,CAAA,EADepL,EAAApC,gBAUN8b,EAAAhf,UAAAogB,YAAb,SAA6CC,iFACzC,MAAA,CAAA,EAAOvgB,KAAKyX,KAAQ8I,EAAMpY,EAAAA,OAAOsE,MAAM8J,OAAM,SAAMC,GAAG,OAAA5U,EAAAwD,OAAA,OAAA,GAAA,6DAC3C,MAAA,CAAA,EAAMpF,KAAKyW,mBACd,kBACA,aACAD,WAHJ,MAAA,CAAA,EAAOhR,EAAApC,0BAcF8b,EAAAhf,UAAAsgB,4BAAb,SACIC,mFAUA,OARM7P,EAAU,IAAI0F,IACZT,OAAS1N,EAAAA,OAAOgR,MACxBvI,EAAQ6B,IAAMiB,GAAQC,KAClB3T,KAAK8U,QACL9U,KAAK2U,aACL,iCAEJ/D,EAAQ6C,WAAWN,IAAI,QAASsN,GAChC,CAAA,EAAOzgB,KAAK+W,gBACRnG,GACF2F,OAAM,SAAMC,GAAG,OAAA5U,EAAAwD,OAAA,OAAA,GAAA,6DACN,MAAA,CAAA,EAAMpF,KAAKyW,mBACd,kBACA,6BACAD,WAHJ,MAAA,CAAA,EAAOhR,EAAApC,0BAcR8b,EAAAhf,UAAAwgB,eAAP,SAAsBpU,GAClB,OAAOtM,KAAKyU,WAAWkC,IACnBjD,GAAQC,KACJ3T,KAAK8U,QACL9U,KAAK2U,aACL,wBAA+BrI,GAEnC,CACIyJ,QAAS/V,KAAKoZ,iBAKb8F,EAAAhf,UAAAygB,0BAAb,SACIC,mFAUA,OARMhQ,EAAU,IAAI0F,IACZT,OAAS1N,EAAAA,OAAOgR,MACxBvI,EAAQ6B,IAAMiB,GAAQC,KAClB3T,KAAK8U,QACL9U,KAAK2U,aACL,+BAEJ/D,EAAQ6C,WAAWN,IAAI,QAASyN,GAChC,CAAA,EAAO5gB,KAAK+W,gBACRnG,GACF2F,OAAM,SAAMC,GAAG,OAAA5U,EAAAwD,OAAA,OAAA,GAAA,6DACN,MAAA,CAAA,EAAMpF,KAAKyW,mBACd,kBACA,2BACAD,WAHJ,MAAA,CAAA,EAAOhR,EAAApC,4FA7WVkW,EAAAA,OAAMC,KAAA,CAAC7S,YAGYiE,EAAkB5J,WAAA,CAAA,CAAA6R,KADrC0G,EAAAA,OAAMC,KAAA,CAAC3S,YAEA4S,EAAAA,cACIC,EAAAA,oLAdPyF,EAAmBpe,EAAA,CAH/BuJ,EAAAA,WAAW,CACRC,WAAY,SAWP7I,EAAA,EAAA6X,EAAAA,OAAO5S,IAEPjF,EAAA,EAAA6X,EAAAA,OAAO1S,KAXHsY,IAA4B5K,ICtBzCuM,GAME,SACSnU,EACAyO,EACA2F,GAFA9gB,KAAA0M,MAAAA,EACA1M,KAAAmb,OAAAA,EACAnb,KAAA8gB,YAAAA,kBCkDP,SAAAC,EACcnF,EACAoF,EACA/X,EACAuL,GAJd,IAAApP,EAMIoF,EAAA5J,KAAAZ,OAAOA,YALGoF,EAAAwW,sBAAAA,EACAxW,EAAA4b,YAAAA,EACA5b,EAAA6D,qBAAAA,EACA7D,EAAAoP,OAAAA,WA1CmB1U,EAAAihB,EAAAvW,GAMjChL,OAAAgC,eAAWuf,EAAA7gB,UAAA,SAAM,KAAjB,WAII,OAHKF,KAAKihB,UACNjhB,KAAKihB,QAAUjhB,KAAK4b,sBAAsBZ,aAEvChb,KAAKihB,yCAIhBzhB,OAAAgC,eAAWuf,EAAA7gB,UAAA,WAAQ,KAAnB,WAII,OAHKF,KAAKkhB,mBACNlhB,KAAKkhB,iBAAmBlhB,KAAK4b,sBAAsBlB,sBAEhD1a,KAAKkhB,kDAuCHH,EAAA7gB,UAAAmf,YAAb,SAAyBlE,6FACC,MAAA,CAAA,EAAMnb,KAAKiJ,qBAAqBU,kBAClD,cACA,kFAEJ,OAJsBnE,EAAApC,OAIJ4E,SAAWzD,EAAAA,aAAamE,OACtC,CAAA,GAAO,GAEI,CAAA,EAAM1I,KAAKghB,YAAY3B,YAAYlE,WAClD,MAAA,CAAA,EADe3V,EAAApC,gBASN2d,EAAA7gB,UAAAof,eAAb,qGACkB,MAAA,CAAA,EAAMtf,KAAKghB,YAAY1B,yBACrC,MAAA,CAAA,EADc9Z,EAAApC,gBASL2d,EAAA7gB,UAAAwf,eAAb,qGACkB,MAAA,CAAA,EAAM1f,KAAKghB,YAAYtB,yBACrC,MAAA,CAAA,EADcla,EAAApC,gBASL2d,EAAA7gB,UAAAihB,gBAAb,2GACI,OAAKnhB,KAAKmb,QAGJvF,EAAK5V,KAAKmb,OACH,CAAA,EAAMnb,KAAKghB,YAAYvB,SAAY7J,KAH5C,CAAA,EAAO,aAIX,MAAA,CAAA,EADapQ,EAAApC,gBASJ2d,EAAA7gB,UAAAyf,UAAb,SACI/O,6FAEc,MAAA,CAAA,EAAM5Q,KAAKghB,YAAYrB,UAAa/O,WAClD,MAAA,CAAA,EADcpL,EAAApC,gBASX2d,EAAA7gB,UAAAkhB,oBAAP,WACI,OAAOphB,KAAK4b,sBAAsBlB,sBASzBqG,EAAA7gB,UAAAuf,SAAb,SAA0C4B,6FACzB,MAAA,CAAA,EAAMrhB,KAAKghB,YAAYvB,SAAY4B,WAChD,MAAA,CAAA,EADa7b,EAAApC,gBAUJ2d,EAAA7gB,UAAAohB,WAAb,SAAwBf,mGACU,MAAA,CAAA,EAAMvgB,KAAK4b,sBAAsBjC,aAAa4G,WAK5E,OAJ4C,KADtC1G,EAAwBrU,EAAApC,QACJme,gBACtBvhB,KAAKihB,QAAUjhB,KAAK4b,sBAAsBZ,YAC1Chb,KAAKkhB,iBAAmBlhB,KAAK4b,sBAAsBlB,sBAEvD,CAAA,EAAOb,WAOJkH,EAAA7gB,UAAAshB,YAAP,SAAmBC,QAAA,IAAAA,IAAAA,EAAA,IACfzhB,KAAKihB,QAAU,KACfjhB,KAAK4b,sBAAsBN,aACvBmG,GACAzhB,KAAKwU,OAAOwH,SAAS,CAACyF,KAWjBV,EAAA7gB,UAAAwhB,cAAb,SACIC,EACA9L,eAAA,IAAAA,IAAAA,EAAiB1N,EAAAA,OAAOgR,0FAEX,MAAA,CAAA,EAAMnZ,KAAK4b,sBAAsBL,aAC1CoG,EACA9L,WAMJ,MAAA,CAAA,EARarQ,EAAApC,gBAiBJ2d,EAAA7gB,UAAA2f,sBAAb,SAAmCvT,mGAEhB,OADTwT,EAAuB,IAAIE,GAAyB1T,GAC3C,CAAA,EAAMtM,KAAKghB,YAAYnB,sBAClCC,WAEJ,MAAA,CAAA,EAHeta,EAAApC,gBAYN2d,EAAA7gB,UAAA+f,2BAAb,SAAwC3T,mGAErB,OADTwT,EAAuB,IAAIE,GAAyB1T,GAC3C,CAAA,EAAMtM,KAAKghB,YAAYf,2BAClCH,WAEJ,MAAA,CAAA,EAHeta,EAAApC,gBAMN2d,EAAA7gB,UAAAggB,yBAAb,SAAsC5T,6FAC3B,MAAA,CAAA,EAAMtM,KAAKghB,YAAYd,yBAC1B5T,WADJ,MAAA,CAAA,EAAO9G,EAAApC,gBAaE2d,EAAA7gB,UAAAkgB,eAAb,SACI1T,EACAyO,EACA2F,4EAIA,OAFMc,EAAe,IAAIf,GAAcnU,EAAOyO,EAAQ2F,GAEtD,CAAA,EADe9gB,KAAKghB,YAAYZ,eAAewB,WAUtCb,EAAA7gB,UAAAogB,YAAb,SAA6CC,6FAC1B,MAAA,CAAA,EAAMvgB,KAAKghB,YAAYV,YAAYC,WAClD,MAAA,CAAA,EADe/a,EAAApC,gBAUN2d,EAAA7gB,UAAAsgB,4BAAb,SACIC,6FAEe,MAAA,CAAA,EAAMzgB,KAAKghB,YAAYR,4BAClCC,WAEJ,MAAA,CAAA,EAHejb,EAAApC,gBAWN2d,EAAA7gB,UAAAygB,0BAAb,SACIC,6FAEe,MAAA,CAAA,EAAM5gB,KAAKghB,YAAYL,0BAClCC,WAEJ,MAAA,CAAA,EAHepb,EAAApC,yDAvOkB6W,UACViF,UACSzV,SACd+P,EAAAA,uKA1CbuH,EAAejgB,EAAA,CAH3BuJ,EAAAA,WAAW,CACRC,WAAY,UAEHyW,IAAwBc,KpDrBzB9W,EAAAA,EAAAA,aAAAA,EAAAA,WAAU,KAEpBA,EAAA,gBAAA,GAAA,kBAGAA,EAAAA,EAAA,cAAA,GAAA,iBCPUC,EAAAA,EAAAA,cAAAA,EAAAA,YAAW,KAErBA,EAAA,SAAA,GAAA,WAGAA,EAAAA,EAAA,WAAA,GAAA,aAGAA,EAAAA,EAAA,SAAA,GAAA,YCNUC,EAAAA,EAAAA,OAAAA,EAAAA,KAAI,KAEdA,EAAA,UAAA,GAAA,YAGAA,EAAAA,EAAA,WAAA,GAAA,cCLUC,EAAAA,EAAAA,aAAAA,EAAAA,WAAU,KAEpBA,EAAA,GAAA,GAAA,KAGAA,EAAAA,EAAA,OAAA,GAAA,UCLUC,EAAAA,EAAAA,SAAAA,EAAAA,OAAM,KAEhBA,EAAA,KAAA,GAAA,OAGAA,EAAAA,EAAA,MAAA,GAAA,eiDIA,SACS2W,EACAC,QADA,IAAAD,IAAAA,EAAyB/W,EAAAA,WAAWiX,sBACpC,IAAAD,IAAAA,EAA2B/W,EAAAA,YAAYiX,UADvCjiB,KAAA8hB,WAAAA,EACA9hB,KAAA+hB,YAAAA,MCHT,SAAmB9gB,EAAoBihB,GAApBliB,KAAAiB,IAAAA,EAAoBjB,KAAAkiB,MAAAA,GCR5BC,GAAwB,IAAIC,OACvC,kECAWC,GAAiB,iNCDjBC,GAAiB,0CCAjBC,GAAkB,kECAlBC,GAAqB,iFCCrBC,GAAY,sFCDZC,GAAiB,uCCQ9B,SAAAC,KAoFA,OA9EgBA,EAAAC,UAAd,SAAwB9T,GACtB,OAAkC,IAA9BuT,GAAeQ,KAAK/T,IAWZ6T,EAAAG,WAAd,SAAyBhU,GACvB,OAAkC,IAA9BwT,GAAeO,KAAK/T,IAWZ6T,EAAAI,YAAd,SAA0BjU,GACxB,OAAmC,IAA/ByT,GAAgBM,KAAK/T,IAWb6T,EAAAK,cAAd,SAA4BlU,GAC1B,OAAsC,IAAlC0T,GAAmBK,KAAK/T,IAWhB6T,EAAAM,iBAAd,SAA+BnU,GAC7B,OAAyC,IAArCqT,GAAsBU,KAAK/T,IAWnB6T,EAAAO,MAAd,SAAoBpU,GAClB,OAA6B,IAAzB2T,GAAUI,KAAK/T,IAWP6T,EAAAQ,UAAd,SAAwBrU,GACtB,OAAkC,IAA9B4T,GAAeG,KAAK/T,IAK5B6T,mBCjFA,SAAAS,KA4VA,OA/UgBA,EAAAC,OAAd,SACEC,EACAC,EACAC,EACAC,GAEA,QAHA,IAAAD,IAAAA,EAAiBrY,EAAAA,OAAOuY,WACxB,IAAAD,IAAAA,EAAyBvY,EAAAA,WAAWyY,IAEhCH,IAAWrY,EAAAA,OAAOuY,KAAM,CAC1B,GACED,IAAevY,EAAAA,WAAWyY,IAC1BJ,EAAK1jB,eAAe,SAC8B,IAAlDujB,EAAeQ,aAAaN,EAAYC,GAExC,OAAO,EACF,GACLE,IAAevY,EAAAA,WAAW1L,SAC4B,IAAtD4jB,EAAeS,iBAAiBP,EAAYC,GAE5C,OAAO,EAIX,OADAD,EAAWtf,KAAKuf,IACT,GAWKH,EAAA5X,OAAd,SACE8X,EACA9X,EACAsY,EACAC,GAJF,IAAA3e,EAAApF,KAOE,OAAKwL,GAAW8X,GAGXS,IACHA,EAAgB,IAAIC,IAGDV,EAAW9X,QAAO,SAAAtH,eAErC,IAA2B,IAAA+f,EAAAhgB,EAAA6f,GAAaI,EAAAD,EAAA1hB,QAAA2hB,EAAAvhB,KAAAuhB,EAAAD,EAAA1hB,OAAE,CAArC,IAEGuM,EAAe5K,EAFAggB,EAAA7hB,OAIf8hB,EAAS/e,EAAKgf,eAAe5Y,EAAQuY,GAE3C,GAAIjV,EAAKuV,OAAOF,IAAW,EAEzB,OAAO,oGAIX,OAAO,MApBAb,GAiCGF,EAAAvI,KAAd,SAAsByI,EAAiBgB,EAAkBjiB,GAEvD,OADeihB,EAAWzI,MAAK,SAAA3W,GAAK,OAAAA,EAAEogB,KAAcjiB,MAUxC+gB,EAAAmB,SAAd,SAA4CjB,EAAiB1N,GAE3D,OADe0N,EAAWzI,MAAK,SAAA3W,GAAK,OAAAA,EAAEyT,MAAQ/B,MAUlCwN,EAAAtR,UAAd,SAA2BwR,EAAiBC,GAE1C,OADcD,EAAWxR,WAAU,SAAA5N,GAAK,OAAAA,IAAMqf,MAWlCH,EAAAoB,OAAd,SACElB,EACAC,EACAkB,GAGA,YAHA,IAAAA,IAAAA,EAAA,GAEAnB,EAAWoB,OAAOD,EAAO,EAAGlB,IACrB,GASKH,EAAAuB,aAAd,SACErB,OACA,IAAAsB,EAAA,GAAA/Q,EAAA,EAAAA,EAAAnT,UAAAC,OAAAkT,IAAA+Q,EAAA/Q,EAAA,GAAAnT,UAAAmT,GAEAyP,EAAW3X,MAAK,SAACkZ,EAAQtlB,eACvB,IAAyB,IAAAulB,EAAA7gB,EAAA2gB,GAAWG,EAAAD,EAAAviB,QAAAwiB,EAAApiB,KAAAoiB,EAAAD,EAAAviB,OAAE,CAAjC,IAAMyiB,EAAUD,EAAA1iB,MACnB,GAAiC,kBAAtBwiB,EAAEG,EAAW/jB,KAAoB,CAC1C,IAAK4jB,EAAEG,EAAW/jB,MAAQ1B,EAAEylB,EAAW/jB,KACrC,OAAO+jB,EAAW9C,QAAUjX,EAAAA,KAAKga,WAAa,EAAI,EAC7C,GAAIJ,EAAEG,EAAW/jB,OAAS1B,EAAEylB,EAAW/jB,KAC5C,OAAO+jB,EAAW9C,QAAUjX,EAAAA,KAAKga,UAAY,GAAK,OAE/C,GACJtC,GAAUC,UAAUiC,EAAEG,EAAW/jB,OACL,iBAAtB4jB,EAAEG,EAAW/jB,KAWf,CACL,GAAI4jB,EAAEG,EAAW/jB,KAAO1B,EAAEylB,EAAW/jB,KACnC,OAAO+jB,EAAW9C,QAAUjX,EAAAA,KAAKga,WAAa,EAAI,EAC7C,GAAIJ,EAAEG,EAAW/jB,KAAO1B,EAAEylB,EAAW/jB,KAC1C,OAAO+jB,EAAW9C,QAAUjX,EAAAA,KAAKga,UAAY,GAAK,MAdpD,CACA,GACEJ,EAAEG,EAAW/jB,KAAKikB,cAAgB3lB,EAAEylB,EAAW/jB,KAAKikB,cAEpD,OAAOF,EAAW9C,QAAUjX,EAAAA,KAAKga,WAAa,EAAI,EAC7C,GACLJ,EAAEG,EAAW/jB,KAAKikB,cAAgB3lB,EAAEylB,EAAW/jB,KAAKikB,cAEpD,OAAOF,EAAW9C,QAAUjX,EAAAA,KAAKga,UAAY,GAAK,qGAUxD,OAAO,MAUG7B,EAAA+B,OAAd,SAA0C7B,EAAiBC,GAEzD,OAD0BD,EAAW9X,QAAO,SAAAtH,GAAK,OAAAA,EAAEyT,MAAQ4L,EAAK5L,QAUpDyL,EAAAgC,WAAd,SACE9B,EACA1N,GAGA,OAD0B0N,EAAW9X,QAAO,SAAAtH,GAAK,OAAAA,EAAEyT,MAAQ/B,MAS/CwN,EAAAiC,QAAd,SAAyB/B,GAMvB,IALA,IACIgC,EACAC,EAFAC,EAAelC,EAAW3iB,OAKvB,IAAM6kB,GAEXD,EAAcvZ,KAAKC,MAAMD,KAAKyZ,SAAWD,GAIzCF,EAAiBhC,EAHjBkC,GAAgB,GAIhBlC,EAAWkC,GAAgBlC,EAAWiC,GACtCjC,EAAWiC,GAAeD,EAG5B,OAAOhC,GAUKF,EAAAzX,KAAd,SAAsB2X,EAAiBriB,EAAaihB,GAClDoB,EAAW3X,MAAK,SAACkZ,EAAQtlB,GACvB,OAAKojB,GAAUC,UAAUiC,EAAE5jB,KAA2B,iBAAX4jB,EAAE5jB,GAQvC4jB,EAAE5jB,GAAO1B,EAAE0B,GACNihB,IAAUjX,EAAAA,KAAKga,WAAa,EAAI,EAC9BJ,EAAE5jB,GAAO1B,EAAE0B,GACbihB,IAAUjX,EAAAA,KAAKga,UAAY,GAAK,EAElC,EAZHJ,EAAE5jB,GAAKikB,cAAgB3lB,EAAE0B,GAAKikB,cACzBhD,IAAUjX,EAAAA,KAAKga,WAAa,EAAI,EAC9BJ,EAAE5jB,GAAKikB,cAAgB3lB,EAAE0B,GAAKikB,cAChChD,IAAUjX,EAAAA,KAAKga,UAAY,GAAK,EAElC,MAmBC7B,EAAAsC,OAAd,SACEpC,EACAC,EACAoC,QAAA,IAAAA,IAAAA,GAAA,GAEA,IAAMlB,EAAQnB,EAAWxR,WAAU,SAAA5N,GAAK,OAAAA,EAAEyT,MAAQ4L,EAAK5L,OACvD,OAAI8M,EAAQ,GACW,IAAjBkB,GACFrC,EAAWtf,KAAKuf,GACTD,GAEAA,GAGXA,EAAWmB,GAASlB,EACbD,IAaMF,EAAAgB,eAAf,SACE5Y,EACAuY,GAGA,IAAI6B,EACJ,OAFApa,EAASxL,KAAK6lB,sBAAsBra,GAE5BuY,EAAchC,aACpB,KAAK/W,EAAAA,YAAY8a,WACfF,EAAc,IAAMpa,EACpB,MACF,KAAKR,EAAAA,YAAY+a,SACfH,EAAcpa,EAAS,IACvB,MACF,QACEoa,EAAcpa,EASlB,OALIuY,EAAcjC,aAAe/W,EAAAA,WAAWib,cACjC,IAAI5D,OAAO,KAAOwD,EAAc,MAEhC,IAAIxD,OAAO,KAAOwD,EAAc,KAAM,MAWpCxC,EAAAS,iBAAf,SAAmCP,EAAiBC,eAClD,IAA6B,IAAA0C,EAAAhiB,EAAAqf,GAAU4C,EAAAD,EAAA1jB,QAAA2jB,EAAAvjB,KAAAujB,EAAAD,EAAA1jB,OAAE,CAApC,IAAM4jB,EAAcD,EAAA7jB,MACvB,GAAI+jB,EAAAA,QAAUD,EAAgB5C,GAC5B,OAAO,oGAGX,OAAO,GASMH,EAAAQ,aAAf,SAA+BN,EAAmBC,GAEhD,OADqBD,EAAWzI,MAAK,SAAA3W,GAAK,OAAAA,EAAEyT,MAAQ4L,EAAK5L,QAY5CyL,EAAAyC,sBAAf,SAAqCD,GAEnC,OADoBA,EAAYzY,QAAQ,2BAA4B,SAGxEiW,mBCnWA,SAAAiD,KA4CA,OAlCSA,EAAAC,KAAP,SAAeC,GACb,OAAOF,EAAeG,SAASD,IAQ1BF,EAAAG,SAAP,SAAmBD,GAEjB,OADiBE,EAAAA,UAAYF,IASxBF,EAAAK,YAAP,SAAmBH,GACjB,OAAAnmB,EAAA,GAAYmmB,IASPF,EAAAM,UAAP,SAAoBJ,EAAmB3T,GACrC,IAAIgU,EAAW5mB,KAAKwmB,SAASD,GAE7B,OADAK,EAAWC,EAAAA,aAAajU,EAAMgU,IAGlCP,mBChDA,SAAAS,KAaA,OAPgBA,EAAAC,YAAd,SAA0BC,EAAkBC,GAC1CA,EAAUC,SAAQ,SAAAC,GAChB3nB,OAAO4nB,oBAAoBD,EAASjnB,WAAWgnB,SAAQ,SAAAzgB,GACrDugB,EAAY9mB,UAAUuG,GAAQ0gB,EAASjnB,UAAUuG,UAIzDqgB,mBC+GE,SAAAO,EACE/b,EACAgc,QADA,IAAAhc,IAAAA,EAAA,QACA,IAAAgc,IAAAA,EAAA,CAA6B,EAAG,GAAI,GAAI,SACxC,IAAA1C,EAAA,GAAA/Q,EAAA,EAAAA,EAAAnT,UAAAC,OAAAkT,IAAA+Q,EAAA/Q,EAAA,GAAAnT,UAAAmT,GA/GK7T,KAAAunB,mBAAqB,IAAI3iB,EAAAA,QA4ExB5E,KAAAwnB,WAAa,EAGbxnB,KAAAynB,UAAY,EAkBZznB,KAAA0nB,eAA2B,GAG3B1nB,KAAA2nB,eAAgC,IAAI3D,GAa1ChkB,KAAKynB,UAAYnc,EACjBtL,KAAK4nB,iBAAmBN,EACxBtnB,KAAK6nB,aAAejD,EA2NxB,OA3UEplB,OAAAgC,eAAW6lB,EAAAnnB,UAAA,QAAK,KAAhB,WACE,OAAOF,KAAK8nB,wCAIdtoB,OAAAgC,eAAW6lB,EAAAnnB,UAAA,YAAS,KAApB,WACE,QAAOF,KAAK8nB,wCAIdtoB,OAAAgC,eAAW6lB,EAAAnnB,UAAA,SAAM,KAAjB,WACE,OAAOF,KAAK+nB,aAId,SAAkBpnB,GAChBX,KAAK+nB,QAAUpnB,mCAIjBnB,OAAAgC,eAAW6lB,EAAAnnB,UAAA,YAAS,KAApB,WACE,OAAOF,KAAKwnB,gBAId,SAAqBQ,GACnBhoB,KAAKwnB,WAAaQ,mCAIpBxoB,OAAAgC,eAAW6lB,EAAAnnB,UAAA,WAAQ,KAAnB,WACE,OAAOF,KAAKynB,eAId,SAAoBnc,GAClBtL,KAAKynB,UAAYnc,mCAInB9L,OAAAgC,eAAW6lB,EAAAnnB,UAAA,oBAAiB,KAA5B,WACE,OAAOF,KAAKioB,oDAIdzoB,OAAAgC,eAAW6lB,EAAAnnB,UAAA,kBAAe,KAA1B,WACE,OAAOF,KAAK4nB,kDAIdpoB,OAAAgC,eAAW6lB,EAAAnnB,UAAA,SAAM,KAAjB,WACE,OAAOF,KAAKkoB,yCAId1oB,OAAAgC,eAAW6lB,EAAAnnB,UAAA,cAAW,KAAtB,WACE,OAAOF,KAAK6nB,8CAqEPR,EAAAnnB,UAAAmjB,OAAP,SAAcjM,EAAW4Q,GAKvB,OAJI5Q,GACFpX,KAAKmoB,MAAMnkB,KAAKoT,GAGXpX,KAAKooB,SAASJ,IAShBX,EAAAnnB,UAAAmoB,WAAP,SAAkBzS,EAAYoS,GAI5B,OAHIpS,IACF5V,KAAKmoB,MAAQnoB,KAAKmoB,MAAM3c,QAAO,SAAAzI,GAAK,OAAAA,EAAE4U,MAAQ/B,MAEzC5V,KAAKooB,SAASJ,IAShBX,EAAAnnB,UAAA2a,KAAP,SAAYyJ,EAAkBjiB,GAE5B,OADe+gB,GAAevI,KAAK7a,KAAKmoB,MAAO7D,EAAUjiB,IASpDglB,EAAAnnB,UAAAooB,QAAP,SAAe1S,GAEb,OADewN,GAAemB,SAASvkB,KAAKmoB,MAAOvS,IAO9CyR,EAAAnnB,UAAAqoB,QAAP,WAEE,OADAvoB,KAAKwnB,WAAa,EACXxnB,KAAKooB,YAIPf,EAAAnnB,UAAAsoB,OAAP,WACE,IAAMC,EAAYzc,KAAKC,MAAMjM,KAAK+nB,QAAU/nB,KAAKynB,WACjDznB,KAAKwnB,WAAaiB,EAAY,EAC1BzoB,KAAKwnB,WAAa,IACpBxnB,KAAKwnB,WAAa,IAUfH,EAAAnnB,UAAAskB,OAAP,SAAcpN,EAAW4Q,GAIvB,OAHI5Q,GACFpX,KAAKmoB,MAAMO,QAAQtR,GAEdpX,KAAKooB,SAASJ,IAQhBX,EAAAnnB,UAAAyoB,SAAP,SAAgBjhB,GAKd,OAJA1H,KAAKmoB,MAAQzgB,EACb1H,KAAK+nB,QAAUrgB,EAAK/G,OACpBX,KAAKkoB,QAA0B,IAAhBxgB,EAAK/G,OACCX,KAAKooB,YAQff,EAAAnnB,UAAA0oB,aAAb,SAA0BC,6EACxBA,EAASC,gBAAkB9oB,KAAKynB,YAAcoB,EAASvd,SACvDtL,KAAK+nB,QAAUc,EAASloB,OACxBX,KAAKwnB,WAAaqB,EAASb,UAC3BhoB,KAAKynB,UAAYoB,EAASvd,SAC1BtL,KAAKioB,mBAAqBY,EAASE,kBACnC/oB,KAAKunB,mBAAmBhlB,KAAKsmB,cAQxBxB,EAAAnnB,UAAAkoB,SAAP,SAAgBJ,GACdhoB,KAAK2L,OACL3L,KAAKgpB,cAAgBhpB,KAAKwL,SAC1BxL,KAAK+nB,QAAU/nB,KAAKgpB,cAAcroB,YAChBqW,IAAdgR,IACFhoB,KAAKwnB,WAAaQ,GAEpB,IAAIpZ,EAAQ5O,KAAKwnB,WAAaxnB,KAAKynB,UAC/B7Y,GAAS5O,KAAKW,SAChBX,KAAKwnB,aACDxnB,KAAKgoB,UAAY,IACnBhoB,KAAKgoB,UAAY,GAEnBpZ,EAAQ5O,KAAKwnB,WAAaxnB,KAAKynB,WAEjC,IAAM5Y,EAAMD,EAAQ5O,KAAKynB,UAEzB,OADqBwB,EAAAA,MAAQjpB,KAAKgpB,cAAepa,EAAOC,IAQnDwY,EAAAnnB,UAAAgpB,eAAP,eAAsB,IAAAtE,EAAA,GAAA/Q,EAAA,EAAAA,EAAAnT,UAAAC,OAAAkT,IAAA+Q,EAAA/Q,GAAAnT,UAAAmT,GACpB7T,KAAK6nB,aAAejD,GAOfyC,EAAAnnB,UAAAipB,iBAAP,eAAwB,IAAArF,EAAA,GAAAjQ,EAAA,EAAAA,EAAAnT,UAAAC,OAAAkT,IAAAiQ,EAAAjQ,GAAAnT,UAAAmT,GACtB7T,KAAK0nB,eAAiB5D,GAQjBuD,EAAAnnB,UAAAkpB,iBAAP,SACEtH,EACAC,GAEA/hB,KAAK2nB,eAAiB,IAAI3D,GAAclC,EAAYC,IAQ/CsF,EAAAnnB,UAAAmpB,SAAP,SAAgB9d,GAEd,OADAvL,KAAK8nB,OAASvc,EACPvL,KAAKooB,YASPf,EAAAnnB,UAAAwlB,OAAP,SAActO,EAAW4Q,GACvB,IAAMvD,EAAQzkB,KAAKmoB,MAAMrW,WAAU,SAAA5N,GAAK,OAAAA,EAAEyT,MAAQP,EAAOO,OAOzD,OANI8M,EAAQ,EACVzkB,KAAKmoB,MAAMnkB,KAAKoT,GAGhBpX,KAAKmoB,MAAM1D,GAASrN,EAEfpX,KAAKooB,SAASJ,IAMfX,EAAAnnB,UAAAsL,OAAR,WACE,OAAKxL,KAAK8nB,QAAW9nB,KAAKmoB,MAGL/E,GAAe5X,OAClCxL,KAAKmoB,MACLnoB,KAAK8nB,OACL9nB,KAAK0nB,eACL1nB,KAAK2nB,gBANE3nB,KAAKmoB,OAcRd,EAAAnnB,UAAAyL,KAAR,WACO3L,KAAK6nB,cAGL7nB,KAAKmoB,OAGV/E,GAAeuB,aAAY9jB,MAA3BuiB,GvFhNG,WACH,IAAK,IAAI/e,EAAK,GAAI7D,EAAI,EAAGA,EAAIE,UAAUC,OAAQH,IAC3C6D,EAAKA,EAAGia,OAAOla,EAAO1D,UAAUF,KACpC,OAAO6D,EuF6MOilB,CAAA,CAActpB,KAAKmoB,OAAUnoB,KAAK6nB,gBAEpDR,mBC5VA,SAAAkC,KAYA,OAPgBA,EAAAC,WAAd,WAEE,IADA,IAAI5T,EAAK6T,EAAAA,WACF7T,EAAG8T,QAAQ,MAAQ,GAAK9T,EAAG8T,QAAQ,MAAQ,GAChD9T,EAAK6T,EAAAA,WAEP,OAAO7T,GAEX2T,mBCbA,SAAAI,IACS3pB,KAAAwI,aAAe,IAAIC,EAAalE,EAAAA,aAAaqE,IAOtD,OALS+gB,EAAAzpB,UAAA6J,KAAP,WAAA,IAAA3E,EAAApF,KACE,MAAO,CACL4pB,YAAa,WAAM,OAAA9Q,EAAAA,GAAG1T,EAAKoD,iBAGjCmhB,moCCTkD,CAChD,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,2qBCxDoC,SAAChkB,GACrC,IACE,IAAMtD,EAAQsD,EAAQtD,MAEtB,IAAkC,IAA9B,cAAcwgB,KAAKxgB,GACrB,MAAO,CACLwnB,UAAW,CACTC,SAAS,IAIf,IAAkC,IAA9B,cAAcjH,KAAKxgB,GACrB,MAAO,CACL0nB,UAAW,CACTD,SAAS,IAIf,IAAkC,IAA9B,cAAcjH,KAAKxgB,GACrB,MAAO,CACL2nB,OAAQ,CACNF,SAAS,IAIf,IAEE,IADA,yDAAyDjH,KAAKxgB,GAG9D,MAAO,CACL4nB,iBAAkB,CAChBH,SAAS,IAKf,OAAIznB,EAAM1B,OAAS,EACV,CACLupB,UAAW,CACTJ,SAAS,IAIXznB,EAAM1B,OAAS,GACV,CACLwpB,UAAW,CACTL,SAAS,IAIR,GACP,MAAOxlB,GACP,MAAO,CACL8lB,gBAAiB,CACfN,SAAS","sourcesContent":["/*! *****************************************************************************\r\nCopyright (c) Microsoft Corporation.\r\n\r\nPermission to use, copy, modify, and/or distribute this software for any\r\npurpose with or without fee is hereby granted.\r\n\r\nTHE SOFTWARE IS PROVIDED \"AS IS\" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH\r\nREGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY\r\nAND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,\r\nINDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM\r\nLOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR\r\nOTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR\r\nPERFORMANCE OF THIS SOFTWARE.\r\n***************************************************************************** */\r\n/* global Reflect, Promise */\r\n\r\nvar extendStatics = function(d, b) {\r\n    extendStatics = Object.setPrototypeOf ||\r\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n    return extendStatics(d, b);\r\n};\r\n\r\nexport function __extends(d, b) {\r\n    extendStatics(d, b);\r\n    function __() { this.constructor = d; }\r\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n}\r\n\r\nexport var __assign = function() {\r\n    __assign = Object.assign || function __assign(t) {\r\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\r\n            s = arguments[i];\r\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\r\n        }\r\n        return t;\r\n    }\r\n    return __assign.apply(this, arguments);\r\n}\r\n\r\nexport function __rest(s, e) {\r\n    var t = {};\r\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\r\n        t[p] = s[p];\r\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\r\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\r\n            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\r\n                t[p[i]] = s[p[i]];\r\n        }\r\n    return t;\r\n}\r\n\r\nexport function __decorate(decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n}\r\n\r\nexport function __param(paramIndex, decorator) {\r\n    return function (target, key) { decorator(target, key, paramIndex); }\r\n}\r\n\r\nexport function __metadata(metadataKey, metadataValue) {\r\n    if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(metadataKey, metadataValue);\r\n}\r\n\r\nexport function __awaiter(thisArg, _arguments, P, generator) {\r\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n}\r\n\r\nexport function __generator(thisArg, body) {\r\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\r\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\r\n    function verb(n) { return function (v) { return step([n, v]); }; }\r\n    function step(op) {\r\n        if (f) throw new TypeError(\"Generator is already executing.\");\r\n        while (_) try {\r\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\r\n            if (y = 0, t) op = [op[0] & 2, t.value];\r\n            switch (op[0]) {\r\n                case 0: case 1: t = op; break;\r\n                case 4: _.label++; return { value: op[1], done: false };\r\n                case 5: _.label++; y = op[1]; op = [0]; continue;\r\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\r\n                default:\r\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\r\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\r\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\r\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\r\n                    if (t[2]) _.ops.pop();\r\n                    _.trys.pop(); continue;\r\n            }\r\n            op = body.call(thisArg, _);\r\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\r\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\r\n    }\r\n}\r\n\r\nexport function __createBinding(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    o[k2] = m[k];\r\n}\r\n\r\nexport function __exportStar(m, exports) {\r\n    for (var p in m) if (p !== \"default\" && !exports.hasOwnProperty(p)) exports[p] = m[p];\r\n}\r\n\r\nexport function __values(o) {\r\n    var s = typeof Symbol === \"function\" && Symbol.iterator, m = s && o[s], i = 0;\r\n    if (m) return m.call(o);\r\n    if (o && typeof o.length === \"number\") return {\r\n        next: function () {\r\n            if (o && i >= o.length) o = void 0;\r\n            return { value: o && o[i++], done: !o };\r\n        }\r\n    };\r\n    throw new TypeError(s ? \"Object is not iterable.\" : \"Symbol.iterator is not defined.\");\r\n}\r\n\r\nexport function __read(o, n) {\r\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\r\n    if (!m) return o;\r\n    var i = m.call(o), r, ar = [], e;\r\n    try {\r\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\r\n    }\r\n    catch (error) { e = { error: error }; }\r\n    finally {\r\n        try {\r\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\r\n        }\r\n        finally { if (e) throw e.error; }\r\n    }\r\n    return ar;\r\n}\r\n\r\nexport function __spread() {\r\n    for (var ar = [], i = 0; i < arguments.length; i++)\r\n        ar = ar.concat(__read(arguments[i]));\r\n    return ar;\r\n}\r\n\r\nexport function __spreadArrays() {\r\n    for (var s = 0, i = 0, il = arguments.length; i < il; i++) s += arguments[i].length;\r\n    for (var r = Array(s), k = 0, i = 0; i < il; i++)\r\n        for (var a = arguments[i], j = 0, jl = a.length; j < jl; j++, k++)\r\n            r[k] = a[j];\r\n    return r;\r\n};\r\n\r\nexport function __await(v) {\r\n    return this instanceof __await ? (this.v = v, this) : new __await(v);\r\n}\r\n\r\nexport function __asyncGenerator(thisArg, _arguments, generator) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var g = generator.apply(thisArg, _arguments || []), i, q = [];\r\n    return i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i;\r\n    function verb(n) { if (g[n]) i[n] = function (v) { return new Promise(function (a, b) { q.push([n, v, a, b]) > 1 || resume(n, v); }); }; }\r\n    function resume(n, v) { try { step(g[n](v)); } catch (e) { settle(q[0][3], e); } }\r\n    function step(r) { r.value instanceof __await ? Promise.resolve(r.value.v).then(fulfill, reject) : settle(q[0][2], r); }\r\n    function fulfill(value) { resume(\"next\", value); }\r\n    function reject(value) { resume(\"throw\", value); }\r\n    function settle(f, v) { if (f(v), q.shift(), q.length) resume(q[0][0], q[0][1]); }\r\n}\r\n\r\nexport function __asyncDelegator(o) {\r\n    var i, p;\r\n    return i = {}, verb(\"next\"), verb(\"throw\", function (e) { throw e; }), verb(\"return\"), i[Symbol.iterator] = function () { return this; }, i;\r\n    function verb(n, f) { i[n] = o[n] ? function (v) { return (p = !p) ? { value: __await(o[n](v)), done: n === \"return\" } : f ? f(v) : v; } : f; }\r\n}\r\n\r\nexport function __asyncValues(o) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var m = o[Symbol.asyncIterator], i;\r\n    return m ? m.call(o) : (o = typeof __values === \"function\" ? __values(o) : o[Symbol.iterator](), i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i);\r\n    function verb(n) { i[n] = o[n] && function (v) { return new Promise(function (resolve, reject) { v = o[n](v), settle(resolve, reject, v.done, v.value); }); }; }\r\n    function settle(resolve, reject, d, v) { Promise.resolve(v).then(function(v) { resolve({ value: v, done: d }); }, reject); }\r\n}\r\n\r\nexport function __makeTemplateObject(cooked, raw) {\r\n    if (Object.defineProperty) { Object.defineProperty(cooked, \"raw\", { value: raw }); } else { cooked.raw = raw; }\r\n    return cooked;\r\n};\r\n\r\nexport function __importStar(mod) {\r\n    if (mod && mod.__esModule) return mod;\r\n    var result = {};\r\n    if (mod != null) for (var k in mod) if (Object.hasOwnProperty.call(mod, k)) result[k] = mod[k];\r\n    result.default = mod;\r\n    return result;\r\n}\r\n\r\nexport function __importDefault(mod) {\r\n    return (mod && mod.__esModule) ? mod : { default: mod };\r\n}\r\n\r\nexport function __classPrivateFieldGet(receiver, privateMap) {\r\n    if (!privateMap.has(receiver)) {\r\n        throw new TypeError(\"attempted to get private field on non-instance\");\r\n    }\r\n    return privateMap.get(receiver);\r\n}\r\n\r\nexport function __classPrivateFieldSet(receiver, privateMap, value) {\r\n    if (!privateMap.has(receiver)) {\r\n        throw new TypeError(\"attempted to set private field on non-instance\");\r\n    }\r\n    privateMap.set(receiver, value);\r\n    return value;\r\n}\r\n","/**\n * Enumeration representing return values from dialogs\n */\nexport enum DialogButton {\n  /** An error occurred in the dialog */\n  Error = -1,\n\n  /** The user clicked the OK button */\n  OK = 0,\n\n  /** The user clicked the cancel button */\n  Cancel = 1\n}\n","import { Component, OnDestroy } from '@angular/core';\nimport { takeUntil, debounceTime, distinctUntilChanged } from 'rxjs/operators';\nimport { AbstractControl } from '@angular/forms';\nimport { Subject } from 'rxjs';\n\n/**\n * Base Leatherman component\n */\n@Component({\n  selector: 'lm-base-component',\n  template: 'No UI Here'\n})\nexport class BaseComponent implements OnDestroy {\n  /** Boolean indicating whether the component has been initialized */\n  public isInitialized = false;\n\n  /** Boolean indicating whether the component's data is loading */\n  public isLoading = false;\n\n  /** An RXJS subject used to destroy subscriptions when the component is destroyed */\n  public destroySubject$: Subject<void> = new Subject();\n\n  // constructor\n  constructor() { }\n\n  /**\n   * Trigger the destroy subject  when the component is destroyed\n   */\n  public ngOnDestroy() {\n    this.destroySubject$.next();\n  }\n\n  protected decodeURIComponent(uriComponent: string): string {\n    if (!uriComponent) {\n      return uriComponent;\n    }\n    return decodeURIComponent(uriComponent);\n  }\n\n  protected encodeURIComponent(uriComponent: string): string {\n    if (!uriComponent) {\n      return uriComponent;\n    }\n    return encodeURIComponent(uriComponent);\n  }\n\n  /**\n   * Subscribe to a subject\n   * @param subject$ - The subject to subscribe to\n   * @param callback - The callback method to call when the subject is triggered\n   * @returns Void\n   */\n  protected subscribeSubject<T>(\n    subject$: Subject<T>,\n    callback: (result: any) => void\n  ) {\n    subject$.pipe(takeUntil(this.destroySubject$)).subscribe(async result => {\n      await callback(result);\n    });\n  }\n\n  /**\n   * Subscribe to a subject synchronously\n   * @param subject$ - The subject to subscribe to\n   * @param callback - The callback method to call when the subject is triggered\n   * @returns Void\n   */\n  protected subscribeSubjectSync<T>(\n    subject$: Subject<T>,\n    callback: (result: any) => void\n  ) {\n    subject$.pipe(takeUntil(this.destroySubject$)).subscribe(result => {\n      callback(result);\n    });\n  }\n\n  /**\n   * Subscribe to value change events for a control\n   * @param control - The control to listen to\n   * @param callback - The functiion to call when the control value changes\n   */\n  protected subscribeValueChanges(\n    control: AbstractControl,\n    callback: (result: any) => void\n  ) {\n    control.valueChanges\n      .pipe(\n        debounceTime(400),\n        distinctUntilChanged()\n      )\n      .pipe(takeUntil(this.destroySubject$))\n      .subscribe(async result => {\n        await callback(result);\n      });\n  }\n}\n","import { Pipe, PipeTransform } from '@angular/core';\nimport { DomSanitizer } from '@angular/platform-browser';\n\n/**\n * A pipe to transform HTML to safe HTML\n */\n@Pipe({\n  name: 'safeHtml'\n})\nexport class SafeHtmlPipe implements PipeTransform {\n  /**\n   * Constructor\n   * @param sanitizer - A reference to the DomSanitizer service\n   */\n  constructor(private sanitizer: DomSanitizer) {}\n\n  /**\n   * Transform the passed HTML\n   * @param html - The HTML to transform\n   * @returns The transformed HTML\n   */\n  public transform(html) {\n    const sanitizedHtml = this.sanitizer.bypassSecurityTrustHtml(html);\n    return sanitizedHtml;\n  }\n}\n","import { InjectionToken } from '@angular/core';\nimport { ILeathermanAppConfig } from '../app.config';\n\nexport const LeathermanAppConfigInjectionToken = new InjectionToken<\n  ILeathermanAppConfig\n>('LeathermanAppConfig');\n","import { InjectionToken } from '@angular/core';\nimport { IErrorDialogService } from '../../dialogs/error/_interfaces/error-dialog-service.interface';\n\nexport const ErrorDialogServiceInjectionToken = new InjectionToken<\n  IErrorDialogService\n>('ErrorDialogService');\n","import { InjectionToken } from '@angular/core';\nimport { IConfirmDialogService } from '../../dialogs/confirm/_interfaces/confirm-dialog-service.interface';\n\nexport const ConfirmDialogServiceInjectionToken = new InjectionToken<\n  IConfirmDialogService\n>('ConfirmDialogService');\n","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { HttpClientModule } from '@angular/common/http';\nimport { ReactiveFormsModule } from '@angular/forms';\nimport { RouterModule } from '@angular/router';\n\n@NgModule({\n  imports: [\n    CommonModule,\n    RouterModule,\n    HttpClientModule,\n    ReactiveFormsModule,\n  ],\n  exports: [\n    ReactiveFormsModule,\n    CommonModule,\n    RouterModule,\n    HttpClientModule,\n    ReactiveFormsModule,\n  ]\n})\n\n/**\n * A module importing and exporting common Angular modules\n */\nexport class AngularModule {}\n","import { Component, OnInit, Inject, Input } from '@angular/core';\nimport { ErrorDialogData } from './_models/error-dialog-data.model';\nimport { NgbActiveModal } from '@ng-bootstrap/ng-bootstrap';\n\n/**\n * A dialog component to display an error message\n */\n@Component({\n  selector: 'lm-error-dialog',\n  templateUrl: './error-dialog.component.html',\n  styleUrls: ['./error-dialog.component.scss']\n})\nexport class ErrorDialogComponent {\n  /** The title of the error dialog */\n  public title: string;\n\n  /** The dialog error message */\n  public message: string;\n\n  @Input() public data: ErrorDialogData\n  /**\n   * @param activeModal - A reference to the dialog\n   */\n  constructor(\n    public activeModal: NgbActiveModal,\n  ) {\n  }\n\n  ngOnInit() {\n    this.title = this.data.title;\n    this.message = this.data.message;\n  }\n\n  /**\n   * Method called when the dialog is cancelled\n   */\n  onClose() {\n    this.activeModal.close();\n  }\n}\n","import { DialogButton } from '../../enums/dialog-button.enum';\n\n/**\n * A class to store the results from a dialog\n */\nexport class DialogResult<T> {\n  /**\n   * @param button - The clicked button\n   * @param data - The data returned by the dialog\n   * @param data2 - Additional data returned by the diaoig\n   * @param data3 - Additional data returned by the dialog\n   */\n  constructor(\n    public button: DialogButton,\n    public data?: T,\n    public data2?: any,\n    public data3?: any\n  ) {}\n}\n","/**\n * Enumeration representing security options for an API endpoint\n */\nexport enum Secure {\n  /** The endpoint request a JWT token */\n  true,\n\n  /** The endpoint is not secure */\n  false,\n\n  /** The endpoint is secured with an API key */\n  api\n}\n","/**\n * Enumeration representing controller result statuses\n */\nexport enum Status {\n  /** The request succeeded */\n  OK = 200,\n\n  /** The request succeeded and a record was created */\n  Created = 201,\n\n  /** The request succeeded but there was not data to return */\n  NoData = 204,\n\n  /** The request did not result in any data being changed */\n  NotModifed = 304,\n\n  /** The request was invalid */\n  BadRequest = 400,\n\n  /** The user is not authorized to make the request */\n  NotAuthorized = 401,\n\n  /** ;-) */\n  ImATeapot = 418,\n\n  /** A server error occurred */\n  Error = 500\n}\n","/**\n * Enumeration representing test artifact states\n */\nexport enum TestArtifact {\n  /** A test artifact */\n  true,\n\n  /** Not a test artifact */\n  false\n}\n","import { Component, OnInit, Inject, Input } from '@angular/core';\nimport { NgbActiveModal } from '@ng-bootstrap/ng-bootstrap';\nimport { ConfirmDialogData } from './_models/confirm-dialog-data.model';\nimport { DialogResult } from '../../../models/dialog/dialog-result.model';\nimport { DialogButton } from '../../../enums/dialog-button.enum';\n/**\n * A dialog component to prompt the user for a YES/NO answer\n */\n@Component({\n  selector: 'lm-confirm-dialog',\n  templateUrl: './confirm-dialog.component.html',\n  styleUrls: ['./confirm-dialog.component.scss']\n})\nexport class ConfirmDialogComponent implements OnInit {\n  @Input() public dialogData: ConfirmDialogData\n  constructor(\n    public activeModal: NgbActiveModal\n  ) {\n  }\n\n  ngOnInit() {\n  }\n\n  public onCancel() {\n    const dialogResult = new DialogResult(DialogButton.Cancel);\n    this.activeModal.close(dialogResult);\n  }\n\n  public onConfirm(): void {\n    const dialogResult = new DialogResult(DialogButton.OK);\n    this.activeModal.close(dialogResult);\n  }\n}\n","import { NgModule, ModuleWithProviders } from '@angular/core';\nimport { BaseComponent } from './components/base-component/base.component';\nimport { SafeHtmlPipe } from './util/pipes/safe-html.pipe';\nimport { ILeathermanAppConfig } from './config/app.config';\nimport { LeathermanAppConfigInjectionToken } from './config/injection-tokens/leatherman-app-config.injection-token';\nimport { ErrorDialogServiceInjectionToken } from './config/injection-tokens/error-dialog-service.injection-token';\nimport { ConfirmDialogServiceInjectionToken } from './config/injection-tokens/confirm-dialog-service.injection-token';\nimport { AngularModule } from './angular.module';\nimport { ErrorDialogComponent } from './dialogs/error/error-dialog/error-dialog.component';\nimport { ConfirmDialogComponent } from './dialogs/confirm/confirm-dialog/confirm-dialog.component';\n\n@NgModule({\n  imports: [AngularModule],\n  declarations: [\n    SafeHtmlPipe,\n    BaseComponent,\n    ErrorDialogComponent,\n    ConfirmDialogComponent,\n  ],\n  exports: [\n    SafeHtmlPipe,\n    BaseComponent,\n    ErrorDialogComponent,\n    ConfirmDialogComponent,\n  ]\n})\n\n/**\n * A module declaring and exporting Leatherman components\n */\nexport class LeathermanModule {\n  static forRoot(\n    appConfig: ILeathermanAppConfig,\n    errorDialogService: any,\n    confirmDialogService: any\n  ): ModuleWithProviders<LeathermanModule> {\n    return {\n      ngModule: LeathermanModule,\n      providers: [\n        {\n          provide: LeathermanAppConfigInjectionToken,\n          useValue: appConfig\n        },\n        {\n          provide: ErrorDialogServiceInjectionToken,\n          useClass: errorDialogService\n        },\n        {\n          provide: ConfirmDialogServiceInjectionToken,\n          useClass: confirmDialogService\n        }\n      ]\n    };\n  }\n}\n","/**\n * A class to store confirm dialog data\n */\nexport class ConfirmDialogData {\n  /**\n   * @param title - The title of the confirm dialog\n   * @param message - The message to display in the confirm dialog\n   */\n  constructor(public title: string, public message: string) {}\n}\n","import { Injectable } from \"@angular/core\";\nimport { NgbModal } from \"@ng-bootstrap/ng-bootstrap\";\nimport { ConfirmDialogComponent } from \"./confirm-dialog/confirm-dialog.component\";\nimport { ConfirmDialogData } from \"./confirm-dialog/_models/confirm-dialog-data.model\";\nimport { DialogResult } from \"../../models/dialog/dialog-result.model\";\nimport { IConfirmDialogService } from \"./_interfaces/confirm-dialog-service.interface\";\nimport { DialogButton } from \"../../enums/dialog-button.enum\";\n\n@Injectable({\n  providedIn: \"root\",\n})\nexport class ConfirmDialogService implements IConfirmDialogService {\n  constructor(public dialog: NgbModal) {}\n\n  public async openConfirmDialog(\n    title: string,\n    message: string\n  ): Promise<DialogResult<DialogButton>> {\n    const confirmDialogData = new ConfirmDialogData(title, message);\n    const dialogRef = this.dialog.open(ConfirmDialogComponent, {\n      backdrop: \"static\",\n      keyboard: false,\n    });\n    dialogRef.componentInstance.dialogData = confirmDialogData;\n    const result: DialogResult<DialogButton> = await dialogRef.result;\n    return result;\n  }\n}\n","import { Injectable } from '@angular/core';\nimport { ConfirmDialogService } from '../confirm-dialog.service';\nimport { DialogResult } from '../../../models/dialog/dialog-result.model';\nimport { DialogButton } from '../../../enums/dialog-button.enum';\nimport { NgbModal } from '@ng-bootstrap/ng-bootstrap';\n\n/**\n * A service to mock the confirm dialog service\n */\n@Injectable({\n  providedIn: 'root'\n})\nexport class MockConfirmDialogService extends ConfirmDialogService {\n  /**\n   * @param dialog - A reference to the NgbModal service\n   */\n  constructor(dialog: NgbModal) { \n    super(dialog);\n  }\n\n  /**\n   * Display a confirm dialog\n   * @param title - The title of the confirm dialog\n   * @param message - The message to display in the confirm dialog\n   */\n  public async openConfirmDialog(\n    title: string,\n    message: string\n  ): Promise<DialogResult<DialogButton>> {\n    console.log('Using mock confirm dialog service.');\n    return Promise.resolve(new DialogResult<DialogButton>(DialogButton.OK));\n  }\n}\n","/**\n * A class to store error/confirm dialog data\n */\nexport class ErrorDialogData {\n  /**\n   * @param title - The title of the error dialog\n   * @param message - The message to display in the error dialog\n   */\n  constructor(public title: string, public message: string) {}\n}\n","import { Injectable } from '@angular/core';\nimport { ErrorDialogComponent } from './error-dialog/error-dialog.component';\nimport { ErrorDialogData } from './error-dialog/_models/error-dialog-data.model';\nimport { DialogResult } from '../../models/dialog/dialog-result.model';\nimport { DialogButton } from '../../enums/dialog-button.enum';\nimport { IErrorDialogService } from './_interfaces/error-dialog-service.interface';\nimport { NgbModal } from '@ng-bootstrap/ng-bootstrap';\n\n/**\n *  A service to manage and display error dialogs\n */\n@Injectable({\n  providedIn: 'root'\n})\nexport class ErrorDialogService implements IErrorDialogService {\n  constructor(public dialog: NgbModal) { }\n\n  /**\n   * Open an error dialog\n   * @param title - The title of the error dialog\n   * @param message - The message to display to the user\n   */\n  public async openErrorDialog(\n    title: string,\n    message: string\n  ): Promise<DialogResult<null>> {\n    const dialogData = new ErrorDialogData(title, message);\n\n    const dialogRef = this.dialog.open(ErrorDialogComponent);\n    dialogRef.componentInstance.data = dialogData;\n    \n    return new DialogResult(DialogButton.OK);\n  }\n}\n","import { Injectable } from '@angular/core';\nimport { ErrorDialogService } from '../error-dialog.service';\nimport { DialogResult } from '../../../models/dialog/dialog-result.model';\nimport { DialogButton } from '../../../enums/dialog-button.enum';\n\n/**\n * A service to mock the confirm dialog service\n */\n@Injectable({\n  providedIn: 'root'\n})\nexport class MockErrorDialogService extends ErrorDialogService {\n  /**\n   * Open an error dialog\n   * @param title - The title of the error dialog\n   * @param message - The message to display to the user\n   */\n  public async openErrorDialog(\n    title: string,\n    message: string\n  ): Promise<DialogResult<null>> {\n    console.log('Using mock error dialog service.');\n    console.log('Title: ' + title);\n    console.log('Title: ' + message);\n    return Promise.resolve(new DialogResult<null>(DialogButton.OK));\n  }\n}\n","/**\n * An enum that represents filter cases\n */\nexport enum FilterCase {\n  /** Case insensitive */\n  CaseInsensitive,\n\n  /** Case sensitive */\n  CaseSensitive\n}\n","/** An enum that represents filter scope */\nexport enum FilterScope {\n  /** The filtered content must contain the filter text */\n  Contains,\n\n  /** The filtered content must start with the filter text */\n  StartsWith,\n\n  /** The filtered content must end with the filte text */\n  EndsWith\n}\n","/**\n * An enum representing sort order\n */\nexport enum Sort {\n  /** Sort ascending */\n  Ascending,\n\n  /** Sort descending */\n  Descending\n}\n","/**\n * An enum representing the way the collection utility determines uniqueness\n */\nexport enum UniqueMode {\n  /** Use the object's ID to determine uniqueness */\n  Id,\n\n  /** Use the object's properties to determine uniqueness */\n  Object\n}\n","/**\n * An enum representing whether a collection utility action should enforce uniqueness\n */\nexport enum Unique {\n  /** Enforce unqiueness */\n  True,\n\n  /** Do not enforce uniqueness */\n  False\n}\n","import { Request } from 'express';\n\nexport class GetOptions {\n  public query = '';\n  public filter = '';\n  public skip = 0;\n  public take = 10;\n  public sort = '';\n  public sortColumn = '';\n  public sortAscending = true;\n\n  constructor(currentPage: number = 1, pageSize: number = 10) {\n    this.take = pageSize;\n    this.skip = (currentPage - 1) * pageSize;\n  }\n\n  public static calculatePageCount(rowCount: number, pageSize: number) {\n    const pageCount = Math.floor((rowCount - 1) / pageSize) + 1;\n    return pageCount;\n  }\n\n  public setSort(field: string, ascending: boolean = true) {\n    this.sortColumn = field;\n    this.sortAscending = ascending;\n    if (ascending === true) {\n      this.sort = field + ':ASC';\n    } else {\n      this.sort = field + ':DESC';\n    }\n  }\n}\n","import { AuthenticationTokenExpiry } from './_submodels/authentication-token-expiry.mode';\n\nexport class AuthenticationDetails {\n  public authenticated: boolean;\n  public emailVerified: boolean;\n  public userId: string;\n  public roles: string[] = [];\n  public token: string;\n  public expiry: AuthenticationTokenExpiry;\n}\n","export class AuthenticationTokenExpiry {\n  public expiryDate: Date;\n  public expirySeconds: number;\n}\n","/**\n * A class to store login request data\n */\nexport class LoginRequest {\n  constructor(\n    /** The user's email address */\n    public email: string,\n    /** The user's password */\n    public password: string\n  ) {}\n}\n","import { TestArtifact } from '../../enums/test-artifact.enum';\n\n/**\n * The base model class\n */\nexport class BaseModel {\n  /** The ID of the model */\n  public _id: string;\n\n  /** The date the model was creatd */\n  public dateCreated: Date;\n\n  /** The date the model was last modified */\n  public dateModified: Date;\n\n  /** Boolean indicating whether the model is a test artifact */\n  public testArtifact?: boolean;\n\n  /**\n   * @param testArtifact - Enum indicating whether the model is a test artifact\n   */\n\n  constructor(testArtifact?: TestArtifact) {\n    if (testArtifact === TestArtifact.true) {\n      this.testArtifact = true;\n    }\n  }\n}\n","export class SearchFacetField {\n  public excludedFacet: boolean;\n\n  constructor(\n    public field: string,\n    public label: string,\n    public token: string,\n    public isString: boolean,\n    public facetLabelCallback: (\n      field: string,\n      label: string,\n      token: string,\n      value: string\n    ) => any\n  ) {}\n}\n","export class SearchFacetFilterProperties {\n  constructor(\n    public field: string,\n    public label: string,\n    public isString: boolean\n  ) {}\n}\n","export class SearchFacetFilter {\n  public token: string;\n  public value: string;\n  public label: string;\n  public query: string;\n  public field: string;\n  public excludedFacet: boolean;\n  public isString: boolean;\n\n  constructor() {\n    this.token = '';\n    this.value = '';\n    this.label = '';\n    this.query = '';\n    this.field = '';\n    this.excludedFacet = false;\n    this.isString = false;\n  }\n}\n","import { SearchFacetField } from './search-facet-field.model';\nimport { SearchFacetRangeQuery } from './search-facet-range-query.model';\n\nexport class SearchFacetOptions {\n  fields: SearchFacetField[] = [];\n  rangeQueries: SearchFacetRangeQuery[] = [];\n  limit?: number;\n  minCount?: number;\n\n  public getRangeQuery(query: string): SearchFacetRangeQuery | null {\n    const cleanedQuery = query.replace(/{[^}]+}/i, '').trim();\n    for (const rangeQuery of this.rangeQueries) {\n      if (rangeQuery.query === cleanedQuery) {\n        return rangeQuery;\n      }\n    }\n    return null;\n  }\n}\n","export class SearchFacetRangeFilterProperties {\n  constructor(\n    public field: string,\n    public label: string,\n    public fromValue: string,\n    public toValue: string,\n    public query: string,\n    public value: string\n  ) {}\n}\n","export class SearchFacetRangeFilter {\n  public token: string;\n  public fromValue: string;\n  public toValue: string;\n  public label: string;\n  public query: string;\n  public field: string;\n  public value: string;\n  public excludedFacet: boolean;\n\n  constructor() {\n    this.token = '';\n    this.fromValue = '';\n    this.toValue = '';\n    this.label = '';\n    this.query = '';\n    this.field = '';\n    this.value = '';\n    this.excludedFacet = false;\n  }\n}\n","export class SearchFacetRangeQuery {\n  public excludedFacet: boolean;\n  public query: string;\n\n  constructor(\n    public field: string,\n    public fromValue: string,\n    public toValue: string,\n    public facetLabel: string,\n    public label: string,\n    public value: string,\n    public token: string\n  ) {\n    this.query = field + ':[' + fromValue + ' TO ' + toValue + ']';\n  }\n}\n","export class SearchMatchFilter {\n  public field: string;\n  public value: string;\n}\n","export class SearchRangeFilter {\n  public field: string;\n  public start: string;\n  public end: string;\n  public query: string;\n}\n","import { SearchFacetOptions } from './search-facet-options.model';\nimport { SearchFacetFilter } from './search-facet-filter.model';\nimport { SearchFacetRangeFilter } from './search-facet-range-filter.model';\nimport { SearchMatchFilter } from './search-match-filter.model';\nimport { SearchRangeFilter } from './search-range-filter.model';\n\nexport class SearchOptions {\n  public q: string;\n  public source: string;\n  public start: number;\n  public rows: number;\n  public facetOptions: SearchFacetOptions;\n  public facetFilters: SearchFacetFilter[] = [];\n  public facetRangeFilters: SearchFacetRangeFilter[] = [];\n  public otherFilters: SearchMatchFilter[] = [];\n\n  public getMatchFilters(): SearchMatchFilter[] {\n    const matchFilters: SearchMatchFilter[] = [];\n    for (const facetFilter of this.facetFilters) {\n      const matchFilter = new SearchMatchFilter();\n      if (facetFilter.excludedFacet) {\n        matchFilter.field =\n          '{!tag=' + facetFilter.token + '}' + facetFilter.field;\n      } else {\n        matchFilter.field = facetFilter.field;\n      }\n      if (facetFilter.isString === true) {\n        matchFilter.value = '\"' + this.urlDecode(facetFilter.value) + '\"';\n      } else {\n        matchFilter.value = this.urlDecode(facetFilter.value);\n      }\n      matchFilters.push(matchFilter);\n    }\n    for (const otherFilter of this.otherFilters) {\n      matchFilters.push(otherFilter);\n    }\n    return matchFilters;\n  }\n\n  public getRangeFilters(): SearchRangeFilter[] {\n    const matchFilters: SearchRangeFilter[] = [];\n    for (const facetFilter of this.facetRangeFilters) {\n      const rangeFilter = new SearchRangeFilter();\n      if (facetFilter.excludedFacet) {\n        rangeFilter.field =\n          '{!tag=' + facetFilter.token + '}' + facetFilter.field;\n      } else {\n        rangeFilter.field = facetFilter.field;\n      }\n      rangeFilter.query = facetFilter.query;\n      rangeFilter.start = this.urlDecode(facetFilter.fromValue);\n      rangeFilter.end = this.urlDecode(facetFilter.toValue);\n      matchFilters.push(rangeFilter);\n    }\n    return matchFilters;\n  }\n\n  private urlDecode(text: string): string {\n    const decodedText = decodeURIComponent(text);\n    return decodedText;\n  }\n}\n","import { SearchFacetFilter } from './search-facet-filter.model';\nimport { SearchFacetRangeFilter } from './search-facet-range-filter.model';\n\nexport class SearchResultFacetItem {\n  public token: string;\n  public value: string;\n  public label: string;\n  public count: number;\n  public query: string;\n  public active: boolean;\n\n  constructor() {\n    this.label = '';\n    this.count = 0;\n    this.query = '';\n    this.active = false;\n  }\n\n  public createQuery(\n    q: string,\n    facetFilters: SearchFacetFilter[],\n    rangeQueries: SearchFacetRangeFilter[]\n  ) {\n    let queryString = '';\n    queryString = this.appendQueryString(queryString, 'f=');\n\n    let activeFilter: SearchFacetFilter | null = null;\n    let foundToken = false;\n\n    for (const facetFilter of facetFilters) {\n      if (\n        facetFilter.token === this.token &&\n        facetFilter.value === this.value\n      ) {\n        activeFilter = facetFilter;\n        foundToken = true;\n        this.active = true;\n        continue;\n      } else if (facetFilter.token === this.token) {\n        continue;\n      }\n\n      queryString +=\n        facetFilter.token + ':' + this.urlEncode(facetFilter.value) + ';';\n    }\n\n    let activeRangeQuery: SearchFacetRangeFilter | null = null;\n    for (const rangeQuery of rangeQueries) {\n      if (rangeQuery.token === this.token && rangeQuery.value === this.value) {\n        activeRangeQuery = rangeQuery;\n        foundToken = true;\n        this.active = true;\n        continue;\n      } else if (rangeQuery.token === this.token) {\n        continue;\n      }\n\n      queryString +=\n        rangeQuery.token + ':' + this.urlEncode(rangeQuery.value) + ';';\n    }\n\n    if (foundToken === false) {\n      queryString += this.token + ':' + this.urlEncode(this.value);\n    }\n\n    if (queryString.endsWith(';')) {\n      queryString = queryString.substr(0, queryString.length - 1);\n    }\n\n    if (queryString === 'f=') {\n      queryString = '';\n    }\n\n    if (activeFilter) {\n      activeFilter.query = queryString;\n      this.active = true;\n    }\n\n    if (activeRangeQuery) {\n      activeRangeQuery.query = queryString;\n      this.active = true;\n    }\n\n    this.query = queryString;\n  }\n\n  private appendQueryString(queryString: string, appendString: string) {\n    let appendedQueryString: string;\n\n    if (!queryString) {\n      appendedQueryString = '';\n    } else {\n      appendedQueryString = queryString + '&';\n    }\n\n    appendedQueryString += appendString;\n\n    return appendedQueryString;\n  }\n\n  private urlEncode(text: string): string {\n    const encodedText = encodeURIComponent(text);\n    return encodedText;\n  }\n}\n","import { SearchResultFacetItem } from './search-result-facet-item.model';\nimport { SearchFacetFilter } from './search-facet-filter.model';\nimport { SearchFacetRangeFilter } from './search-facet-range-filter.model';\n\nexport class SearchResultFacet {\n  public items: SearchResultFacetItem[];\n\n  constructor(public field: string, public label: string) {\n    this.items = [];\n  }\n\n  public createQuery(\n    q: string,\n    facetFilters: SearchFacetFilter[],\n    rangeQueries: SearchFacetRangeFilter[]\n  ) {\n    for (const item of this.items) {\n      item.createQuery(q, facetFilters, rangeQueries);\n    }\n  }\n}\n","export class SearchResultMeta {\n  public qTime: number;\n  public resultCount: number;\n  public numFound: number;\n  public start: number;\n\n  constructor(solrResults: any) {\n    this.qTime = solrResults.responseHeader.QTime;\n    this.resultCount = solrResults.response.docs.length;\n    this.numFound = solrResults.response.numFound;\n    this.start = solrResults.response.start;\n  }\n}\n","import { SearchFacetOptions } from './search-facet-options.model';\nimport { SearchFacetFilter } from './search-facet-filter.model';\nimport { SearchFacetRangeFilter } from './search-facet-range-filter.model';\nimport { SearchOptions } from './search-options.model';\n\nexport class SearchResultRequest {\n  public q: string;\n  public facetOptions: SearchFacetOptions;\n  public facetFilters: SearchFacetFilter[];\n  public facetRangeFilters: SearchFacetRangeFilter[];\n  public start: number;\n  public rows: number;\n\n  constructor(solrResults: any, options: SearchOptions) {\n    this.q = options.q;\n    this.facetOptions = options.facetOptions;\n    this.facetFilters = options.facetFilters;\n    this.facetRangeFilters = options.facetRangeFilters;\n\n    this.start = solrResults.responseHeader.params.start;\n    this.rows = solrResults.responseHeader.params.rows;\n  }\n}\n","import { Status } from '../../enums/status.enum';\n\n/**\n * A container to store DTO status data\n */\nexport class DtoStatusContainer {\n  /** A get accessor for the DTO's status text */\n  public get text(): string {\n    switch (this.code) {\n      case Status.OK:\n        return 'OK';\n      case Status.Created:\n        return 'Created';\n      case Status.NoData:\n        return 'No Data';\n      case Status.NotModifed:\n        return 'No Modified';\n      case Status.BadRequest:\n        return 'Bad Request';\n      case Status.NotAuthorized:\n        return 'Not Athorized';\n      case Status.ImATeapot:\n        // tslint:disable-next-line:quotemark\n        return \"I'm a Teapot\";\n      case Status.Error:\n        return 'Error';\n      default:\n        return 'Unknown';\n    }\n  }\n\n  /**\n   * The DTO's message text\n   */\n  public message?: string;\n\n  /**\n   * @param code - The DTO's status code\n   */\n  constructor(public code: Status = Status.OK) {}\n\n  /**\n   * Determine whether the status is an error code\n   */\n  public isError(): boolean {\n    if (\n      this.code === Status.OK ||\n      this.code === Status.NoData ||\n      this.code === Status.Created ||\n      this.code === Status.NotModifed\n    ) {\n      return false;\n    }\n    return true;\n  }\n\n  /**\n   * Determine whether the status is not an error code\n   */\n  public isNotError(): boolean {\n    if (\n      this.code === Status.OK ||\n      this.code === Status.NoData ||\n      this.code === Status.Created ||\n      this.code === Status.NotModifed\n    ) {\n      return true;\n    }\n    return false;\n  }\n}\n","import { DtoStatusContainer } from './dto-status-container.model';\nimport { Status } from '../../enums/status.enum';\n\n/**\n * A data transfer object class\n */\nexport class Dto {\n  /** A container object for the DTO status */\n  public status: DtoStatusContainer;\n\n  /**\n   * @param code = The status code\n   */\n  constructor(code: Status = Status.OK) {\n    this.status = new DtoStatusContainer(code);\n  }\n\n  /**\n   * Determine whether the passed status code is an error\n   * @param code - The status code\n   * @param suppressErrors  - A list of error codes to suppress (i.e. not treat as errors)\n   * @returns True if the status code is an error code\n   */\n  static isError(code: Status, suppressErrors?: Status[]): boolean {\n    if (suppressErrors && suppressErrors.findIndex(c => c === code) >= 0) {\n      return false;\n    }\n    if (\n      code === Status.OK ||\n      code === Status.NoData ||\n      code === Status.Created ||\n      code === Status.NotModifed\n    ) {\n      return false;\n    }\n    return true;\n  }\n\n  /**\n   * Determine whether the passed status code is not an error\n   * @param code - The status code\n   * @returns True if the status code is not an error code\n   */\n  static isNotError(code: Status): boolean {\n    if (\n      code === Status.OK ||\n      code === Status.NoData ||\n      code === Status.Created ||\n      code === Status.NotModifed\n    ) {\n      return true;\n    }\n    return false;\n  }\n}\n","import { Dto } from './dto.model';\nimport { Status } from '../../enums/status.enum';\n\n/**\n * A DTO class to use if a controller returns an array of items\n */\nexport class ArrayDto<T> extends Dto {\n  /**\n   * @param code - The DTO's status code\n   * @param data - The DTO's data (an array of objects)\n   */\n  constructor(code: Status, public data: T[]) {\n    super(code);\n  }\n}\n","import { Dto } from './dto.model';\nimport { Status } from '../../enums/status.enum';\n\n/**\n * A DTO class to use if a controller returns a single item\n */\nexport class ItemDto<T> extends Dto {\n  /**\n   * @param code - The DTO's status code\n   * @param data - The DTO's data\n   */\n  constructor(code: Status, public data: T) {\n    super(code);\n  }\n}\n","import { SearchResultMeta } from './search/search-result-meta.model';\nimport { SearchResultRequest } from './search/search-result-request.model';\nimport { SearchResultFacet } from './search/search-result-facet.model';\nimport { SearchResultsDto } from './search-results-dto.model';\n\nexport class SearchResultsContainer<T> {\n  public data: T[] = [];\n  public facets: SearchResultFacet[] = [];\n  public request: SearchResultRequest;\n  public meta: SearchResultMeta;\n\n  constructor(searchResultsDto: SearchResultsDto<T>) {\n    this.data = searchResultsDto.data;\n    this.facets = searchResultsDto.facets;\n    this.request = searchResultsDto.request;\n    this.meta = searchResultsDto.meta;\n  }\n}\n","import { SearchResultFacet } from './search/search-result-facet.model';\nimport { SearchResultRequest } from './search/search-result-request.model';\nimport { SearchResultMeta } from './search/search-result-meta.model';\nimport { Status } from '../../enums/status.enum';\nimport { Dto } from './dto.model';\n\nexport class SearchResultsDto<T> extends Dto {\n  public facets: SearchResultFacet[] = [];\n  public request: SearchResultRequest;\n  public meta: SearchResultMeta;\n  constructor(code: Status, public data: T[]) {\n    super(code);\n  }\n}\n","import { BaseModel } from '../base/base.model';\n\n/**\n * A class to store an error report\n */\nexport class ClientErrorReport extends BaseModel {\n  /**\n   * @param serviceName - The name of the service reporting the error\n   * @param message - The error message\n   * @param status - The error status\n   * @param statusText - The status text\n   * @param url - The offending URL\n   * @param stackTrace - A stack trace\n   */\n  constructor(\n    public serviceName: string,\n    public message: string,\n    public status: number,\n    public statusText: string,\n    public url: string,\n    public stackTrace?: string\n  ) {\n    super();\n  }\n}\n","export class UploadEvent {\n  public type: string;\n  public message: string;\n  public progressPercent: number;\n  public callbackId?: string;\n\n  constructor(type: string, message: string = null, callbackId?: string) {\n    this.type = type;\n    this.message = message;\n    this.callbackId = callbackId;\n  }\n}\n","import { TestArtifact } from '../../enums/test-artifact.enum';\n\n/**\n * A class to store new user request data. This class serves as the base class for other user new user request\n * classes.\n */\nexport class BaseNewUserRequest {\n  /** Boolean indicating whether the object is a test artifact */\n  public testArtifact?: boolean;\n\n  /**\n   * @param firstName - The user's first name\n   * @param lastName - The user's last name\n   * @param email - THe user's email address\n   * @param password - The user's password\n   * @param roles - THe user's roles\n   * @param testArtifact - An enum indicating whether the new user request is a test artifact\n   */\n  constructor(\n    public firstName: string,\n    public lastName: string,\n    public email: string,\n    public password: string,\n    public roles: string[],\n    testArtifact?: TestArtifact\n  ) {\n    if (testArtifact === TestArtifact.true) {\n      this.testArtifact = true;\n    }\n  }\n}\n","/**\n * A class to store password reset requests\n */\nexport class BasePasswordResetRequest {\n  /**\n   * @param email - The user's email address\n   */\n  constructor(public email: string) {}\n}\n","import { BaseModel } from '../base/base.model';\n\n/**\n * The base user class\n */\nexport class BaseUser extends BaseModel {\n  /** The user's first name */\n  public firstName: string;\n\n  /** The user's last name */\n  public lastName: string;\n\n  /** Get accessor for the user's full name */\n  public get fullName(): string {\n    return this.firstName + ' ' + this.lastName;\n  }\n\n  /** The user's email address */\n  public email: string;\n\n  /** The user's email verified */\n  public emailVerified: boolean;\n\n  /** The date of the user's last login */\n  lastLoginDate: Date;\n\n  /** The total number of user logins */\n  loginCount: number;\n\n  /** A flag indicating whether the user's account has been disabled */\n  disabled: boolean;\n\n  /** The number of password resets */\n  passwordResetCount: number;\n\n  /** An array containing the user's roles */\n  public roles: string[] = [];\n}\n","/**\n * A class to return the result of validating a password reset request token\n */\nexport class ValidatePasswordResetTokenResponse {\n  /** Boolean indicating whether the token is valid */\n  public validToken: boolean;\n\n  /** The password reset token */\n  public token: string;\n\n  /** The ID of the user requesting the password reset */\n  public userId: string;\n\n  /** The message returned to the user */\n  public message: string;\n}\n","/**\n * A class to return the result of validating a verify email request token\n */\nexport class ValidateVerifyEmailTokenResponse {\n  /** Boolean indicating whether account is already verified */\n  public alreadyVerified: boolean;\n  \n  /** Boolean indicating whether the token is valid */\n  public validToken: boolean;\n\n  /** The password reset token */\n  public token: string;\n\n  /** The ID of the user requesting the password reset */\n  public userId: string;\n\n  /** The message returned to the user */\n  public message: string;\n}\n","/**\n * A class to store a query parameter\n */\nexport class Parameter {\n  /**\n   * Constructor\n   * @param name - The name of the parameter\n   * @param value - THe paramter's value\n   */\n  constructor(public name: string, public value: string) {}\n}\n","import { Parameter } from './parameter.model';\n\n/**\n * A class to store query parameters\n */\nexport class Parameters {\n  /** Get accessor for hasParameters */\n  public get hasParameters(): boolean {\n    return this._parameters.length > 0 ? true : false;\n  }\n\n  /** An array of parameters */\n  private _parameters: Parameter[] = [];\n\n  /**\n   * Add a parameter to the Parameters object\n   * @param name - The name of the paramter to add\n   * @param value - The value of the parameter to add\n   */\n  public add(name: string, value: string) {\n    this._parameters.push(new Parameter(name, value));\n  }\n\n  /**\n   * Get the parameter string\n   * @returns A parameter string\n   */\n  public getParamterString(): string {\n    let parameterString = '?';\n    for (const parameter of this._parameters) {\n      if (parameterString !== '?') {\n        parameterString += '&';\n      }\n      parameterString += parameter.name + '=' + parameter.value;\n    }\n    return parameterString;\n  }\n}\n","import { Secure } from '../../../enums/secure.enum';\nimport { Parameters } from './parameters.model';\nimport { Status } from '../../../enums/status.enum';\n\n/**\n * A class to store HTTP request options\n */\nexport class Options {\n  /** The ID of the object */\n  public id: string;\n\n  /** An enum indicating whether then API endpoint is secure */\n  public secure: Secure;\n\n  /** The API endpoint URL */\n  public url: string;\n\n  /** Boolean indocating whether the ID should be validated */\n  public validateId: boolean;\n\n  /** The type of the object */\n  public objectType: any;\n\n  /** An object containing the query parameters */\n  public parameters: Parameters;\n\n  /** An array of errors that should be suppressed (i.e. no error dialog shown) */\n  public suppressedErrors: Status[] = [];\n\n  /**\n   * Constructor\n   */\n  constructor() {\n    this.parameters = new Parameters();\n  }\n}\n","/**\n * A utility for working with URLs\n */\nexport class UrlUtil {\n  /**\n   * Join the passed URL elements\n   * @param urlElements - The URL elements to join\n   * @returns The concatenated URL elements\n   */\n  public static join(...urlElements: string[]) {\n    const resultArray = [];\n\n    // If the first part is a plain protocol, we combine it with the next part.\n    if (urlElements[0].match(/^[^/:]+:\\/*$/) && urlElements.length > 1) {\n      const first = urlElements.shift();\n      urlElements[0] = first + urlElements[0];\n    }\n\n    // There must be two or three slashes in the file protocol, two slashes in anything else.\n    if (urlElements[0].match(/^file:\\/\\/\\//)) {\n      urlElements[0] = urlElements[0].replace(/^([^/:]+):\\/*/, '$1:///');\n    } else {\n      urlElements[0] = urlElements[0].replace(/^([^/:]+):\\/*/, '$1://');\n    }\n\n    for (let i = 0; i < urlElements.length; i++) {\n      let component = urlElements[i];\n\n      if (typeof component !== 'string') {\n        throw new TypeError('Url must be a string. Received ' + component);\n      }\n\n      if (component === '') {\n        continue;\n      }\n\n      if (i > 0) {\n        // Removing the starting slashes for each component but the first.\n        component = component.replace(/^[\\/]+/, '');\n      }\n      if (i < urlElements.length - 1) {\n        // Removing the ending slashes for each component but the last.\n        component = component.replace(/[\\/]+$/, '');\n      } else {\n        // For the last component we will combine multiple slashes to a single one.\n        component = component.replace(/[\\/]+$/, '/');\n      }\n\n      resultArray.push(component);\n    }\n\n    let joinedString = resultArray.join('/');\n    // Each input component is now separated by a single slash except the possible first plain protocol part.\n\n    // remove trailing slash before parameters or hash\n    joinedString = joinedString.replace(/\\/(\\?|&|#[^!])/g, '$1');\n\n    // replace ? in parameters with &\n    const parts = joinedString.split('?');\n    joinedString =\n      parts.shift() + (parts.length > 0 ? '?' : '') + parts.join('&');\n\n    return joinedString;\n  }\n}\n","import { Injectable, Inject } from '@angular/core';\nimport { HttpClient, HttpHeaders, HttpEventType } from '@angular/common/http';\nimport { Observable, of } from 'rxjs';\nimport { Router } from '@angular/router';\nimport { Secure } from '../../enums/secure.enum';\nimport { Options } from './_models/base-data-options.model';\n// import { plainToClassFromExist } from 'class-transformer';\nimport { UrlUtil } from '../../util/url/url.util';\nimport { BaseModel } from '../../models/base/base.model';\nimport { ErrorDialogService } from '../../dialogs/error/error-dialog.service';\nimport { Dto } from '../../models/dto/dto.model';\nimport { ItemDto } from '../../models/dto/item-dto.model';\nimport { ClientErrorReport } from '../../models/error/client-error-report.model';\nimport { map } from 'rxjs/operators';\nimport { LeathermanAppConfigInjectionToken } from '../../config/injection-tokens/leatherman-app-config.injection-token';\nimport { ILeathermanAppConfig } from '../../config/app.config';\nimport { ErrorDialogServiceInjectionToken } from '../../config/injection-tokens/error-dialog-service.injection-token';\nimport { SearchResultsDto } from '../../models/dto/search-results-dto.model';\nimport { SearchResultsContainer } from '../../models/dto/search-results-container.model';\nimport { UploadEvent } from '../../models/events/upload-event.model';\nimport { ArrayDto } from '../../models/dto/array-dto.model';\n\n/**\n * The base data service for communicating with API endpoints\n */\n@Injectable({\n  providedIn: 'root'\n})\nexport class BaseDataService {\n  // **********************\n  // * Protected properties\n  // **********************\n\n  /** Set accessor for the base endpoint */\n  protected set baseEndpoint(baseEndpoint: string) {\n    this._baseEndpoint = baseEndpoint;\n    if (this._baseEndpoint.startsWith('/') === false) {\n      this._baseEndpoint = '/' + this._baseEndpoint;\n    }\n    if (this._baseEndpoint.endsWith('/') === false) {\n      this._baseEndpoint = this._baseEndpoint + '/';\n    }\n  }\n\n  /** Set accessor for the base endpoint */\n  protected get baseEndpoint(): string {\n    return this._baseEndpoint;\n  }\n\n  /** The base endpoint */\n  private _baseEndpoint: string;\n\n  /** Set accessor for the data service's item data type */\n  protected set type(type: any) {\n    this._type = type;\n  }\n\n  /** The data service's item data type */\n  private _type: any;\n\n  /** Set accessor for the api root */\n  protected get apiRoot(): string {\n    if (this.config.apiRoot) {\n      return this.config.serverUrl + '/' + this.config.apiRoot;\n    }\n    return this.config.serverUrl;\n  }\n\n  /** Get accessor for the API key  */\n  protected get apiKey(): string {\n    return this.config.apiKey;\n  }\n\n  /** Get accessor for the no token header */\n  protected get noTokenHeader(): HttpHeaders {\n    return new HttpHeaders({\n      'Content-Type': 'application/json',\n      'Cache-Control': 'no-cache',\n      Pragma: 'no-cache',\n      Expires: 'Sat, 01 Jan 2000 00:00:00 GMT'\n    });\n  }\n\n  /** Get accessor to the header to use when the API endpoint is secured with an API key */\n  protected get apiHeader(): HttpHeaders {\n    const token = this.apiKey ? 'Bearer ' + this.apiKey : '';\n    const apiHeader = new HttpHeaders({\n      Authorization: token,\n      'Content-Type': 'application/json',\n      'Cache-Control': 'no-cache',\n      Pragma: 'no-cache',\n      Expires: 'Sat, 01 Jan 2000 00:00:00 GMT'\n    });\n    return apiHeader;\n  }\n\n  /** Get acccessor for the header to use when the API endpoit is secured with a JWT token */\n  protected get authHeader(): HttpHeaders {\n    const localStorageToken = localStorage.getItem(this.config.jwtTokenName);\n    const token = localStorageToken ? 'Bearer ' + localStorageToken : '';\n    const authHeader = new HttpHeaders({\n      Authorization: token,\n      'Content-Type': 'application/json',\n      'Cache-Control': 'no-cache',\n      Pragma: 'no-cache',\n      Expires: 'Sat, 01 Jan 2000 00:00:00 GMT'\n    });\n    return authHeader;\n  }\n\n  /**\n   * Constructor\n   * @param config - The app config object\n   * @param errorDialogService - A reference to the error dialog service\n   * @param router - A reference to the router\n   * @param httpClient - A reference to the HTTP client service\n   */\n  constructor(\n    @Inject(LeathermanAppConfigInjectionToken)\n    protected config: ILeathermanAppConfig,\n    @Inject(ErrorDialogServiceInjectionToken)\n    protected errorDialogService: ErrorDialogService,\n    protected router: Router,\n    protected httpClient: HttpClient\n  ) { }\n\n  // **********************\n  // * Protected methods\n  // **********************\n\n  /**\n   * Call a standard delete API endpoint\n   * @param id - The ID of the item to be deleted\n   * @param secure - Enum indicating whether the API endpoint is secure\n   * @returns True if the delete succeeded\n   * @async\n   */\n  protected async _delete(id: string, secure: Secure): Promise<boolean> {\n    if (\n      (await this.validateId(id, 'Error deleting a record. Invalid ID.')) ===\n      false\n    ) {\n      return false;\n    }\n    const headers = this.getHeader(secure);\n    const result = await this.httpClient\n      .delete<Dto>(UrlUtil.join(this.apiRoot, this._baseEndpoint, id), {\n        headers\n      })\n      .toPromise();\n\n    if (Dto.isError(result.status.code)) {\n      await this.errorDialogService.openErrorDialog(\n        result.status.text,\n        result.status.message\n      );\n      return false;\n    }\n\n    return true;\n  }\n\n  /**\n   * Call a non-standard delete API endpoint\n   * @param options - The request options\n   * @returns True if the delete succeeded\n   * @async\n   */\n  protected async _deleteWithOptions(options: Options): Promise<boolean> {\n    let url: string;\n    if (options.url) {\n      url = options.url;\n    } else {\n      url = UrlUtil.join(this.apiRoot, this._baseEndpoint, options.url);\n    }\n    if (options.id) {\n      url = UrlUtil.join(url, options.id);\n    }\n    if (options.parameters.hasParameters) {\n      url = UrlUtil.join(url, options.parameters.getParamterString());\n    }\n    const headers = this.getHeader(options.secure);\n    const result = await this.httpClient\n      .delete<Dto>(url, {\n        headers\n      })\n      .toPromise();\n\n    if (Dto.isError(result.status.code, options.suppressedErrors)) {\n      await this.errorDialogService.openErrorDialog(\n        result.status.text,\n        result.status.message\n      );\n      return false;\n    }\n\n    return true;\n  }\n\n  /**\n   * Delete all test artifacts\n   * @returns True if the delete succeded\n   * @async\n   */\n  public async _deleteTestArtifacts(): Promise<boolean> {\n    const options = new Options();\n    options.url = UrlUtil.join(\n      this.apiRoot,\n      this.baseEndpoint,\n      'deletetestartifacts'\n    );\n    options.secure = Secure.true;\n    return await this._deleteWithOptions(options).catch(async err => {\n      return await this.handlePromiseError(\n        'BaseDataService',\n        '_deleteTestArtifacts',\n        err\n      );\n    });\n  }\n\n  /**\n   * Call a standard get API endpoint\n   * @param id - The ID of the item to get\n   * @param secure - Enum indicating whether the API endpoint is secure\n   * @returns The item if the get succeeded\n   * @async\n   */\n  protected async _get<T>(id: string, secure: Secure): Promise<T> {\n    // Validate the passed ID\n    this.validateId(id, 'Error getting a record. Invalid ID.');\n    // Get the appropriate header object\n    const headers = this.getHeader(secure);\n    // Make an async call using the httpClient. Expect the result to be an ItemDto object\n    const result = await this.httpClient\n      .get<ItemDto<T>>(UrlUtil.join(this.apiRoot, this._baseEndpoint, id), {\n        headers\n      })\n      // Convert the result to a promise\n      .toPromise();\n\n    // If the returned status code is not a success code then\n    if (Dto.isError(result.status.code)) {\n      // Open the error dialog\n      this.errorDialogService.openErrorDialog(\n        result.status.text,\n        result.status.message\n      );\n      // Return null\n      return null;\n    }\n\n    // If the returned data is not an object, return the object with casting it\n    if (typeof result.data !== 'object') {\n      return result.data;\n    }\n\n    // // Cast the object to the appropriate class\n    // const data = plainToClassFromExist(this._type, result.data);\n\n    // Return the object\n    return result.data;\n  }\n\n  // _getObservable\n  protected _getObservable<T>(id: string, secure: Secure): Observable<T> {\n    // Validate the passed ID\n    this.validateId(id, 'Error getting a record. Invalid ID.');\n    // Get the appropriate header object\n    const headers = this.getHeader(secure);\n    // Make an async call using the httpClient. Expect the result to be an ItemDto object\n    return this.httpClient\n      .get<ItemDto<T>>(UrlUtil.join(this.apiRoot, this._baseEndpoint, id), {\n        headers\n      })\n      .pipe(\n        map(result => {\n          return result.data;\n        })\n      );\n  }\n\n  /**\n   * Call a non-standard get API endpoint that returns an observable\n   * @param id - The ID of the item to get\n   * @param options - The request options\n   * @returns The item if the get succeeded (as an observable)\n   * @async\n   */\n  protected _getObservableWithOptions<T>(options: Options): Observable<T> {\n    let url: string;\n    if (options.url) {\n      url = options.url;\n    } else {\n      url = UrlUtil.join(this.apiRoot, this._baseEndpoint, options.url);\n    }\n    if (options.id) {\n      url = UrlUtil.join(url, options.id);\n    }\n    if (options.parameters.hasParameters) {\n      url = UrlUtil.join(url, options.parameters.getParamterString());\n    }\n    const headers = this.getHeader(options.secure);\n    return this.httpClient\n      .get<ItemDto<T>>(url, {\n        headers\n      })\n      .pipe(\n        map(result => {\n          return result.data;\n        })\n      );\n  }\n\n  /**\n   * Call a non-standard get API endpoint\n   * @param options - The request options\n   * @returns The item if the get succeeded\n   * @async\n   */\n  protected async _getWithOptions<T>(options: Options): Promise<T> {\n    let url: string;\n    if (options.url) {\n      url = options.url;\n    } else {\n      url = UrlUtil.join(this.apiRoot, this._baseEndpoint, options.url);\n    }\n    if (options.id) {\n      url = UrlUtil.join(url, options.id);\n    }\n    if (options.parameters.hasParameters) {\n      url = UrlUtil.join(url, options.parameters.getParamterString());\n      console.log('Cache busting URL:' + url);\n    }\n    const headers = this.getHeader(options.secure);\n    const result = await this.httpClient\n      .get<ItemDto<T>>(url, {\n        headers\n      })\n      .toPromise();\n\n    if (Dto.isError(result.status.code, options.suppressedErrors)) {\n      await this.errorDialogService.openErrorDialog(\n        result.status.text,\n        result.status.message\n      );\n      return null;\n    }\n\n    if (result.data === null || result.data === undefined) {\n      return null;\n    }\n\n    if (typeof result.data !== 'object') {\n      return result.data;\n    }\n\n    // let data: T;\n    // if (options.objectType) {\n    //   data = plainToClassFromExist(options.objectType, result.data);\n    // } else {\n    //   data = plainToClassFromExist(this._type, result.data);\n    // }\n\n    return result.data;\n  }\n\n  /**\n   * Call a standard get many API endpoint\n   * @param secure - Enum indicating whether the API endpoint is secure\n   * @returns An array of items if the get succeeded\n   * @async\n   */\n  protected async _getMany<T>(secure: Secure): Promise<T[]> {\n    const headers = this.getHeader(secure);\n    const result = await this.httpClient\n      .get<ArrayDto<T>>(UrlUtil.join(this.apiRoot, this._baseEndpoint), {\n        headers\n      })\n      .toPromise();\n\n    if (Dto.isError(result.status.code)) {\n      await this.errorDialogService.openErrorDialog(\n        result.status.text,\n        result.status.message\n      );\n      return null;\n    }\n\n    return result.data;\n  }\n\n  /**\n   * Call a non-standard get many API endpoint\n   * @param options - The request options\n   * @returns An array of items if the get succeeded\n   * @async\n   */\n  protected async _getManyWithOptions<T>(options: Options): Promise<T[]> {\n    let url: string;\n    if (options.url) {\n      url = options.url;\n    } else {\n      url = UrlUtil.join(this.apiRoot, this._baseEndpoint, options.url);\n    }\n    if (options.id) {\n      url = UrlUtil.join(url, options.id);\n    }\n    if (options.parameters.hasParameters) {\n      url = UrlUtil.join(url, options.parameters.getParamterString());\n    }\n    const headers = this.getHeader(options.secure);\n    const result = await this.httpClient\n      .get<ArrayDto<T>>(url, { headers })\n      .toPromise();\n\n    if (Dto.isError(result.status.code, options.suppressedErrors)) {\n      await this.errorDialogService.openErrorDialog(\n        result.status.text,\n        result.status.message\n      );\n      return null;\n    }\n\n    return result.data;\n  }\n\n  /**\n   * Call a standard post API endpoint\n   * @param object - The object to post\n   * @param secure - Enum indicating whether the API endpoint is secure\n   * @param validateId - Boolean indicating whether then object's ID should be validated\n   * @returns The posted object\n   * @async\n   */\n  protected async _post<T>(\n    object: any,\n    secure: Secure,\n    validateId: boolean = true\n  ): Promise<T> {\n    if (validateId) {\n      if (\n        !this.validateModelId(\n          object,\n          'Error posting a record. Invalid model ID.'\n        )\n      ) {\n        return null;\n      }\n    }\n    const headers = this.getHeader(secure);\n    const url = UrlUtil.join(this.apiRoot, this._baseEndpoint);\n\n    let result: ItemDto<T>;\n    try {\n      result = await this.httpClient\n        .post<ItemDto<T>>(\n          UrlUtil.join(this.apiRoot, this._baseEndpoint),\n          object,\n          {\n            headers\n          }\n        )\n        .toPromise();\n    } catch (error) {\n      console.log('**********');\n      console.log('HTTP Post Error');\n      console.log('URL: ' + url);\n      console.log(object);\n      throw error;\n    }\n\n    if (Dto.isError(result.status.code)) {\n      await this.errorDialogService.openErrorDialog(\n        result.status.text,\n        result.status.message\n      );\n      return null;\n    }\n\n    return result.data;\n  }\n\n  /**\n   * Call a non-standard post API endpoint\n   * @param object - The object to post\n   * @param options - The request options\n   * @returns The posted object\n   * @async\n   */\n  protected async _postWithOptions<T>(\n    object: any,\n    options: Options\n  ): Promise<T> {\n    if (options.validateId) {\n      if (\n        !this.validateModelId(\n          object,\n          'Error posting a record. Invalid model ID.'\n        )\n      ) {\n        return null;\n      }\n    }\n    let url: string;\n    if (options.url) {\n      url = options.url;\n    } else {\n      url = UrlUtil.join(this.apiRoot, this._baseEndpoint, options.url);\n    }\n    if (options.id) {\n      url += options.id;\n    }\n    if (options.parameters.hasParameters) {\n      url += options.parameters.getParamterString();\n    }\n    const headers = this.getHeader(options.secure);\n\n    const result = await this.httpClient\n      .post<ItemDto<T>>(url, object, {\n        headers\n      })\n      .toPromise();\n\n    if (Dto.isError(result.status.code, options.suppressedErrors)) {\n      await this.errorDialogService.openErrorDialog(\n        result.status.text,\n        result.status.message\n      );\n      return null;\n    }\n\n    return result.data;\n  }\n\n  /**\n   * Call a standard put API endpoint\n   * @param object - The object to put\n   * @param secure - Enum indicating whether the API endpoint is secure\n   * @param validateId - Boolean indicating whether then object's ID should be validated\n   * @returns The updated object\n   * @async\n   */\n  protected async _put<T extends BaseModel>(\n    object: any,\n    secure: Secure,\n    validateId: boolean = true\n  ): Promise<T> {\n    if (object && validateId) {\n      if (\n        !this.validateModelId(\n          object,\n          'Error putting a record. Invalid model ID.'\n        )\n      ) {\n        return null;\n      }\n    }\n    const headers = this.getHeader(secure);\n    const result = await this.httpClient\n      .put<ItemDto<T>>(\n        UrlUtil.join(this.apiRoot, this._baseEndpoint, object._id),\n        object,\n        {\n          headers\n        }\n      )\n      .toPromise();\n\n    if (Dto.isError(result.status.code)) {\n      await this.errorDialogService.openErrorDialog(\n        result.status.text,\n        result.status.message\n      );\n      return null;\n    }\n\n    return result.data;\n  }\n\n  /**\n   * Call a non-standard put API endpoint\n   * @param object - The object to put\n   * @param options - The request options\n   * @returns The updated object\n   * @async\n   */\n  protected async _putWithOptions<T>(\n    options: Options,\n    object?: any\n  ): Promise<T> {\n    if (object && options.validateId) {\n      if (\n        !this.validateModelId(\n          object,\n          'Error putting a record. Invalid model ID.'\n        )\n      ) {\n        return null;\n      }\n    }\n    let url: string;\n    if (options.url) {\n      url = options.url;\n    } else {\n      url = UrlUtil.join(this.apiRoot, this._baseEndpoint, options.url);\n    }\n    if (options.id) {\n      url = UrlUtil.join(url, options.id);\n    }\n    if (options.parameters.hasParameters) {\n      url = UrlUtil.join(url, options.parameters.getParamterString());\n    }\n    const headers = this.getHeader(options.secure);\n    const result = await this.httpClient\n      .put<ItemDto<T>>(url, object, {\n        headers\n      })\n      .toPromise();\n\n    if (Dto.isError(result.status.code, options.suppressedErrors)) {\n      await this.errorDialogService.openErrorDialog(\n        result.status.text,\n        result.status.message\n      );\n      return null;\n    }\n\n    return result.data;\n  }\n\n  protected async _searchWithOptions<T>(\n    options: Options\n  ): Promise<SearchResultsContainer<T>> {\n    let url: string;\n    if (options.url) {\n      url = options.url;\n    } else {\n      url = UrlUtil.join(this.apiRoot, this.baseEndpoint, options.url);\n    }\n    if (options.id) {\n      url = UrlUtil.join(url, options.id);\n    }\n    if (options.parameters.hasParameters) {\n      url = UrlUtil.join(url, options.parameters.getParamterString());\n      console.log('Cache busting URL:' + url);\n    }\n    const headers = this.getHeader(options.secure);\n    const result = await this.httpClient\n      .get<SearchResultsDto<T>>(url, {\n        headers\n      })\n      .toPromise();\n\n    if (\n      SearchResultsDto.isError(result.status.code, options.suppressedErrors)\n    ) {\n      await this.errorDialogService.openErrorDialog(\n        result.status.text,\n        result.status.message\n      );\n      return null;\n    }\n\n    const searchResultsContainer = new SearchResultsContainer<T>(result);\n    return searchResultsContainer;\n  }\n\n  protected _uploadFormData(\n    url: string,\n    data: FormData,\n    secure: Secure\n  ): Observable<UploadEvent> {\n    const headers = this.getHeader(secure);\n    return this.httpClient\n      .post<any>(url, data, {\n        headers,\n        reportProgress: true,\n        observe: 'events'\n      })\n      .pipe(\n        map(event => {\n          let uploadEvent: UploadEvent;\n          switch (event.type) {\n            case HttpEventType.UploadProgress:\n              const progress = Math.round((100 * event.loaded) / event.total);\n              uploadEvent = new UploadEvent('Progress');\n              uploadEvent.progressPercent = progress;\n              return uploadEvent;\n\n            case HttpEventType.Response:\n              uploadEvent = new UploadEvent('Response', event.body);\n              return uploadEvent;\n            default:\n              uploadEvent = new UploadEvent(\n                'Error',\n                `Unhandled event: ${event.type}`\n              );\n              return uploadEvent;\n          }\n        })\n      );\n  }\n\n  /**\n   * Handle an error for an observable request\n   * @param serviceName - The name of the service reporting the error\n   * @param result - The return to return\n   */\n  protected handleObservableError(serviceName: string, result = {}) {\n    return (error: ClientErrorReport): Observable<any> => {\n      console.error(serviceName, error);\n      console.error(serviceName + ' error status', error.status);\n      return of(result);\n    };\n  }\n\n  /**\n   * Handle an error for a standard promise request\n   * @param serviceName - The name of the service reporting the error\n   * @param method - The name of the method reporting the error\n   * @param error - The error object\n   * @async\n   */\n  protected async handlePromiseError(\n    serviceName: string,\n    method: string,\n    error: any\n  ): Promise<null> {\n    console.log(\n      'Service: ' +\n      serviceName +\n      ' Method: ' +\n      method +\n      ' Message: ' +\n      error.message\n    );\n\n    await this.errorDialogService.openErrorDialog(\n      'Unhandled Exception',\n      'An unhandled exception error occurred: ' + error.message\n    );\n    return null;\n  }\n\n  /**\n   * Get the request header\n   * @param secure - Enum indicating the type of API endpoing security\n   * @returns An HTTP header\n   */\n  protected getHeader(secure: Secure): HttpHeaders {\n    switch (secure) {\n      case Secure.true:\n        return this.authHeader;\n      case Secure.api:\n        return this.apiHeader;\n      case Secure.false:\n      default:\n        return this.noTokenHeader;\n    }\n  }\n\n  /**\n   * Validate the ID of a model\n   * @param model - The model to validate\n   * @param message - The message to display if validating fails\n   * @returns True if the validation succeeded\n   * @async\n   */\n  private async validateModelId(model: any, message: string): Promise<boolean> {\n    if (!model._id) {\n      await this.errorDialogService.openErrorDialog(\n        'Invalid Model ID',\n        message\n      );\n      return false;\n    }\n    return true;\n  }\n\n  /**\n   * Validate the ID of a model\n   * @param id - The ID to validate\n   * @param message - The message to display if validating fails\n   * @returns True if the validation succeeded\n   * @async\n   */\n  private async validateId(id: string, message: string): Promise<boolean> {\n    if (!id) {\n      await this.errorDialogService.openErrorDialog(\n        'Invalid Model ID',\n        message\n      );\n      return false;\n    }\n    return true;\n  }\n}\n","import { Injectable, Inject } from '@angular/core';\nimport { Router } from '@angular/router';\nimport { HttpClient } from '@angular/common/http';\nimport { BaseDataService } from '../base-data/base-data.service';\nimport { Options } from '../base-data/_models/base-data-options.model';\nimport { Secure } from '../../enums/secure.enum';\nimport { UrlUtil } from '../../util/url/url.util';\nimport { ErrorDialogService } from '../../dialogs/error/error-dialog.service';\nimport { LoginRequest } from '../../models/authentication/login-request.model';\nimport { BaseUser } from '../../models/base-user/base-user.model';\nimport { BaseNewUserRequest } from '../../models/base-user/base-new-user-request.model';\nimport { LeathermanAppConfigInjectionToken } from '../../config/injection-tokens/leatherman-app-config.injection-token';\nimport { ILeathermanAppConfig } from '../../config/app.config';\nimport { ErrorDialogServiceInjectionToken } from '../../config/injection-tokens/error-dialog-service.injection-token';\nimport { Status } from '../../enums/status.enum';\nimport { AuthenticationDetails } from '../../models/authentication/authentication-details.model';\n\n/**\n * A service for communicating with the server's authentication endpoints\n */\n@Injectable({\n  providedIn: 'root'\n})\nexport class AuthenticationDataService extends BaseDataService {\n  /**\n   * Constructor\n   * @param config - The app config object\n   * @param errorDialogService - A reference to the error dialog service\n   * @param router - A reference to the router\n   * @param httpClient - A reference to the HTTP client\n   */\n  constructor(\n    @Inject(LeathermanAppConfigInjectionToken) config: ILeathermanAppConfig,\n    @Inject(ErrorDialogServiceInjectionToken)\n    errorDialogService: ErrorDialogService,\n    router: Router,\n    httpClient: HttpClient\n  ) {\n    super(config, errorDialogService, router, httpClient);\n  }\n\n  // /**\n  //  * Get a JWT token\n  //  * @param loginRequest - The login request object\n  //  * @returns A JWT token\n  //  * @async\n  //  */\n  // public async getToken<T extends LoginRequest>(loginRequest: T): Promise<string> {\n  //   const options = new Options();\n  //   options.url = UrlUtil.join(this.apiRoot, 'gettoken');\n  //   options.secure = Secure.false;\n  //   options.validateId = false;\n  //   options.suppressedErrors.push(Status.NotAuthorized);\n  //   const token = await this._postWithOptions<string>(\n  //     loginRequest,\n  //     options\n  //   ).catch(async err => {\n  //     return await this.handlePromiseError(\n  //       'AuthenticationDataService',\n  //       'getToken',\n  //       err\n  //     );\n  //   });\n  //   return token;\n  // }\n\n  public async authenticate<T extends LoginRequest>(\n    loginRequest: T\n  ): Promise<AuthenticationDetails> {\n    const options = new Options();\n    options.url = UrlUtil.join(this.apiRoot, 'authenticate');\n    options.secure = Secure.false;\n    options.validateId = false;\n    options.suppressedErrors.push(Status.NotAuthorized);\n    console.log('About to authenticate');\n    const authenticationDetails = await this._postWithOptions<\n      AuthenticationDetails\n    >(loginRequest, options).catch(async err => {\n      console.log(err);\n      return await this.handlePromiseError(\n        'AuthenticationDataService',\n        'authenticate',\n        err\n      );\n    });\n    console.log('Authentication details');\n    console.log(authenticationDetails);\n    return authenticationDetails;\n  }\n\n  /**\n   * Register a new user\n   * @param newUserRequest - A new user request object\n   * @param secure - An enum indicating whether the endpoint is secure\n   */\n  public async register<T extends BaseNewUserRequest, U extends BaseUser>(\n    newUserRequest: T,\n    secure: Secure\n  ): Promise<U> {\n    const options = new Options();\n    options.url = UrlUtil.join(this.apiRoot, this.config.registerRoute);\n    options.secure = secure;\n    options.validateId = false;\n    const user = await this._postWithOptions<U>(newUserRequest, options).catch(\n      async err => {\n        return await this.handlePromiseError(\n          'AuthenticationDataService',\n          'register',\n          err\n        );\n      }\n    );\n    return user;\n  }\n}\n","import { Injectable, Inject } from '@angular/core';\nimport { AuthenticationDataService } from './authentication-data.service';\nimport { JwtHelperService } from '@auth0/angular-jwt';\nimport { LoginRequest } from '../../models/authentication/login-request.model';\nimport { BaseNewUserRequest } from '../../models/base-user/base-new-user-request.model';\nimport { BaseUser } from '../../models/base-user/base-user.model';\nimport { ILeathermanAppConfig } from '../../config/app.config';\nimport { LeathermanAppConfigInjectionToken } from '../../config/injection-tokens/leatherman-app-config.injection-token';\nimport { Secure } from '../../enums/secure.enum';\nimport { AuthenticationDetails } from '../../models/authentication/authentication-details.model';\n\n/**\n * A service to handle client authentication\n */\n@Injectable({\n  providedIn: 'root'\n})\nexport class AuthenticationService {\n  // **********************\n  // * Private properties\n  // **********************\n\n  /** Get accessor for the JWT token */\n  private get token(): string {\n    if (!this._token) {\n      this._token = this.getTokenFromLocalStorage();\n    }\n    return this._token;\n  }\n\n  /** Set accessor for the JWT token */\n  private set token(token: string) {\n    this.setLocalStorage(token);\n    this._token = token;\n  }\n\n  /** Reference to the JWT helper service */\n  private jwtHelper = new JwtHelperService();\n  private _token: string;\n\n  /**\n   * Constructor\n   * @param config - The app config object\n   * @param authenticationDataService - A reference to the authentication data service\n   */\n  constructor(\n    @Inject(LeathermanAppConfigInjectionToken)\n    private config: ILeathermanAppConfig,\n    private authenticationDataService: AuthenticationDataService\n  ) { }\n\n  // **********************\n  // * Public methods\n  // **********************\n\n  public async authenticate(loginRequest: LoginRequest): Promise<AuthenticationDetails> {\n    const authenticationDetails = await this.authenticationDataService.authenticate(\n      loginRequest\n    );\n    if (authenticationDetails.token && authenticationDetails.token.length > 0) {\n      this.token = authenticationDetails.token;\n    } else {\n      this.clearToken();\n    }\n    return authenticationDetails;\n  }\n\n  /**\n   * Clear the JWT token\n   */\n  public clearToken() {\n    this._token = '';\n    this.clearLocalStorage();\n  }\n\n  /**\n   * Get the user's primary role\n   * @returns The user's primary role\n   * @async\n   */\n  public getPrimaryUserRole(): string {\n    const userRoles = this.getUserRoles();\n    if (userRoles.find(role => role === 'admin')) {\n      return 'admin';\n    }\n    if (userRoles.find(role => role === 'user')) {\n      return 'user';\n    }\n    return userRoles[0];\n  }\n\n  /**\n   * Get the JWT token expiration date\n   * @returns The date the token expires\n   */\n  public getTokenExpirationDate(): Date | null {\n    const expirationDate = this.jwtHelper.getTokenExpirationDate(this.token);\n    return expirationDate;\n  }\n\n  /**\n   * Get the logged in user's ID\n   * @returns The user's ID\n   */\n  public getUserId(): string {\n    if (this.isAuthenticated() === false) {\n      return null;\n    }\n    const tokenPayload = this.jwtHelper.decodeToken(this.token);\n    return tokenPayload.userId;\n  }\n\n  /**\n   * Get the user's roles\n   * @returns An array of the user's roles\n   */\n  public getUserRoles(): string[] {\n    if (this.isAuthenticated() === false) {\n      return [];\n    }\n    const tokenPayload = this.jwtHelper.decodeToken(this.token);\n    return tokenPayload.roles;\n  }\n\n  /**\n   * Determine if the user is authenticated\n   * @returns True if the user is authenticated\n   */\n  public isAuthenticated(): boolean {\n    if (!this.token) {\n      return false;\n    }\n    if (this.jwtHelper.isTokenExpired(this.token)) {\n      this.clearLocalStorage();\n      return false;\n    }\n    return true;\n  }\n\n  /**\n   * Log in a user\n   * @param loginRequest - The login request object\n   * @returns True if the login succeeded\n   * @async\n   */\n  public async loginUser<T extends LoginRequest>(loginRequest: T): Promise<AuthenticationDetails> {\n    const authenticationDetails = await this.authenticationDataService.authenticate(loginRequest);\n    if (authenticationDetails.token && authenticationDetails.token.length > 0) {\n      this.token = authenticationDetails.token;\n    } else {\n      this.clearToken();\n    }\n    return authenticationDetails;\n  }\n\n  /**\n   * Log out a user\n   */\n  public logoutUser() {\n    this.clearToken();\n  }\n\n  /**\n   * Register a new user\n   * @param newUserRequest - The new user request\n   * @param secure - An enum indicating whether the endpoing is secure\n   */\n  public async registerUser<T extends BaseNewUserRequest, U extends BaseUser>(\n    newUserRequest: T,\n    secure: Secure = Secure.false\n  ): Promise<U> {\n    const user = await this.authenticationDataService.register<T, U>(\n      newUserRequest,\n      secure\n    );\n    return user;\n  }\n\n  /**\n   * Set the JWT token\n   * @param token - The JWT token\n   */\n  public setToken(token: string) {\n    this.setLocalStorage(token);\n    this._token = token;\n  }\n\n  // **********************\n  // * Private methods\n  // **********************\n\n  /**\n   * Remove the JWT token from local storage\n   */\n  private clearLocalStorage() {\n    localStorage.removeItem(this.config.jwtTokenName);\n  }\n\n  /**\n   * Get the JWT token from local storage\n   * @returns The JWT token\n   */\n  private getTokenFromLocalStorage(): string {\n    const token = localStorage.getItem(this.config.jwtTokenName);\n    if (!token) {\n      return '';\n    }\n    return token;\n  }\n\n  /**\n   * Save the JWT token to local storage\n   * @param token - The JWT token\n   */\n  private setLocalStorage(token: string) {\n    localStorage.setItem(this.config.jwtTokenName, token);\n  }\n}\n","import { Injectable } from '@angular/core';\nimport {\n  CanActivate,\n  ActivatedRouteSnapshot,\n  RouterStateSnapshot,\n  Router\n} from '@angular/router';\nimport { Observable } from 'rxjs';\nimport { AuthenticationService } from '../authentication/authentication.service';\n\n/**\n * A service used to limit access to a route to administrators\n */\n@Injectable({\n  providedIn: 'root'\n})\nexport class AdminAuthGuardService implements CanActivate {\n  /**\n   * Constructor\n   * @param authenticationService - A reference to the authentication service\n   * @param router - A reference to the router\n   */\n  constructor(\n    private authenticationService: AuthenticationService,\n    private router: Router\n  ) {}\n\n  /**\n   * Determine whether a route can be activated\n   * @param route - The activated route snapshot\n   * @param state - The router state snapshot\n   * @returns An observable boolean or a promise of a boolean\n   */\n  public canActivate(\n    route: ActivatedRouteSnapshot,\n    state: RouterStateSnapshot\n  ): Observable<boolean> | Promise<boolean> | boolean {\n    const isAuthenticated = this.authenticationService.isAuthenticated();\n    if (isAuthenticated) {\n      const userRole = this.authenticationService.getPrimaryUserRole();\n      if (userRole === 'admin') {\n        return true;\n      }\n    }\n    this.router.navigate(['/admin/login']);\n    return false;\n  }\n}\n","import { Injectable } from '@angular/core';\nimport {\n  CanActivate,\n  ActivatedRouteSnapshot,\n  RouterStateSnapshot,\n  Router\n} from '@angular/router';\nimport { Observable } from 'rxjs';\nimport { AuthenticationService } from '../authentication/authentication.service';\n\n/**\n * A service used to limit access to a route to registered users\n */\n@Injectable({\n  providedIn: 'root'\n})\nexport class UserAuthGuardService implements CanActivate {\n  /**\n   * Constructor\n   * @param authenticationService - A reference to the authentication service\n   * @param router - A reference to the router\n   */\n  constructor(\n    private authenticationService: AuthenticationService,\n    private router: Router\n  ) {}\n\n  /**\n   * Determine whether a route can be activated\n   * @param route - The activated route snapshot\n   * @param state - The router state snapshot\n   * @returns An observable boolean or a promise of a boolean\n   */\n  public canActivate(\n    route: ActivatedRouteSnapshot,\n    state: RouterStateSnapshot\n  ): Observable<boolean> | Promise<boolean> | boolean {\n    if (this.authenticationService.isAuthenticated()) {\n      return true;\n    }\n    this.router.navigate(['/']);\n    return false;\n  }\n}\n","import { Injectable } from '@angular/core';\nimport { Subject } from 'rxjs';\n\n/**\n * A base UI service for components. This service allows sub-components to communicate the components\n * without maintaining a direct reference.\n */\n@Injectable({\n  providedIn: 'root'\n})\nexport class BaseComponentUIService {\n  /** A delete request RXJS subject */\n  public deleteRequestSubject$ = new Subject<string>();\n\n  /** An edit request RXJS subject */\n  public editRequestSubject$ = new Subject<string>();\n\n  /** A clone request RXJS subject */\n  public cloneRequestSubject$ = new Subject<string>();\n\n  /**\n   * Broadcast a clone request\n   * @param id - The ID of the object associated with the request\n   */\n  public cloneRequest(id: string) {\n    this.cloneRequestSubject$.next(id);\n  }\n\n  /**\n   * Broadcast a delete request\n   * @param id - The ID of the object associated with the request\n   */\n  public deleteRequest(id: string) {\n    this.deleteRequestSubject$.next(id);\n  }\n\n  /**\n   * Broadcast an edit request\n   * @param id - The ID of the object associated with the request\n   */\n  public editRequest(id: string) {\n    this.editRequestSubject$.next(id);\n  }\n\n  /**\n   * Subscribe to an RXJS subject\n   * @param subjectName - The name of the subject to subscribe to\n   * @param callback - The method to callback\n   */\n  public subscribe(\n    subjectName: string,\n    callback: (result: any) => Promise<void> | void\n  ) {\n    this[subjectName].subscribe(callback);\n  }\n}\n","/**\n * The base service\n */\nexport class BaseService {}\n","import { ErrorHandler, Injectable, Inject } from '@angular/core';\nimport { HttpClient } from '@angular/common/http';\nimport { Router } from '@angular/router';\nimport { BaseDataService } from '../base-data/base-data.service';\nimport { Secure } from '../../enums/secure.enum';\nimport { ErrorDialogService } from '../../dialogs/error/error-dialog.service';\nimport { ClientErrorReport } from '../../models/error/client-error-report.model';\nimport { LeathermanAppConfigInjectionToken } from '../../config/injection-tokens/leatherman-app-config.injection-token';\nimport { ILeathermanAppConfig } from '../../config/app.config';\nimport { ErrorDialogServiceInjectionToken } from '../../config/injection-tokens/error-dialog-service.injection-token';\n\n/**\n * A custom error handler service for unhandled exceptions\n */\n@Injectable({\n  providedIn: 'root'\n})\nexport class CustomErrorHandlerService extends BaseDataService\n  implements ErrorHandler {\n  /**\n   * Constructor\n   * @param config - The app config object\n   * @param errorDialogService - A reference to the error dialog service\n   * @param router - A reference to the router\n   * @param httpClient - A reference to the HTTP client\n   */\n  constructor(\n    @Inject(LeathermanAppConfigInjectionToken) config: ILeathermanAppConfig,\n    @Inject(ErrorDialogServiceInjectionToken)\n    errorDialogService: ErrorDialogService,\n    router: Router,\n    httpClient: HttpClient\n  ) {\n    super(config, errorDialogService, router, httpClient);\n    this.baseEndpoint = 'error/client';\n  }\n\n  /**\n   * Delete a client error from the database\n   * @param clientErrorId - The ID of the client error to delete\n   * @returns True if the delete suceeded\n   * @async\n   */\n  public async deleteClientError(clientErrorId: string): Promise<boolean> {\n    return this._delete(clientErrorId, Secure.true).catch(async err => {\n      return await this.handlePromiseError(\n        'CustomErrorHandlerService',\n        'deleteClientError',\n        err\n      );\n    });\n  }\n\n  /**\n   * Get the details of a client error record\n   * @param clientErrorId - The ID of the client error to get\n   * @returns A client error object\n   * @async\n   */\n  public async getClientError(\n    clientErrorId: string\n  ): Promise<ClientErrorReport> {\n    const clientError = await this._get<ClientErrorReport>(\n      clientErrorId,\n      Secure.true\n    ).catch(async err => {\n      return await this.handlePromiseError(\n        'CustomErrorHandlerService',\n        'getClientError',\n        err\n      );\n    });\n    return clientError;\n  }\n\n  /**\n   * Handle a standard error\n   * @param error - The error object\n   * @async\n   */\n  public async handleError(error: any): Promise<null> {\n    console.log('Default error handler caught an error');\n    console.log(error);\n    if (this.config.production === false) {\n      await this.errorDialogService.openErrorDialog(\n        'Unexpected Error',\n        'An unexpected error occurred: ' + error.message\n      );\n    }\n    const errorReport = new ClientErrorReport(\n      'unknown',\n      error.message,\n      error.status,\n      error.statusText,\n      error.url\n    );\n    const clientErrorReport = await this.reportClientError(errorReport);\n    document.location.href =\n      this.config.errorRoute + '?errorReportId=' + clientErrorReport._id;\n    return null;\n  }\n\n  /**\n   * Report a client error\n   * @param errorReport - The client error object\n   * @returns The client error report\n   * @async\n   */\n  public async reportClientError(\n    errorReport: ClientErrorReport\n  ): Promise<ClientErrorReport> {\n    const error = await this._post<ClientErrorReport>(\n      errorReport,\n      Secure.true,\n      false\n    ).catch(async err => {\n      return await this.handlePromiseError(\n        'CustomErrorHandlerService',\n        'reportHttpError',\n        err\n      );\n    });\n    return error;\n  }\n}\n","import {\n  Router,\n  ActivatedRouteSnapshot,\n  ActivatedRoute,\n  NavigationEnd,\n  RouterState,\n  RouterStateSnapshot\n} from '@angular/router';\nimport { Injectable, Output, EventEmitter, Directive } from '@angular/core';\nimport { IRoutePart } from './_interfaces/route-part.interface';\n\n/**\n * A service to parse route parts\n */\n@Directive()\n@Injectable({\n  providedIn: 'root'\n})\nexport class RoutePartsService {\n  /** An array of route parts */\n  public routeParts: IRoutePart[];\n\n  /** An event emitter that will trigger when a route changes */\n  @Output() routeChanged: EventEmitter<IRoutePart[]> = new EventEmitter();\n\n  /**\n   * Constructor\n   * @param router - A reference to the router\n   * @param activatedRoute - A reference to the activated route\n   */\n  constructor(private router: Router, activatedRoute: ActivatedRoute) {\n    const me = this;\n    this.router.events.subscribe(event => {\n      if (event instanceof NavigationEnd) {\n        const state: RouterState = this.router.routerState;\n        const snapshot: RouterStateSnapshot = state.snapshot;\n        const root: ActivatedRouteSnapshot = snapshot.root;\n        const routeParts = this.generateRouteParts(root);\n        me.routeParts = this.formatRouteParts(routeParts);\n        this.routeChanged.emit(me.routeParts);\n      }\n    });\n  }\n\n  /**\n   * Generate the route parts\n   * @param snapshot - The activated route snapshot\n   * @returns An array of route parts\n   */\n  public generateRouteParts(snapshot: ActivatedRouteSnapshot): IRoutePart[] {\n    let routeParts = <IRoutePart[]>[];\n    if (snapshot) {\n      if (snapshot.firstChild) {\n        routeParts = routeParts.concat(\n          this.generateRouteParts(snapshot.firstChild)\n        );\n      }\n      if (snapshot.url.length) {\n        routeParts.push({\n          title: snapshot.data['title'],\n          breadcrumb: snapshot.data['breadcrumb'],\n          url: snapshot.url[0].path,\n          urlSegments: snapshot.url,\n          params: snapshot.params\n        });\n      }\n    }\n    return routeParts;\n  }\n\n  /**\n   * Format the route parts\n   * @param routeParts - An array of route parts\n   * @returns An array of formatted route parts\n   */\n  public formatRouteParts(routeParts: IRoutePart[]): IRoutePart[] {\n    // routeParts.push({\n    //     title: 'Home',\n    //     breadcrumb: 'Home',\n    //     url: '/',\n    //     urlSegments: [],\n    //     params: {},\n    // });\n    routeParts.reverse();\n    let fullUrl = '';\n    for (const routePart of routeParts) {\n      if (fullUrl === '') {\n        fullUrl = routePart.url;\n      } else {\n        if (fullUrl.endsWith('/') === false) {\n          fullUrl += '/';\n        }\n        fullUrl = fullUrl + routePart.url;\n      }\n      routePart.url = fullUrl;\n    }\n    return routeParts;\n  }\n}\n","import { Injectable, Inject } from '@angular/core';\nimport { HttpClient } from '@angular/common/http';\nimport { Router } from '@angular/router';\nimport { Observable } from 'rxjs';\nimport { BaseDataService } from '../base-data/base-data.service';\nimport { ErrorDialogService } from '../../dialogs/error/error-dialog.service';\nimport { Options } from '../base-data/_models/base-data-options.model';\nimport { Secure } from '../../enums/secure.enum';\nimport { UrlUtil } from '../../util/url/url.util';\nimport { BasePasswordResetRequest } from '../../models/base-user/base-password-reset-request.model';\nimport { BaseUser } from '../../models/base-user/base-user.model';\nimport { LeathermanAppConfigInjectionToken } from '../../config/injection-tokens/leatherman-app-config.injection-token';\nimport { ILeathermanAppConfig } from '../../config/app.config';\nimport { ErrorDialogServiceInjectionToken } from '../../config/injection-tokens/error-dialog-service.injection-token';\nimport { ValidatePasswordResetTokenResponse } from '../../models/base-user/validate-password-reset-token-response.model';\nimport { PasswordReset } from '../../models/base-user/password-reset.model';\nimport { GetOptions } from '../../models/args/get-options.model';\nimport { ValidateVerifyEmailTokenResponse } from '../../models/base-user/validate-verify-email-token-response.model';\n\n/**\n * The base user data service\n */\n@Injectable({\n    providedIn: 'root'\n})\nexport class BaseUserDataService extends BaseDataService {\n    /**\n     * Constructor\n     * @param config - The app config object\n     * @param errorDialogService - A reference to the error dialog service\n     * @param router - A reference to the router\n     * @param httpClient - A reference to the HTTP client service\n     */\n    constructor(\n        @Inject(LeathermanAppConfigInjectionToken)\n        protected config: ILeathermanAppConfig,\n        @Inject(ErrorDialogServiceInjectionToken)\n        errorDialogService: ErrorDialogService,\n        router: Router,\n        httpClient: HttpClient\n    ) {\n        super(config, errorDialogService, router, httpClient);\n        this.baseEndpoint = config.userBaseEndpoint;\n        this.type = BaseUser;\n    }\n\n    /**\n     * Add a role to a user\n     * @param userId - The user's ID\n     * @param role - The role to add to the user\n     * @returns The updated user\n     * @async\n     */\n    public async _addUserRole<T extends BaseUser>(\n        userId: string,\n        role: string\n    ): Promise<T> {\n        const options = new Options();\n        options.secure = Secure.true;\n        options.url = UrlUtil.join(\n            this.apiRoot,\n            this.baseEndpoint,\n            userId,\n            'addrole'\n        );\n        options.parameters.add('role', role);\n        return this._putWithOptions<T>(options).catch(async err => {\n            return await this.handlePromiseError(\n                'UserDataService',\n                'addUserRole',\n                err\n            );\n        });\n    }\n\n    /**\n     * Delete a user\n     * @param userId - The ID of the user to delete\n     * @returns True if the delete succeeded\n     * @async\n     */\n    public async _deleteUser(userId: string): Promise<boolean> {\n        return this._delete(userId, Secure.true).catch(async err => {\n            return await this.handlePromiseError(\n                'UserDataService',\n                'deleteUser',\n                err\n            );\n        });\n    }\n\n    /**\n     * Get all admin users\n     * @returns An array of admin users\n     * @asyncs\n     */\n    public async _getAdminUsers<T extends BaseUser>(\n        options?: GetOptions\n    ): Promise<T[]> {\n        const getManyOptions = new Options();\n        getManyOptions.secure = Secure.true;\n        getManyOptions.url = UrlUtil.join(this.apiRoot, this.baseEndpoint);\n        getManyOptions.parameters.add('role', 'admin');\n        if (options) {\n            getManyOptions.parameters.add('skip', options.skip.toString());\n            getManyOptions.parameters.add('trace', options.take.toString());\n            if (options.sort.length > 0) {\n                getManyOptions.parameters.add('sort', options.sort);\n            }\n        }\n        const adminUsers = await this._getManyWithOptions<T>(getManyOptions).catch(\n            async err => {\n                return await this.handlePromiseError(\n                    'UserDataService',\n                    'getAdminUsers',\n                    err\n                );\n            }\n        );\n        return adminUsers;\n    }\n\n    /**\n     * Get a user\n     * @param id - The ID of the user to get\n     * @returns A user object\n     * @async\n     */\n    public async _getUser<T extends BaseUser>(id: string): Promise<T> {\n        const options = new Options();\n        options.secure = Secure.true;\n        options.url = UrlUtil.join(this.apiRoot, this.baseEndpoint, id);\n        const user = await this._getWithOptions<T>(options).catch(async err => {\n            return await this.handlePromiseError('UserDataService', 'getUser', err);\n        });\n        return user;\n    }\n\n    // getBasicUsers\n    public async _getBasicUsers<T extends BaseUser>(\n        options?: GetOptions\n    ): Promise<T[]> {\n        const getManyOptions = new Options();\n        getManyOptions.secure = Secure.true;\n        getManyOptions.url = UrlUtil.join(this.apiRoot, this.baseEndpoint);\n        getManyOptions.parameters.add('onlyrole', 'user');\n        if (options) {\n            getManyOptions.parameters.add('skip', options.skip.toString());\n            getManyOptions.parameters.add('trace', options.take.toString());\n            if (options.sort.length > 0) {\n                getManyOptions.parameters.add('sort', options.sort);\n            }\n        }\n        const assessmentUsers = await this._getManyWithOptions<T>(\n            getManyOptions\n        ).catch(async err => {\n            return await this.handlePromiseError(\n                'UserDataService',\n                'getAssessmentUsers',\n                err\n            );\n        });\n        return assessmentUsers;\n    }\n\n    /**\n     * Get all users\n     * @returns An array of users\n     * @async\n     */\n    public async _getUsers<T extends BaseUser>(\n        options?: GetOptions\n    ): Promise<T[]> {\n        const getManyOptions = new Options();\n        getManyOptions.secure = Secure.true;\n        getManyOptions.url = UrlUtil.join(this.apiRoot, this.baseEndpoint);\n        if (options) {\n            getManyOptions.parameters.add('skip', options.skip.toString());\n            getManyOptions.parameters.add('trace', options.take.toString());\n            if (options.sort.length > 0) {\n                getManyOptions.parameters.add('sort', options.sort);\n            }\n        }\n        const assessmentUsers = await this._getManyWithOptions<T>(\n            getManyOptions\n        ).catch(async err => {\n            return await this.handlePromiseError('UserDataService', 'getUsers', err);\n        });\n        return assessmentUsers;\n    }\n\n    /**\n     * Remove a role from a user\n     * @param userId - The ID of the user\n     * @param role - The role to remove from the user\n     */\n    public async _removeUserRole<T extends BaseUser>(\n        userId: string,\n        role: string\n    ): Promise<T> {\n        const options = new Options();\n        options.secure = Secure.true;\n        options.url = UrlUtil.join(\n            this.apiRoot,\n            this.baseEndpoint,\n            userId,\n            'remove-role'\n        );\n        options.parameters.add('role', role);\n        return this._putWithOptions<T>(options).catch(async err => {\n            return await this.handlePromiseError(\n                'UserDataService',\n                'removeUserRole',\n                err\n            );\n        });\n    }\n\n    /**\n     * Request a password reset\n     * @param passwordResetRequest - A password reset request object\n     * @returns True if the request succeeded\n     * @async\n     */\n    public async _requestPasswordReset(\n        passwordResetRequest: BasePasswordResetRequest\n    ): Promise<boolean> {\n        const options = new Options();\n        options.secure = Secure.false;\n        options.url = UrlUtil.join(\n            this.apiRoot,\n            this.baseEndpoint,\n            'request-password-reset'\n        );\n        options.objectType = BasePasswordResetRequest;\n        await this._postWithOptions<boolean>(passwordResetRequest, options).catch(\n            async err => {\n                return await this.handlePromiseError(\n                    'UserDataService',\n                    'requestPasswordReset',\n                    err\n                );\n            }\n        );\n        return true;\n    }\n\n    /**\n     * Request a password reset token. This method is only used for testing.\n     * @param passwordResetRequest - A password reset request object\n     * @returns A password reset token\n     * @async\n     */\n    public async _requestPasswordResetToken(\n        passwordResetRequest: BasePasswordResetRequest\n    ): Promise<string> {\n        const options = new Options();\n        options.secure = Secure.false;\n        options.url = UrlUtil.join(\n            this.apiRoot,\n            this.baseEndpoint,\n            'request-password-reset-token'\n        );\n        options.objectType = BasePasswordResetRequest;\n        const passwordResetToken = await this._postWithOptions<string>(\n            passwordResetRequest,\n            options\n        ).catch(async err => {\n            return await this.handlePromiseError(\n                'UserDataService',\n                'requestPasswordResetToken',\n                err\n            );\n        });\n        return passwordResetToken;\n    }\n\n    /**\n     * Resend Verification email\n     * @param verifyEmail - A verification email\n     * @returns True if the verification email is sent\n     */\n    public async _resendVerificationEmail(\n        verificationEmail: string\n    ): Promise<boolean> {\n        const options = new Options();\n        options.secure = Secure.false;\n        options.url = UrlUtil.join(\n            this.apiRoot,\n            this.baseEndpoint,\n            'resend-verification-email'\n        );\n        options.parameters.add('email', verificationEmail);\n        return this._getWithOptions<boolean>(\n            options\n        ).catch(async err => {\n            return await this.handlePromiseError(\n                'UserDataService',\n                'resendVerificationEmail',\n                err\n            );\n        });\n    }\n\n    /**\n     * Reset a password\n     * @param passwordReset - A password reset object\n     * @returns True if the password was successfully reset\n     * @async\n     */\n    public async _resetPassword(passwordReset: PasswordReset): Promise<boolean> {\n        const options = new Options();\n        options.secure = Secure.false;\n        options.url = UrlUtil.join(\n            this.apiRoot,\n            this.baseEndpoint,\n            'reset-password'\n        );\n        const result = await this._postWithOptions<boolean>(passwordReset, options);\n        return result;\n    }\n\n    /**\n     * Update a user\n     * @param user - The user to update\n     * @returns The updated user\n     * @async\n     */\n    public async _updateUser<T extends BaseUser>(user: T): Promise<T> {\n        return this._put<T>(user, Secure.true).catch(async err => {\n            return await this.handlePromiseError(\n                'UserDataService',\n                'updateUser',\n                err\n            );\n        });\n    }\n\n    /**\n     * Validate a password reset token\n     * @param passwordResetToken - The password reset token to validate\n     * @returns A validate password reset token response\n     * @async\n     */\n    public async _validatePasswordResetToken(\n        passwordResetToken: string\n    ): Promise<ValidatePasswordResetTokenResponse> {\n        const options = new Options();\n        options.secure = Secure.false;\n        options.url = UrlUtil.join(\n            this.apiRoot,\n            this.baseEndpoint,\n            'validate-password-reset-token'\n        );\n        options.parameters.add('token', passwordResetToken);\n        return this._getWithOptions<ValidatePasswordResetTokenResponse>(\n            options\n        ).catch(async err => {\n            return await this.handlePromiseError(\n                'UserDataService',\n                'validatePasswordResetToken',\n                err\n            );\n        });\n    }\n\n    /**\n     * Validate an email address\n     * @param email - The email address to validate\n     * @returns True if the email address is not currently in the user table\n     * @async\n     */\n    public _validateEmail(email: string): Observable<boolean> {\n        return this.httpClient.get<boolean>(\n            UrlUtil.join(\n                this.apiRoot,\n                this.baseEndpoint,\n                'validate-email' + '?email=' + email\n            ),\n            {\n                headers: this.noTokenHeader\n            }\n        );\n    }\n\n    public async _validateVerifyEmailToken(\n        verifyEmailToken: string\n    ): Promise<ValidateVerifyEmailTokenResponse> {\n        const options = new Options();\n        options.secure = Secure.false;\n        options.url = UrlUtil.join(\n            this.apiRoot,\n            this.baseEndpoint,\n            'validate-verify-email-token'\n        );\n        options.parameters.add('token', verifyEmailToken);\n        return this._getWithOptions<ValidateVerifyEmailTokenResponse>(\n            options\n        ).catch(async err => {\n            return await this.handlePromiseError(\n                'UserDataService',\n                'validateVerifyEmailToken',\n                err\n            );\n        });\n    }\n}\n","/**\n * A class to store a password reset\n */\nexport class PasswordReset {\n  /**\n   * @param token - The password reset token\n   * @param userId - The ID of the user requesting the password reset\n   * @param newPassword - The user's new password\n   */\n  constructor(\n    public token: string,\n    public userId: string,\n    public newPassword: string\n  ) {}\n}\n","import { Injectable } from '@angular/core';\nimport { BaseUserDataService } from './base-user-data.service';\nimport { Router } from '@angular/router';\nimport { BaseService } from '../base-service/base.service';\nimport { AuthenticationService } from '../authentication/authentication.service';\nimport { ConfirmDialogService } from '../../dialogs/confirm/confirm-dialog.service';\nimport { DialogButton } from '../../enums/dialog-button.enum';\nimport { LoginRequest } from '../../models/authentication/login-request.model';\nimport { BaseUser } from '../../models/base-user/base-user.model';\nimport { BasePasswordResetRequest } from '../../models/base-user/base-password-reset-request.model';\nimport { BaseNewUserRequest } from '../../models/base-user/base-new-user-request.model';\nimport { ValidatePasswordResetTokenResponse } from '../../models/base-user/validate-password-reset-token-response.model';\nimport { Secure } from '../../enums/secure.enum';\nimport { PasswordReset } from '../../models/base-user/password-reset.model';\nimport { GetOptions } from '../../models/args/get-options.model';\nimport { AuthenticationDetails } from '../../models/authentication/authentication-details.model';\nimport { ValidateVerifyEmailTokenResponse } from '../../models/base-user/validate-verify-email-token-response.model';\n\n/**\n * The base user service\n */\n@Injectable({\n    providedIn: 'root'\n})\nexport class BaseUserService extends BaseService {\n    // **********************\n    // * Public properties\n    // **********************\n\n    /** Get accessor for the user ID */\n    public get userId(): string {\n        if (!this._userId) {\n            this._userId = this.authenticationService.getUserId();\n        }\n        return this._userId;\n    }\n\n    /** Get accessor for user role */\n    public get userRole(): string {\n        if (!this._primaryUserRole) {\n            this._primaryUserRole = this.authenticationService.getPrimaryUserRole();\n        }\n        return this._primaryUserRole;\n    }\n\n    // **********************\n    // * Protected properties\n    // **********************\n\n    /** The user ID */\n    protected _userId: string;\n\n    /** The user's primary role */\n    protected _primaryUserRole: string;\n\n    /**\n     * Constructor\n     * @param authenticationService - A reference to the authentication service\n     * @param dataService - A reference to the user data service\n     * @param confirmDialogService - A reference to the confirm dialog service\n     * @param router - A reference to the router\n     */\n    constructor(\n        protected authenticationService: AuthenticationService,\n        protected dataService: BaseUserDataService,\n        protected confirmDialogService: ConfirmDialogService,\n        protected router: Router\n    ) {\n        super();\n    }\n\n    // **********************\n    // * Public methods\n    // **********************\n\n    /**\n     * Delete a user\n     * @param userId - The ID of the user to delete\n     * @returns True if the delete succeeded\n     * @async\n     */\n    public async _deleteUser(userId: string): Promise<boolean> {\n        const confirmStatus = await this.confirmDialogService.openConfirmDialog(\n            'Delete User',\n            'Do you want to delete the selected user? This action cannot be undone.'\n        );\n        if (confirmStatus.button === DialogButton.Cancel) {\n            return false;\n        }\n        const result = await this.dataService._deleteUser(userId);\n        return result;\n    }\n\n    /**\n     * Get all admin users\n     * @returns An array of admin users\n     * @async\n     */\n    public async _getAdminUsers<T extends BaseUser>(): Promise<T[]> {\n        const users = await this.dataService._getAdminUsers<T>();\n        return users;\n    }\n\n    /**\n     * Get all basic users\n     * @returns An array of basic (non-admin) users\n     * @async\n     */\n    public async _getBasicUsers<T extends BaseUser>(): Promise<T[]> {\n        const users = await this.dataService._getBasicUsers<T>();\n        return users;\n    }\n\n    /**\n     * Get the logged in user\n     * @returns The user object\n     * @async\n     */\n    public async _getCurrentUser<T extends BaseUser>(): Promise<T> {\n        if (!this.userId) {\n            return null;\n        }\n        const id = this.userId;\n        const user = await this.dataService._getUser<T>(id);\n        return user;\n    }\n\n    /**\n     * Get all users\n     * @returns An array of users\n     * @async\n     */\n    public async _getUsers<T extends BaseUser>(\n        options: GetOptions\n    ): Promise<T[]> {\n        const users = await this.dataService._getUsers<T>(options);\n        return users;\n    }\n\n    /**\n     * Get the user's primary role\n     * @returns The user's primary role\n     * @async\n     */\n    public _getPrimaryUserRole(): string {\n        return this.authenticationService.getPrimaryUserRole();\n    }\n\n    /**\n     * Get the user\n     * @param userId - ID of the user to get\n     * @returns The user object\n     * @async\n     */\n    public async _getUser<T extends BaseUser>(userID: string): Promise<T> {\n        const user = await this.dataService._getUser<T>(userID);\n        return user;\n    }\n\n    /**\n     * Login a user\n     * @param user - The login request\n     * @returns True if the login succeeded\n     * @async\n     */\n    public async _loginUser(user: LoginRequest): Promise<AuthenticationDetails> {\n        const authenticationDetails = await this.authenticationService.authenticate(user);\n        if (authenticationDetails.authenticated === true) {\n            this._userId = this.authenticationService.getUserId();\n            this._primaryUserRole = this.authenticationService.getPrimaryUserRole();\n        }\n        return authenticationDetails;\n    }\n\n    /**\n     * Logout the user\n     * @param redirectRoute - The route to redirect to after logging out\n     */\n    public _logoutUser(redirectRoute: string = ''): void {\n        this._userId = null;\n        this.authenticationService.logoutUser();\n        if (redirectRoute) {\n            this.router.navigate([redirectRoute]);\n        }\n    }\n\n    /**\n     * Register a new user\n     * @param newUser - The new user request object\n     * @param secure - An enum indicating whether the API endpoint is secure\n     * @returs The new user\n     * @async\n     */\n    public async _registerUser<T extends BaseNewUserRequest, U extends BaseUser>(\n        newUser: T,\n        secure: Secure = Secure.false\n    ): Promise<U> {\n        const user = await this.authenticationService.registerUser<T, U>(\n            newUser,\n            secure\n        );\n        // if (user) {\n        //   this._userId = this.authenticationService.getUserId();\n        //   this._primaryUserRole = this.authenticationService.getPrimaryUserRole();\n        // }\n        return user;\n    }\n\n    /**\n     * Request a password reset\n     * @param email - The email address of the user requesting the password reset\n     * @returns true if the request succeeded\n     * @async\n     */\n    public async _requestPasswordReset(email: string): Promise<boolean> {\n        const passwordResetRequest = new BasePasswordResetRequest(email);\n        const result = await this.dataService._requestPasswordReset(\n            passwordResetRequest\n        );\n        return result;\n    }\n\n    /**\n     * Request a password reset token. This method is only used for testing.\n     * @param email - The email address of the user requesting the password reset\n     * @returns The password reset token\n     * @async\n     */\n    public async _requestPasswordResetToken(email: string): Promise<string> {\n        const passwordResetRequest = new BasePasswordResetRequest(email);\n        const result = await this.dataService._requestPasswordResetToken(\n            passwordResetRequest\n        );\n        return result;\n    }\n\n    public async _resendVerificationEmail(email: string): Promise<boolean> {\n        return await this.dataService._resendVerificationEmail(\n            email\n        );\n    }\n\n    /**\n     * Reset a user password\n     * @param token - The password reset token\n     * @param userId - The ID of the user\n     * @param newPassword - The user's new password\n     * @returns True if the password reset succeeded\n     * @async\n     */\n    public async _resetPassword(\n        token: string,\n        userId: string,\n        newPassword: string\n    ): Promise<boolean> {\n        const resetRequest = new PasswordReset(token, userId, newPassword);\n        const result = this.dataService._resetPassword(resetRequest);\n        return result;\n    }\n\n    /**\n     * Update a user\n     * @param user - The user to update\n     * @returns The updated user\n     * @async\n     */\n    public async _updateUser<T extends BaseUser>(user: T): Promise<T> {\n        const result = await this.dataService._updateUser(user);\n        return result;\n    }\n\n    /**\n     * Validate a password reset token\n     * @param passwordResetToken - The password reset token\n     * @returns A validate password reset token response object\n     * @async\n     */\n    public async _validatePasswordResetToken(\n        passwordResetToken: string\n    ): Promise<ValidatePasswordResetTokenResponse> {\n        const result = await this.dataService._validatePasswordResetToken(\n            passwordResetToken\n        );\n        return result;\n    }\n\n    /**\n     * Validate a verify email token\n     * @param verifyEmailToken - The verify email token\n     * @returns A validate verify email token response object\n     */\n    public async _validateVerifyEmailToken(\n        verifyEmailToken: string\n    ): Promise<ValidateVerifyEmailTokenResponse> {\n        const result = await this.dataService._validateVerifyEmailToken(\n            verifyEmailToken\n        );\n        return result;\n    }\n}\n","import { FilterCase } from '../_enums/filter-case.enum';\nimport { FilterScope } from '../_enums/filter-scope.enum';\n\n/**\n * A class store store filter options\n */\nexport class FilterOptions {\n  /**\n   * Constructor\n   * @param fitlerCase - Enum indicating the filter case option\n   * @param fitlerScope - Enum indicating the filter scope option\n   */\n  constructor(\n    public fitlerCase: FilterCase = FilterCase.CaseInsensitive,\n    public fitlerScope: FilterScope = FilterScope.Contains\n  ) {}\n}\n","import { Sort } from '../_enums/sort.enum';\n\n/**\n * A class to store sort options\n */\nexport class SortOption {\n  /**\n   * Constructor\n   * @param key - The object property to use for sorting\n   * @param order - The sort order\n   */\n  constructor(public key: string, public order: Sort) {}\n}\n","/**\n * A regex object to validate strong passwords\n */\nexport const STRONG_PASSWORD_REGEX = new RegExp(\n  /^(?=.*[a-z])(?=.*[A-Z])(?=.*[0-9])(?=.*[!@#\\$%\\^&\\*])(?=.{8,})/\n);\n","/**\n * A regex object to validate ISO dates\n */\n// tslint:disable-next-line:max-line-length\nexport const ISO_DATE_REGEX = /(\\d{4}-[01]\\d-[0-3]\\dT[0-2]\\d:[0-5]\\d:[0-5]\\d\\.\\d+([+-][0-2]\\d:[0-5]\\d|Z))|(\\d{4}-[01]\\d-[0-3]\\dT[0-2]\\d:[0-5]\\d:[0-5]\\d([+-][0-2]\\d:[0-5]\\d|Z))|(\\d{4}-[01]\\d-[0-3]\\dT[0-2]\\d:[0-5]\\d([+-][0-2]\\d:[0-5]\\d|Z))/;\n","/**\n * A regex object to validate latitudes\n */\nexport const LATITUDE_REGEX = /^[-+]?(?:[1-8]?\\d(?:\\.\\d+)?|90(\\.0+)?)$/;\n","/**\n * A regex object to validate longitudes\n */\nexport const LONGITUDE_REGEX = /^[-+]?(?:180(?:\\.0+)?|(?:(?:1[0-7]\\d)|(?:[1-9]?\\d))(?:\\.\\d+)?)$/;\n","/**\n * A regex object to validate phone numbers\n */\nexport const PHONE_NUMBER_REGEX = /^(?:[\\+0]?\\d[\\s-]?)?(?:(?:\\(\\d{3}\\)[\\s-]?)|(?:\\d{3})[\\s-]?)?\\d{3}[\\s\\-]?\\d{4}$/;\n\n/*\nHandles the following cases\n\n1234567\n123-4567\n5551234567\n555-123-4567\n(555) 123-4567\n15551234567\n1-555-123-4567\n1 555 123-4567\n1 (555) 123-4567\n+1 (555) 123-4567\n01 (555) 123-4567\n*/\n","/**\n * A regex object to validate URLs\n */\n// export const ValidUrlRegex = /^(?:http(s)?:\\/\\/)?[\\w.-]+(?:\\.[\\w\\.-]+)+[\\w\\-\\._~:\\/?#[\\]@!\\$&'\\(?:\\)\\*\\+,;=.]+$/gim;\nexport const URL_REGEX = /^(?:http(?:s)?:\\/\\/)[\\w.-]+(?:\\.[\\w\\.-]+)+[\\w\\-\\._~:\\/?#[\\]@!\\$&'\\(?:\\)\\*\\+,;=.]+$/i;\n","/**\n * A regex object to validate zip codes\n */\nexport const ZIP_CODE_REGEX = /^\\d{5}(?:[-\\s]\\d{4})?$/;\n","import { STRONG_PASSWORD_REGEX } from './_constants/strong-password.regex';\nimport { ISO_DATE_REGEX } from './_constants/iso_date.regex';\nimport { LATITUDE_REGEX } from './_constants/latitude-regex.const';\nimport { LONGITUDE_REGEX } from './_constants/longitude-regex.const';\nimport { PHONE_NUMBER_REGEX } from './_constants/phone-number-regex.const';\nimport { URL_REGEX } from './_constants/url-regex.const';\nimport { ZIP_CODE_REGEX } from './_constants/zip-code-regex.const';\n\n/**\n * A regular expression utility\n */\nexport class RegexUtil {\n  /**\n   * Determine if the passed string is an ISO date\n   * @param text - The text to test\n   * @returns True if the passed text is an ISO date\n   */\n  public static isIsoDate(text: string): boolean {\n    if (ISO_DATE_REGEX.test(text) === true) {\n      return true;\n    }\n    return false;\n  }\n\n  /**\n   * Determine if the passed string is a latitude\n   * @param text - The text to test\n   * @returns True if the passed text is a latitude\n   */\n  public static isLatitude(text: string): boolean {\n    if (LATITUDE_REGEX.test(text) === true) {\n      return true;\n    }\n    return false;\n  }\n\n  /**\n   * Determine if the passed string is a longitude\n   * @param text - The text to test\n   * @returns True if the passed text is a longitude\n   */\n  public static isLongitude(text: string): boolean {\n    if (LONGITUDE_REGEX.test(text) === true) {\n      return true;\n    }\n    return false;\n  }\n\n  /**\n   * Determine if the passed string is a phone number\n   * @param text - The text to test\n   * @returns True if the passed text is a phone number\n   */\n  public static isPhoneNumber(text: string): boolean {\n    if (PHONE_NUMBER_REGEX.test(text) === true) {\n      return true;\n    }\n    return false;\n  }\n\n  /**\n   * Determine if the passed string is a strong password\n   * @param text - The text to test\n   * @returns True if the passed text is a strong password\n   */\n  public static isStrongPassword(text: string): boolean {\n    if (STRONG_PASSWORD_REGEX.test(text) === true) {\n      return true;\n    }\n    return false;\n  }\n\n  /**\n   * Determine if the passed text is a URL\n   * @param text - The text to test\n   * @returns True if the passed text is a URL\n   */\n  public static isUrl(text: string): boolean {\n    if (URL_REGEX.test(text) === true) {\n      return true;\n    }\n    return false;\n  }\n\n  /**\n   * Determine if the passed text is a zip code\n   * @param text - The text to test\n   * @returns True if the passed text is a zip code\n   */\n  public static isZipCode(text: string): boolean {\n    if (ZIP_CODE_REGEX.test(text) === true) {\n      return true;\n    }\n    return false;\n  }\n}\n","import { SortOption } from './_models/sort-option.model';\nimport { BaseModel } from '../../models/base/base.model';\nimport { FilterOptions } from './_models/filter-options.model';\nimport { UniqueMode } from './_enums/unique-mode.enum';\nimport { Unique } from './_enums/unique.enum';\nimport { Sort } from './_enums/sort.enum';\nimport { FilterScope } from './_enums/filter-scope.enum';\nimport { FilterCase } from './_enums/filter-case.enum';\nimport { RegexUtil } from '../regex/regex.util';\nimport * as _ from 'lodash';\n\n/**\n * A utility for sorting and filtering arrays\n */\nexport class CollectionUtil {\n  // ********************\n  // Public Static methods\n  // ********************\n\n  /**\n   * Append an item to an array\n   * @param collection - The array of items\n   * @param item - The item to append to the array\n   * @param unique - Enum indicating whether uniqueness is enforced\n   * @param uniqueMode - Enum indicating how uniqueness will be determined\n   * @returns True if the item was successfully appended\n   */\n  public static append<T>(\n    collection: T[],\n    item: T,\n    unique: Unique = Unique.True,\n    uniqueMode: UniqueMode = UniqueMode.Id\n  ): boolean {\n    if (unique === Unique.True) {\n      if (\n        uniqueMode === UniqueMode.Id &&\n        item.hasOwnProperty('_id') &&\n        CollectionUtil.isUniqueById(collection, item) === false\n      ) {\n        return false;\n      } else if (\n        uniqueMode === UniqueMode.Object &&\n        CollectionUtil.isUniqueByObject(collection, item) === false\n      ) {\n        return false;\n      }\n    }\n    collection.push(item);\n    return true;\n  }\n\n  /**\n   * Fitler an array of objects\n   * @param collection - The array of objects to filter\n   * @param filter - The filter string\n   * @param filterColumns - The object properties to use when filtering\n   * @param filterOptions - The filter options\n   * @returns An array of filtered objects\n   */\n  public static filter<T>(\n    collection: T[],\n    filter: string,\n    filterColumns: string[],\n    filterOptions?: FilterOptions\n  ): T[] {\n    // If the filter string or collection are not valid then just return the collection unchanged\n    if (!filter || !collection) {\n      return collection;\n    }\n    if (!filterOptions) {\n      filterOptions = new FilterOptions();\n    }\n    // Filter the collection using a lambda expression\n    const filteredData = collection.filter(o => {\n      // For each of the filter columns\n      for (const filterColumn of filterColumns) {\n        // Get the text of the current column\n        const text: string = o[filterColumn];\n        // Create a regular expression for the passed filter string and filter options\n        const regExp = this.getFilterRegex(filter, filterOptions);\n        // If the contents of the current column matches the filter string then\n        if (text.search(regExp) >= 0) {\n          // Return true (collection row is included in the filtered data)\n          return true;\n        }\n      }\n      // Return false (collection row is not included in the filtered data)\n      return false;\n    });\n    // Return the filtered data\n    return filteredData;\n  }\n\n  /**\n   * Find an object in an array of objects by matching an object property\n   * @param collection - The array of objects to search\n   * @param property - The object property to search\n   * @param value - The value to match\n   * @returns The matching object\n   */\n  public static find<T>(collection: T[], property: string, value: any): T {\n    const object = collection.find(o => o[property] === value);\n    return object;\n  }\n\n  /**\n   * Find an object in an array of objects by matching the object's ID\n   * @param collection - The array of objects to search\n   * @param id - The object ID to search for\n   * @returns The matching object\n   */\n  public static findById<T extends BaseModel>(collection: T[], id: string): T {\n    const object = collection.find(o => o._id === id);\n    return object;\n  }\n\n  /**\n   * Get the index of an object in an array of objects\n   * @param collection - The array of objects to search\n   * @param item - The item to search for\n   * @returns The index of the item in the array (zero-based)\n   */\n  public static findIndex<T>(collection: T[], item: T): number {\n    const index = collection.findIndex(o => o === item);\n    return index;\n  }\n\n  /**\n   * Insert an object into an array of objects\n   * @param collection - The array of objects into which the object will be inserted\n   * @param item - The item to insert into the array\n   * @param index - The desired location of the item in the array\n   * @returns True if the insert succeeded\n   */\n  public static insert<T>(\n    collection: T[],\n    item: T,\n    index: number = 0\n  ): boolean {\n    collection.splice(index, 0, item);\n    return true;\n  }\n\n  /**\n   * Sort an array of objects by mutliple keys. The method sorts the passed array in-place as opposed to\n   * returning the sorted array.\n   * @param collection - The array of objects to sort\n   * @param sortOptions - The sort options\n   */\n  public static multiKeySort<T>(\n    collection: T[],\n    ...sortOptions: SortOption[]\n  ): void {\n    collection.sort((a: any, b: any) => {\n      for (const sortOption of sortOptions) {\n        if (typeof a[sortOption.key] === 'boolean') {\n          if (!a[sortOption.key] && b[sortOption.key]) {\n            return sortOption.order === Sort.Ascending ? -1 : 1;\n          } else if (a[sortOption.key] && !b[sortOption.key]) {\n            return sortOption.order === Sort.Ascending ? 1 : -1;\n          }\n        } else if (\n          !RegexUtil.isIsoDate(a[sortOption.key]) &&\n          typeof a[sortOption.key] === 'string'\n        ) {\n          if (\n            a[sortOption.key].toLowerCase() < b[sortOption.key].toLowerCase()\n          ) {\n            return sortOption.order === Sort.Ascending ? -1 : 1;\n          } else if (\n            a[sortOption.key].toLowerCase() > b[sortOption.key].toLowerCase()\n          ) {\n            return sortOption.order === Sort.Ascending ? 1 : -1;\n          }\n        } else {\n          if (a[sortOption.key] < b[sortOption.key]) {\n            return sortOption.order === Sort.Ascending ? -1 : 1;\n          } else if (a[sortOption.key] > b[sortOption.key]) {\n            return sortOption.order === Sort.Ascending ? 1 : -1;\n          }\n        }\n      }\n      return 0;\n    });\n  }\n\n  /**\n   * Remove an object from an array of objects by matching the object ID\n   * @param collection - The array of objects from which to remove an object\n   * @param item - The item to remove from the array\n   * @returns The array of objects with the item removed\n   */\n  public static remove<T extends BaseModel>(collection: T[], item: T): T[] {\n    const updatedCollection = collection.filter(o => o._id !== item._id);\n    return updatedCollection;\n  }\n\n  /**\n   * Remove an object from an array of object by matching the passed object ID\n   * @param collection - The array of objects from which to remove an object\n   * @param ID - The ID of the item to remove from the array\n   * @returns The array of objects with the item removed\n   */\n  public static removeById<T extends BaseModel>(\n    collection: T[],\n    id: string\n  ): T[] {\n    const updatedCollection = collection.filter(o => o._id !== id);\n    return updatedCollection;\n  }\n\n  /**\n   * Shuffly an array of objects\n   * @param collection - The array of objects to shuffly\n   * @returns The shuffled array of objects\n   */\n  public static shuffle<T>(collection: T[]): T[] {\n    let currentIndex = collection.length;\n    let temporaryValue: T;\n    let randomIndex: number;\n\n    // While there remain elements to shuffle...\n    while (0 !== currentIndex) {\n      // Pick a remaining element...\n      randomIndex = Math.floor(Math.random() * currentIndex);\n      currentIndex -= 1;\n\n      // Swap it with the current element.\n      temporaryValue = collection[currentIndex];\n      collection[currentIndex] = collection[randomIndex];\n      collection[randomIndex] = temporaryValue;\n    }\n\n    return collection;\n  }\n\n  /**\n   * Sort an array of objects by a single property. The method sorts the passed array in-place as opposed to\n   * returning the sorted array.\n   * @param collection - The array of objects to sort\n   * @param key - The property to use for sorting\n   * @param order - The sort order\n   */\n  public static sort<T>(collection: T[], key: string, order: Sort): void {\n    collection.sort((a: any, b: any) => {\n      if (!RegexUtil.isIsoDate(a[key]) && typeof a[key] === 'string') {\n        if (a[key].toLowerCase() < b[key].toLowerCase()) {\n          return order === Sort.Ascending ? -1 : 1;\n        } else if (a[key].toLowerCase() > b[key].toLowerCase()) {\n          return order === Sort.Ascending ? 1 : -1;\n        }\n        return 0;\n      } else {\n        if (a[key] < b[key]) {\n          return order === Sort.Ascending ? -1 : 1;\n        } else if (a[key] > b[key]) {\n          return order === Sort.Ascending ? 1 : -1;\n        }\n        return 0;\n      }\n    });\n  }\n\n  /**\n   * Update an object in an array of objects. Use the object's ID to match objects.\n   * @param collection - The array of objects that contains the object to update\n   * @param item - The item to update\n   * @param addIfMissing - Boolean indicating whether to add the item if it is not present in the array\n   * @returns The array of objects with the updated item\n   */\n  public static update<T extends BaseModel>(\n    collection: T[],\n    item: T,\n    addIfMissing: boolean = false\n  ): T[] {\n    const index = collection.findIndex(o => o._id === item._id);\n    if (index < 0) {\n      if (addIfMissing === true) {\n        collection.push(item);\n        return collection;\n      } else {\n        return collection;\n      }\n    }\n    collection[index] = item;\n    return collection;\n  }\n\n  // ********************\n  // Private Static methods\n  // ********************\n\n  /**\n   * Create a regular expression object that implements the passed filter options\n   * @param filter - The filter text\n   * @param filterOptions - The filter options\n   * @returns A regular expression object\n   */\n  private static getFilterRegex(\n    filter: string,\n    filterOptions: FilterOptions\n  ): RegExp {\n    filter = this.escapeRegexCharacters(filter);\n    let regexString: string;\n    switch (filterOptions.fitlerScope) {\n      case FilterScope.StartsWith:\n        regexString = '^' + filter;\n        break;\n      case FilterScope.EndsWith:\n        regexString = filter + '$';\n        break;\n      default:\n        regexString = filter;\n        break;\n    }\n    let regExp: RegExp;\n    if (filterOptions.fitlerCase === FilterCase.CaseSensitive) {\n      regExp = new RegExp('.*' + regexString + '.*');\n    } else {\n      regExp = new RegExp('.*' + regexString + '.*', 'i');\n    }\n    return regExp;\n  }\n\n  /**\n   * Determine whether an object exists in an array of objects by comparing the object properties\n   * @param collection - The array of objects to search\n   * @param item - The item to search for\n   * @returns True if the object is unique\n   */\n  private static isUniqueByObject<T>(collection: T[], item: T) {\n    for (const collectionItem of collection) {\n      if (_.isEqual(collectionItem, item)) {\n        return false;\n      }\n    }\n    return true;\n  }\n\n  /**\n   * Determine whether an object exists in an array of objects by comparing the object IDs\n   * @param collection - The array of objects to search\n   * @param item - The item to search for\n   * @returns True if the object is unique\n   */\n  private static isUniqueById<T>(collection: any[], item: any) {\n    const matchingItem = collection.find(o => o._id === item._id);\n    if (matchingItem) {\n      return false;\n    }\n    return true;\n  }\n\n  /**\n   * Escape a regular expression string\n   * @param regexString - The regex string to escape\n   * @returns The escaped regular expression string\n   */\n  private static escapeRegexCharacters(regexString: string): string {\n    const escapedText = regexString.replace(/[-[\\]{}()*+?.,\\\\^$|#\\s]/g, '\\\\$&');\n    return escapedText;\n  }\n}\n","import { plainToClass } from 'class-transformer';\nimport { ClassType } from 'class-transformer/ClassTransformer';\nimport * as _ from 'lodash';\n\n/**\n * A utility for copying objects\n */\nexport class ObjectCopyUtil {\n  // ********************\n  // Static methods\n  // ********************\n\n  /**\n   * Perform a default (deep) copy of the object\n   * @param objectToCopy - The object to copy\n   * @returns The copied object\n   */\n  static copy<T>(objectToCopy: T): T {\n    return ObjectCopyUtil.deepCopy(objectToCopy);\n  }\n\n  /**\n   * Perform a deep copy of the object\n   * @param objectToCopy - The object to copy\n   * @returns The copied object\n   */\n  static deepCopy<T>(objectToCopy: T): T {\n    const cloneObj = _.cloneDeep(objectToCopy);\n    return cloneObj;\n  }\n\n  /**\n   * Perform a shallow copy of the object\n   * @param objectToCopy - The object to copy\n   * @returns The copied object\n   */\n  static shallowCopy(objectToCopy: any): any {\n    return { ...objectToCopy };\n  }\n\n  /**\n   * Perform a typed of the object. Copy the object and then apply the properties of the passed class.\n   * @param objectToCopy - The object to copy\n   * @param type - The prototype whose methods will be copied\n   * @returns The copied object\n   */\n  static typedCopy<T>(objectToCopy: any, type: ClassType<T>): T {\n    let cloneObj = this.deepCopy(objectToCopy);\n    cloneObj = plainToClass(type, cloneObj);\n    return cloneObj;\n  }\n}\n","/**\n * A utility to combine the properties of multiple classes\n */\nexport class MixinUtil {\n  /**\n   *\n   * @param derivedCtor - The object to receive the new properties\n   * @param baseCtors - The objects from which to copy properties\n   */\n  public static ApplyMixins(derivedCtor: any, baseCtors: any[]) {\n    baseCtors.forEach(baseCtor => {\n      Object.getOwnPropertyNames(baseCtor.prototype).forEach(name => {\n        derivedCtor.prototype[name] = baseCtor.prototype[name];\n      });\n    });\n  }\n}\n","import * as _ from 'lodash';\nimport { Subject } from 'rxjs';\nimport { PaginationEvent } from './_models/pagination-event.model';\nimport { BaseModel } from '../../models/base/base.model';\nimport { SortOption } from '../collection/_models/sort-option.model';\nimport { CollectionUtil } from '../collection/collection.util';\nimport { FilterOptions } from '../collection/_models/filter-options.model';\nimport { FilterCase } from '../collection/_enums/filter-case.enum';\nimport { FilterScope } from '../collection/_enums/filter-scope.enum';\n\n/**\n * A utility to implement pagination\n */\nexport class PaginatorUtil<T extends BaseModel> {\n  // **********************\n  // * Public properties\n  // **********************\n\n  /** An RXJS subject that will emit events when pagination properties change */\n  public paginationSubject$ = new Subject<PaginationEvent>();\n\n  /** A get accessor for the query string */\n  public get query(): string {\n    return this._query;\n  }\n\n  /** A get accessor for the hasFilter property */\n  public get hasFilter(): boolean {\n    return this._query ? true : false;\n  }\n\n  /** A get accessor for the array length */\n  public get length(): number {\n    return this._length;\n  }\n\n  /** A set accessor for the array length */\n  public set length(length: number) {\n    this._length = length;\n  }\n\n  /** A get accessor for the current page index */\n  public get pageIndex(): number {\n    return this._pageIndex;\n  }\n\n  /** A set accessor for the current page index */\n  public set pageIndex(pageIndex: number) {\n    this._pageIndex = pageIndex;\n  }\n\n  /** A get accessor for the page size */\n  public get pageSize(): number {\n    return this._pageSize;\n  }\n\n  /** A set accessor for the page size */\n  public set pageSize(pageSize: number) {\n    this._pageSize = pageSize;\n  }\n\n  /** A get accessor for the previous page index */\n  public get previousPageIndex(): number {\n    return this._previousPageIndex;\n  }\n\n  /** A get accessor for the page size options */\n  public get pageSizeOptions(): number[] {\n    return this._pageSizeOptions;\n  }\n\n  /** A get accessor for the noData property */\n  public get noData(): boolean {\n    return this._noData;\n  }\n\n  /** A get accessor for the sort optioins */\n  public get sortOptions(): SortOption[] {\n    return this._sortOptions;\n  }\n\n  // **********************\n  // * Private properties\n  // **********************\n\n  /** The original data array */\n  private _data: any[];\n\n  /** The filtered data array */\n  private _filteredData: any[];\n\n  /** The length of the filtered array */\n  private _length: number;\n\n  /** The current page index */\n  private _pageIndex = 0;\n\n  /** The page size */\n  private _pageSize = 5;\n\n  /** The previous page index */\n  private _previousPageIndex: number;\n\n  /** The page size options */\n  private _pageSizeOptions: number[];\n\n  /** The no data flag */\n  private _noData: boolean;\n\n  /** The sort options */\n  private _sortOptions: SortOption[];\n\n  /** The query string */\n  private _query: string;\n\n  /** The columns to use when filtering */\n  private _filterColumns: string[] = [];\n\n  /** The filter options */\n  private _filterOptions: FilterOptions = new FilterOptions();\n\n  /**\n   * Constructor\n   * @param pageSize - The page size\n   * @param pageSizeOptions - The page size options\n   * @param sortOptions - The sort options\n   */\n  constructor(\n    pageSize: number = 5,\n    pageSizeOptions: number[] = [5, 10, 20, 50],\n    ...sortOptions: SortOption[]\n  ) {\n    this._pageSize = pageSize;\n    this._pageSizeOptions = pageSizeOptions;\n    this._sortOptions = sortOptions;\n  }\n\n  // **********************\n  // * Public methods\n  // **********************\n\n  /**\n   * Append an object to the data array\n   * @param object - The object to append\n   * @param pageIndex - The page to go to after appending the object\n   * @returns The modified page of data\n   */\n  public append(object: T, pageIndex?: number): T[] {\n    if (object) {\n      this._data.push(object);\n      // this._length = this._data.length;\n    }\n    return this.paginate(pageIndex);\n  }\n\n  /**\n   * Delete an object from the data array. Use the object ID to locate the object to delete.\n   * @param id - The ID of the object to delete.\n   * @param pageIndex - The page to go to after deleting the object\n   * @returns The modified page of data\n   */\n  public deleteById(id: string, pageIndex?: number): T[] {\n    if (id) {\n      this._data = this._data.filter(f => f._id !== id);\n    }\n    return this.paginate(pageIndex);\n  }\n\n  /**\n   * Find an object in the data array\n   * @param property - The object property to use for matching\n   * @param value - The property value to look for\n   * @returns The matching object\n   */\n  public find(property: string, value: any): T {\n    const result = CollectionUtil.find(this._data, property, value);\n    return result;\n  }\n\n  /**\n   * Find an object in the data array by matching the object ID\n   * @param id - The ID of the object to find\n   * @returns The matching object\n   */\n  public getById(id: string): T {\n    const object = CollectionUtil.findById(this._data, id);\n    return object;\n  }\n\n  /**\n   * Go to the start of the data array\n   */\n  public goFirst() {\n    this._pageIndex = 0;\n    return this.paginate();\n  }\n\n  /** Go to the end of the data array */\n  public goLast() {\n    const pageCount = Math.floor(this._length / this._pageSize);\n    this._pageIndex = pageCount - 1;\n    if (this._pageIndex < 0) {\n      this._pageIndex = 0;\n    }\n  }\n\n  /**\n   * Insert an object in the data array\n   * @param object - The object to insert\n   * @param pageIndex - The page to go to after inserting the object\n   * @returns The modified page of data\n   */\n  public insert(object: T, pageIndex?: number): T[] {\n    if (object) {\n      this._data.unshift(object);\n    }\n    return this.paginate(pageIndex);\n  }\n\n  /**\n   * Load the passed data into the data array\n   * @param data - The data to load\n   * @returns The first page of data\n   */\n  public loadData(data: T[]): T[] {\n    this._data = data;\n    this._length = data.length;\n    this._noData = data.length === 0 ? true : false;\n    const filteredData = this.paginate();\n    return filteredData;\n  }\n\n  /**\n   * Update the paginator properties and trigger a pagination event\n   * @param pageData - The paginator properties to update\n   */\n  public async onPagination(pageData: PaginationEvent) {\n    pageData.pageSizeChanged = this._pageSize !== pageData.pageSize;\n    this._length = pageData.length;\n    this._pageIndex = pageData.pageIndex;\n    this._pageSize = pageData.pageSize;\n    this._previousPageIndex = pageData.previousPageIndex;\n    this.paginationSubject$.next(pageData);\n  }\n\n  /**\n   * Trigger a pagination event\n   * @param pageIndex - The page to go to after re-sorting and filtering\n   * @Returns The current page of data\n   */\n  public paginate(pageIndex?: number): T[] {\n    this.sort();\n    this._filteredData = this.filter();\n    this._length = this._filteredData.length;\n    if (pageIndex !== undefined) {\n      this._pageIndex = pageIndex;\n    }\n    let start = this._pageIndex * this._pageSize;\n    if (start >= this.length) {\n      this._pageIndex--;\n      if (this.pageIndex < 0) {\n        this.pageIndex = 0;\n      }\n      start = this._pageIndex * this._pageSize;\n    }\n    const end = start + this._pageSize;\n    const dataToReturn = _.slice(this._filteredData, start, end);\n    return dataToReturn;\n  }\n\n  /**\n   * Set the sort options\n   * @param sortOptions - The sort options\n   */\n  public setSortOptions(...sortOptions: SortOption[]) {\n    this._sortOptions = sortOptions;\n  }\n\n  /**\n   * Set the filter columns\n   * @param filterColumns - The filter columns\n   */\n  public setFilterColumns(...filterColumns: string[]): void {\n    this._filterColumns = filterColumns;\n  }\n\n  /**\n   * Set the filter options\n   * @param fitlerCase - The filter case option\n   * @param fitlerScope - The filter scope option\n   */\n  public setFilterOptions(\n    fitlerCase: FilterCase,\n    fitlerScope: FilterScope\n  ): void {\n    this._filterOptions = new FilterOptions(fitlerCase, fitlerScope);\n  }\n\n  /**\n   * Set the filter query\n   * @param query - The filter query\n   * @returns A page of data\n   */\n  public setQuery(query: string): T[] {\n    this._query = query;\n    return this.paginate();\n  }\n\n  /**\n   * Update an object in the data array\n   * @param object - The object to update\n   * @param pageIndex - The page to go to after updating\n   * @Returns The current page of data\n   */\n  public update(object: T, pageIndex?: number): T[] {\n    const index = this._data.findIndex(o => o._id === object._id);\n    if (index < 0) {\n      this._data.push(object);\n      // this._length = this._data.length;\n    } else {\n      this._data[index] = object;\n    }\n    return this.paginate(pageIndex);\n  }\n\n  /**\n   * Apply the current filter\n   */\n  private filter(): T[] {\n    if (!this._query || !this._data) {\n      return this._data;\n    }\n    const filteredData = CollectionUtil.filter(\n      this._data,\n      this._query,\n      this._filterColumns,\n      this._filterOptions\n    );\n    return filteredData;\n  }\n\n  /**\n   * Apply the current sort options\n   */\n  private sort(): void {\n    if (!this._sortOptions) {\n      return;\n    }\n    if (!this._data) {\n      return;\n    }\n    CollectionUtil.multiKeySort(this._data, ...this._sortOptions);\n  }\n}\n","import * as ShortId from 'shortid';\n\n/**\n * A utility for generating Short IDs\n */\nexport class ShortIdUtil {\n  /**\n   * Generate a short ID\n   * @returns A short ID string\n   */\n  public static generateId(): string {\n    let id = ShortId.generate();\n    while (id.indexOf('_') >= 0 || id.indexOf('-') >= 0) {\n      id = ShortId.generate();\n    }\n    return id;\n  }\n}\n","import { of } from 'rxjs';\nimport { DialogResult } from '../../../models/dialog/dialog-result.model';\nimport { DialogButton } from '../../../enums/dialog-button.enum';\n\nexport class MatDialogMock {\n  public dialogResult = new DialogResult(DialogButton.OK);\n\n  public open() {\n    return {\n      afterClosed: () => of(this.dialogResult)\n    };\n  }\n}\n","/**\n * Array of state abbrevations\n */\nexport const STATE_ABBREVIATIONS: Array<string> = [\n  'AK',\n  'AL',\n  'AR',\n  'AS',\n  'AZ',\n  'CA',\n  'CO',\n  'CT',\n  'DC',\n  'DE',\n  'FL',\n  'GA',\n  'GU',\n  'HI',\n  'IA',\n  'ID',\n  'IL',\n  'IN',\n  'KS',\n  'KY',\n  'LA',\n  'MA',\n  'MD',\n  'ME',\n  'MI',\n  'MN',\n  'MO',\n  'MS',\n  'MT',\n  'NC',\n  'ND',\n  'NE',\n  'NH',\n  'NJ',\n  'NM',\n  'NV',\n  'NY',\n  'OH',\n  'OK',\n  'OR',\n  'PA',\n  'PR',\n  'RI',\n  'SC',\n  'SD',\n  'TN',\n  'TX',\n  'UT',\n  'VA',\n  'VI',\n  'VT',\n  'WA',\n  'WI',\n  'WV',\n  'WY'\n];\n","import { FormControl } from '@angular/forms';\n\nexport const validateStrongPassword = (control: FormControl) => {\n  try {\n    const value = control.value;\n\n    if (/(?=.*[a-z])/.test(value) === false) {\n      return {\n        lowerCase: {\n          invalid: true\n        }\n      };\n    }\n    if (/(?=.*[A-Z])/.test(value) === false) {\n      return {\n        upperCase: {\n          invalid: true\n        }\n      };\n    }\n    if (/(?=.*[0-9])/.test(value) === false) {\n      return {\n        number: {\n          invalid: true\n        }\n      };\n    }\n    if (\n      /(?=.[@%/'\"!#,~&;`_<>\\:\\.\\^\\$\\*\\+\\-\\?\\(\\)\\[\\]\\{\\}\\\\\\|])/.test(value) ===\n      false\n    ) {\n      return {\n        specialCharacter: {\n          invalid: true\n        }\n      };\n    }\n    const stringValue: string = value;\n    if (value.length < 8) {\n      return {\n        minLength: {\n          invalid: true\n        }\n      };\n    }\n    if (value.length > 20) {\n      return {\n        maxLength: {\n          invalid: true\n        }\n      };\n    }\n    return {};\n  } catch (error) {\n    return {\n      invalidPassword: {\n        invalid: true\n      }\n    };\n  }\n};\n"]}